var documenterSearchIndex = {"docs":
[{"location":"chapter7/#MQTT-broker-installeren","page":"7 MQTT broker installeren","title":"MQTT broker installeren","text":"","category":"section"},{"location":"chapter7/","page":"7 MQTT broker installeren","title":"7 MQTT broker installeren","text":"Een MQTT broker is een programma waarmee we gegevens kunnen uitwisselen tussen verschillende computers of sensoren.","category":"page"},{"location":"chapter7/#Inhoud","page":"7 MQTT broker installeren","title":"Inhoud","text":"","category":"section"},{"location":"chapter7/","page":"7 MQTT broker installeren","title":"7 MQTT broker installeren","text":"Pages = [\"chapter7.md\"]","category":"page"},{"location":"chapter7/#Wat-je-nodig-hebt","page":"7 MQTT broker installeren","title":"Wat je nodig hebt","text":"","category":"section"},{"location":"chapter7/","page":"7 MQTT broker installeren","title":"7 MQTT broker installeren","text":"Een Raspberry Pi 3B+ met het besturingssysteem Ubuntu Server 22.04.\nDocker, Portainer en Node-RED zijn geinstalleerd.","category":"page"},{"location":"chapter7/#Wat-je-gaat-doen","page":"7 MQTT broker installeren","title":"Wat je gaat doen","text":"","category":"section"},{"location":"chapter7/","page":"7 MQTT broker installeren","title":"7 MQTT broker installeren","text":"Stap 1: ChatGPT om docker-compose.yml bestand vragen.","category":"page"},{"location":"chapter7/","page":"7 MQTT broker installeren","title":"7 MQTT broker installeren","text":"Stap 2: Installeren Mosquittto.","category":"page"},{"location":"chapter7/","page":"7 MQTT broker installeren","title":"7 MQTT broker installeren","text":"Stap 3: Toegang aan iedereen geven.","category":"page"},{"location":"chapter7/#Stap-1-ChatGPT-om-docker-compose.yml-bestand-vragen","page":"7 MQTT broker installeren","title":"Stap 1 - ChatGPT om docker-compose.yml bestand vragen","text":"","category":"section"},{"location":"chapter7/","page":"7 MQTT broker installeren","title":"7 MQTT broker installeren","text":"Stel de volgende vraag aan chatGPT: maak een docker-compose.yml bestand voor mosquitto.","category":"page"},{"location":"chapter7/","page":"7 MQTT broker installeren","title":"7 MQTT broker installeren","text":"Ik kreeg als antwoord:","category":"page"},{"location":"chapter7/#docker-compose.yml","page":"7 MQTT broker installeren","title":"docker-compose.yml","text":"","category":"section"},{"location":"chapter7/","page":"7 MQTT broker installeren","title":"7 MQTT broker installeren","text":"version: '3'\nservices:\n  mosquitto:\n    image: eclipse-mosquitto\n    ports:\n      - \"1883:1883\"\n    volumes:\n      - mosquitto-data:/mosquitto/data\n      - mosquitto-config:/mosquitto/config\n    restart: unless-stopped\n\nvolumes:\n  mosquitto-data:\n  mosquitto-config:","category":"page"},{"location":"chapter7/","page":"7 MQTT broker installeren","title":"7 MQTT broker installeren","text":"Deze configuratie maakt gebruik van de officiële Eclipse Mosquitto Docker-afbeelding (image) en maakt verbinding op poort 1883. Het configureert ook twee Docker-volumes voor de gegevens en configuratie van Mosquitto, zodat deze na het verwijderen van de container behouden blijven.","category":"page"},{"location":"chapter7/#Stap-2-Installeren-Mosquittto","page":"7 MQTT broker installeren","title":"Stap 2 - Installeren Mosquittto","text":"","category":"section"},{"location":"chapter7/","page":"7 MQTT broker installeren","title":"7 MQTT broker installeren","text":"Stap Actie\n1 Kopieeer de gegevens uit docker-compose.yml naar het klembord.\n2 Open de browser en type in de adresbalk: IP-adres_Raspberry_Pi:9000. Dit zorgt dat je Portainer in je browser opent.\n3 Zoek in de browser naar \"stacks\" en klik erop. Hierdoor opent het menu. (Image: fig_7_1)\n4 Klik in het menu op \"Stacks\" om een overzicht te zien. (Image: fig_7_2)\n5 Klik op de knop \"Add Stack\".\n6 Geef de Stack een naam door mosquitto in het veld \"Name\" te typen.\n7 Klik op de eerste regel in het veld \"Web-editor\" en plak de tekst van het klembord door Ctrl + V te drukken. (Image: fig_7_3)\n8 Klik op de knop \"Deploy the stack\" die onderaan de pagina staat.(Image: fig_7_4)\n9 Ga naar het menu \"containers\" en kijk of de container begint .\n ","category":"page"},{"location":"chapter7/","page":"7 MQTT broker installeren","title":"7 MQTT broker installeren","text":"En dat is het! Je zou nu een werkende Mosquitto MQTT-broker moeten hebben binnen een Docker stack die beheerd wordt door Portainer. ","category":"page"},{"location":"chapter7/#Stap-3-Toegang-aan-iedereen-geven","page":"7 MQTT broker installeren","title":"Stap 3 - Toegang aan iedereen geven","text":"","category":"section"},{"location":"chapter7/","page":"7 MQTT broker installeren","title":"7 MQTT broker installeren","text":"Stap Actie\n1 Open het programma Protainer en ga naar \"Containers\".\n2 We gaan iets veranderen in de Mosquitto-instellingen zodat iedereen erbij kan. Klik op het vierde plaatje achter \"mosquitto-mosquitto-1\" om in de container naar binnen te gaan. (Image: fig_7_5)\n3 Kies in het veld \"Command\" voor \"/bin/sh\". Druk op de knop \"Connect\". (Image: fig_7_6)\n4 Genereer een lijst met folders en de bestanden, typ: ls -l. Je ziet het bestand \"mosquitto-no-auth.conf\".\n5 Als je wilt weten wat er in het bestand staat, typ dan cat mosquitto-no-auth.conf en druk op de toets \"Enter\". De zin \"allow_anonymous true\" betekent dat je niet hoeft in te loggen. (Image: fig_7_7)\n6 We gaan het bestand kopiëren naar de map \"/mosquitto/config/\". Typ hiervoor: cp mosquitto-no-auth.conf /mosquitto/config/mosquitto.conf.\n7 Verlaat de contaner met \"Ctrl+D\".\n8 Vink het hokje aan voor de container en klik op de knop \"Restart\". (Image: fig_7_8)\n ","category":"page"},{"location":"chapter7/","page":"7 MQTT broker installeren","title":"7 MQTT broker installeren","text":"info: Tip\nAuto-complete/Automatisch aanvullingIn Linux is er een handige functie die auto-complete heet en die je helpt om sneller en makkelijker commando's in te typen in de terminal. Stel je voor dat je een lang woord moet typen, zoals \"cp mosquitto-no-auth.conf /mosquitto/config/mosquitto.conf\". In plaats van het hele woord te typen, kun je de eerste paar letters typen, zoals \"cp mo\", en dan op de tab-toets drukken. Linux zal dan het woord \"cp mo\" automatisch voor je afmaken als er geen andere woorden zijn die met \"mo\" beginnen. Als je de tweede keer op de tab-toets drukt, dan krijg je een overzicht van alle mogelijke woorden die beginnen met \"mosquitto\". In ons geval zie je dan bijvoorbeeld \"mosquitto-no-auth.conf\" en \"mosquitto/\":      (Image: fig_7_9)Als je daarna op de \"-\" toets drukt gevolgd door de tab-toets, dan maakt Linux het hele woord voor je af. Dit bespaart tijd en voorkomt fouten als je lange woorden moet typen. Auto-complete is dus een handige functie die het werken in de terminal veel makkelijker en sneller maakt.Een command breek je af met \"Ctrl+C\".","category":"page"},{"location":"chapter7/#Samenvatting","page":"7 MQTT broker installeren","title":"Samenvatting","text":"","category":"section"},{"location":"chapter7/","page":"7 MQTT broker installeren","title":"7 MQTT broker installeren","text":"In deze les leer je hoe je Mosquitto installeert, een programma dat helpt bij het delen van informatie tussen verschillende computers en sensoren. Om dit te doen heb je een Raspberry Pi 3B+ met Ubuntu Server 22.04 besturingssysteem nodig en de programma's Docker, Portainer en Node-RED. Je moet de inhoud van een bestand genaamd \"docker-compose.yml\" in Portainer plakken om Mosquitto te kunnen installeren. Vervolgens moet je een paar instellingen aanpassen, zodat programma's niet hoeven in te loggen. Dit doe je door het bestand \"mosquitto-no-auth.conf\" te kopiëren naar een speciale map en de container opnieuw op te starten. En kijk, je hebt nu een werkende MQTT-broker die informatie kan delen tussen verschillende apparaten!","category":"page"},{"location":"references/#References","page":"References","title":"References","text":"","category":"section"},{"location":"references/#YouTube","page":"References","title":"YouTube","text":"","category":"section"},{"location":"references/#Diversen","page":"References","title":"Diversen","text":"","category":"section"},{"location":"blog/#Blog","page":"Blog","title":"Blog","text":"","category":"section"},{"location":"blog/#","page":"Blog","title":"2023","text":"","category":"section"},{"location":"blog/#07-2023-Raspberry-Pi-4-ontvangen","page":"Blog","title":"06-07-2023 - Raspberry Pi 4 ontvangen","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Gisteren kreeg ik mijn Raspberry Pi 4 met 4GB RAM. Ik had al een nieuw geheugenkaartje van 16GB met Raspberry Pi OS lite (64 bit) gemaakt om te zien of ik de cursus ook kon volgen met dat besturingssysteem in plaats van Ubuntu 22.04 server. Tot nu toe gaat het goed! Ik heb Portainer en Node-RED succesvol geïnstalleerd.","category":"page"},{"location":"blog/#05-2023-Verwijderen-van-de-lessen-over-Grafana-en-InfluxDB","page":"Blog","title":"08-05-2023 - Verwijderen van de lessen over Grafana en InfluxDB","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Ik heb de lessen over Grafana en InfluxDB verwijderd omdat ik een betere manier heb gevonden om Grafana te gebruiken met de MQTT-broker. Het lijkt me heel interessant om dat te leren. Ik ga uitzoeken hoe dat werkt voordat we weer verder gaan met de les over grafana.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"De Slimme Meter sectie heb ik nog niet getest. Nu test ik met van een Raspberry Pi 4. Deze heb ik geleend van de Coderdojo club. Ik heb zelf ook zo'n computer besteld en als ik die heb ontvangen, wil ik graag proberen om de Slimme Meter sectie ermee te testen.","category":"page"},{"location":"blog/#05-2023-Testen-van-de-lessen.","page":"Blog","title":"03-05-2023 - Testen van de lessen.","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Les 1 Micro SD-kaartje aanmaken ging goed.\nLes 2 Communiceren met de Raspberry Pi ging ook goed.\nLes 3 Docker installeren ging goed. Duurde wel lang.\nLes 4 Portainer installeren ging goed.\nLes 5 Node-RED installeren ging goed.\nLes 6 Website bouwen met Node-RED. Website bouwen met Node-RED ging goed. Stap 2: Werken met API's ging ook goed.\nLes 7 MQTT broker installeren. Ging goed. Les uitgebreid met Stap 3 - Toegang aan iedereen geven.\nLes 8 Temperatuur meten. Niet getest.\nLes 9 Node-RED dashboard programma maken. Er is nogal wat veranderd in het dashboard. Extra stap toegevoegd: Stap 2 - Indeling van een dashboard.","category":"page"},{"location":"blog/#04-2023","page":"Blog","title":"25-04-2023","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Ik heb het probleem met Les 6 opgelost! Je moet niet docker swarm init te gebruiken, maar in plaats daarvan de optie Docker Standalone. Ik heb het materiaal voor de cursus aangepast en op GitHub geplaatst. Nu ga ik les 1 tot en met 6 opnieuw testen.","category":"page"},{"location":"blog/#04-2023-Gestart-met-testen","page":"Blog","title":"21-04-2023 - Gestart met testen","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Ik heb een Raspberry Pi 4 model B te leen gekregen van de LeusdenZeT om te testen. Thanks.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Les 1 Micro SD-kaartje aanmaken ging goed.\nLes 2 Communiceren met de Raspberry Pi ging ook goed.\nLes 3 Docker installeren ging goed. Duurde wel lang.\nLes 4 Portainer installeren ging goed.\nLes 5 Node-RED installeren ging niet goed. Ik heb Node-RED draaiende gekregen door een de code in het bestand \"docker-compose.yml\" te zetten in de folder \"home/ubuntu/projects/nodered\" en te starten met docker compose up.\nLes 6 Website bouwen met Node-RED. Website bouwen met Node-RED ging goed. Stap 2: Werken met API's lukte niet. Ik heb nu het vermoeden dat er iets mis is met het image dat gedownload wordt. Over een paar dagen opnieuw proberen, misschien dat men het gecorrigeerd heeft. ","category":"page"},{"location":"blog/#03-2023-CoderDojo-Techlab-Leusden","page":"Blog","title":"10-03-2023 - CoderDojo Techlab Leusden","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Hé jij daar! Ben jij ook zo nieuwsgierig naar hoe computers werken en wil jij leren hoe je zelf kan programmeren? Dan is de Coderdojo club van LeusdenZeT in Leusden echt iets voor jou!","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Bij de Coderdojo club kan je samen met andere kinderen van jouw leeftijd leren programmeren, robots bouwen en games maken. Dit doe je natuurlijk niet alleen! Onze mentoren zijn er om jou te helpen en te begeleiden, zodat jij alles goed begrijpt en lekker aan de slag kunt gaan.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Weet je nog helemaal niks van programmeren? Geen probleem! Bij de Coderdojo club beginnen we altijd bij de basis en gaan we stap voor stap verder. Zo kan jij op jouw eigen tempo leren en uiteindelijk ook zelf jouw eigen projecten bedenken en maken.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Maar niet alleen het leren programmeren is belangrijk. Bij de Coderdojo club kan je ook nieuwe vrienden maken en je creativiteit de vrije loop laten. En natuurlijk hebben we ook altijd heel veel lol!","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Ben jij tussen de 7 en 17 jaar oud en wil jij graag meer leren over programmeren? Schrijf je dan snel in bij de Coderdojo club van LeusdenZeT! Wij kunnen niet wachten om jou te verwelkomen en samen te ontdekken hoe leuk het is om te programmeren!","category":"page"},{"location":"blog/#03-2023-Les-over-Grafana-en-InfluxDB-containers-installeren-is-klaar","page":"Blog","title":"09-03-2023 - Les over Grafana en InfluxDB containers installeren is klaar","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Alle lessen zijn nu klaar en ik ga mijn werk controleren om te zien of alles klopt wat ik heb opgeschreven.","category":"page"},{"location":"blog/#03-2023-Temperatuur-van-de-huiskamer-in-Domoticz-weergeven","page":"Blog","title":"08-03-2023 - Temperatuur van de huiskamer in Domoticz weergeven","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Domoticz kan ook gegevens ontvangen van de MQTT-broker door zich te abonneren op het onderwerp \"domoticz/in\".","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Referentie: https://www.huizebruin.nl/domoticz/installatie-domoticz-mq/","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Ik ga je laten zien hoe je Domoticz kan gebruiken om te zien hoe warm of koud het in de huiskamer is. Zo weet je altijd of je een trui moet aandoen of dat het lekker warm genoeg is!","category":"page"},{"location":"blog/#Stap-1:-Node-RED-applicatie-uitbreiden","page":"Blog","title":"Stap 1: Node-RED applicatie uitbreiden","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Sleep twee knooppunten naar het werkblad: eentje van een \"function\" en eentje van een \"mqtt out\". Volg het plaatje in figuur 1 om ze goed in te stellen.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"(Image: fig_blog_1) Figuur 1","category":"page"},{"location":"blog/#Stap-2-\"function\"-definiëren","page":"Blog","title":"Stap 2 - \"function\" definiëren","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Bekijk figuur 2 goed en zorg dat de functie er precies zo uitziet. Misschien moet je de waarde van \"idx\" later nog veranderen, dat staat in Stap-6-Idx-in-de-function-aanpasssen uitgelegd.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"(Image: fig_blog_2) Figuur 2","category":"page"},{"location":"blog/#Stap-3-\"mqtt-out\"-definiëren","page":"Blog","title":"Stap 3 -  \"mqtt out\" definiëren","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Zet de \"mqtt out\" zoals in figuur 3 staat afgebeeld. Zo kan de informatie goed worden verstuurd!","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"(Image: fig_blog_3) Figuur 3","category":"page"},{"location":"blog/#Stap-4-Pas-de-\"mqtt\"-definitie-aan","page":"Blog","title":"Stap 4 - Pas de \"mqtt\" definitie aan","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Klik op \"Setup\" en dan op \"Hardware\". Zoek naar het document dat \"mqtt\" heet en klik erop.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"(Image: fig_blog_4) Figuur 4","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Scrol helemaal naar beneden op het formulier en zet bij \"Topic in Prefix:\" de tekst \"domoticz/in\".","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"(Image: fig_blog_5) Figuur 5","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Druk op de knop \"Update\" om het formulier bij te werken. Blijf daarna op het formulier.","category":"page"},{"location":"blog/#Stap-5-Maak-een-\"dummy\"-thermometer-aan-in-Domoticz","page":"Blog","title":"Stap 5 - Maak een \"dummy\" thermometer aan in Domoticz","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Druk op de knop \"Add\" onderaan het \"mqtt\" formulier. Verander het formuliertype naar \"Dummy (Does nothing, use for virtual switches only)\". Geef het een naam \"dummy\" en druk op de knop \"Update\".","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"(Image: fig_blog_6) Figuur 6","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Je ziet nu een knop genaamd \"Create Virtual Sensors\" in de \"dummy\" regel. Klik op \"Create Virtual Sensors\" en vul de informatie in zoals weergegeven in \"figuur 7\". Klik op \"OK\" als je klaar bent.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"(Image: fig_blog_7) Figuur 7","category":"page"},{"location":"blog/#Stap-6-Idx-in-de-function-aanpasssen","page":"Blog","title":"Stap 6 - Idx in de function aanpasssen","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Ga naar \"Setup\" en klik op \"Devices\". Zoek naar de regel met de tekst \"Temperatuur huiskamer\" en noteer het \"idx\"-nummer dat erbij hoort.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"(Image: fig_blog_8) Figuur 8","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Ga terug naar de Stap 2 - \"function\" definiëren die je eerder hebt ingesteld en verander het \"idx\"-nummer naar het nummer dat je zojuist hebt genoteerd. Klik vervolgens op de tab \"Temperature\" om het resultaat te bekijken.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"(Image: fig_blog_9) Figuur 9","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Klik op het sterretje om de temperatuur ook op het Domoticz dashboard te laten zien. Zo kan je de temperatuur makkelijk bekijken!","category":"page"},{"location":"blog/#02-2023","page":"Blog","title":"15-02-2023","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Goed nieuws! We hebben de les \"Domoticz installeren\" afgerond. In de volgende lessen gaan we leren hoe we Domoticz kunnen gebruiken met je Slimme Meter.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"En er is nog meer goed nieuws! We hebben ook de les \"Slimme meter aansluiten\" afgerond. Ik heb zelfs een paar nieuwe schermen toegevoegd van Domoticz.","category":"page"},{"location":"blog/#02-2023-2","page":"Blog","title":"14-02-2023","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"De les \"Node-RED dashboard programma maken\" is klaar. Je leert hoe je een dashboard opzet met Node-RED.","category":"page"},{"location":"blog/#02-2023-3","page":"Blog","title":"07-02-2023","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"De les \"Temperatuur meten\" is klaar. Ik wil de hele les nog een keer testen en kijken of het goed is.","category":"page"},{"location":"blog/#02-2023-4","page":"Blog","title":"01-02-2023","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"De les \"Website bouwen met Node-RED\" is klaar. We gaan leren hoe we gegevens van websites kunnen gebruiken. Dit wordt gedaan door een API te gebruiken. Soms moeten we een account aanmaken om de gegevens te kunnen gebruiken en het is niet altijd gratis. Maar, in deze les maken we een eigen website over Honden en halen we plaatjes van de honden van andere website. Ook leren we hoe we onze website er op elk apparaat hetzelfde uit kan laten zien.","category":"page"},{"location":"blog/#01-2023","page":"Blog","title":"25-01-2023","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"De les over hoe je Node-RED installeert is nu klaar.","category":"page"},{"location":"blog/#01-2023-2","page":"Blog","title":"24-01-2023","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"We hebben nog wat veranderingen gemaakt in het hoofdstuk over hoe te praten met de Raspberry Pi computer.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Het hoofdstuk \"Docker installeren\" is klaar. Er zijn een paar manieren om opdrachten te geven aan de Raspberry Pi vanaf je laptop. Dit kan via de computerprogramma's SSH, Docker-Client installeren of via de browser met Portainer. De Docker-Client methode heb ik verwijderd om het overzichtelijker te houden.","category":"page"},{"location":"blog/","page":"Blog","title":"Blog","text":"Het hoofdstuk \"Portainer installeren\" is klaar.","category":"page"},{"location":"blog/#01-2023-3","page":"Blog","title":"20-01-2023","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"In het tweede hoofdstuk 'Communiceren met de Raspberry Pi' is klaar. Je leert hoe je vanaf een laptop kan praten met de Raspberry Pi.","category":"page"},{"location":"blog/#01-2023-4","page":"Blog","title":"19-01-2023","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Het hoofdstuk 'Maak je SD-kaartje klaar voor de Raspberry Pi 3B+' is klaar. Het gaat over hoe je een SD-kaartje (dat is een klein kaartje dat je in de Raspberry Pi 3B+ steekt) klaarmaakt zodat je er software op kunt installeren en de Raspberry Pi 3B+ ermee kunt laten werken.","category":"page"},{"location":"blog/#01-2023-5","page":"Blog","title":"16-01-2023","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Vandaag ontdekte ik iets nieuws. Je kan al de gegevens van je WiFi invoeren als je je Micro SD-kaart aanmaakt. Je kan dan je laptop verbinden met je Raspberry Pi en erop werken.","category":"page"},{"location":"blog/#-2","page":"Blog","title":"2022","text":"","category":"section"},{"location":"blog/#12-2022-Cursus-opzet-gemaakt","page":"Blog","title":"28-12-2022 - Cursus opzet gemaakt","text":"","category":"section"},{"location":"blog/","page":"Blog","title":"Blog","text":"Vandaag de basisstructuur voor de RASPI cursus opgezet.","category":"page"},{"location":"chapter1/#Micro-SD-kaartje-klaarmaken-voor-de-Raspberry-Pi-3B","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","text":"","category":"section"},{"location":"chapter1/","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","text":"We gaan een Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+ met het besturingssysteem Ubuntu Server erop. Dit betekent dat we een speciaal soort computerprogramma op het kaartje gaan installeren. Ubuntu Server is gemaakt om te helpen bij het uitvoeren van taken op een computer.","category":"page"},{"location":"chapter1/#Inhoud","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"Inhoud","text":"","category":"section"},{"location":"chapter1/","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","text":"Pages = [\"chapter1.md\"]","category":"page"},{"location":"chapter1/#Wat-je-nodig-hebt","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"Wat je nodig hebt","text":"","category":"section"},{"location":"chapter1/","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","text":"Om een Micro SD kaartje te maken voor een Raspberry Pi 3B+, heb je het volgende nodig:","category":"page"},{"location":"chapter1/","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","text":"Een computer met een slot voor een Micro SD kaarthouder.\nEen Micro SD kaartje, bijvoorbeeld een van 32GB.\nEen Micro SD-kaarthouder, meestal wordt deze meegeleverd met het Micro SD kaartje.\nHet Raspberry Pi Imager programma.\nNaam van je Wifi-netwerk.\nWachtwoord van je Wifi-netwerk.","category":"page"},{"location":"chapter1/#Wat-je-gaat-doen","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"Wat je gaat doen","text":"","category":"section"},{"location":"chapter1/","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","text":"Om Ubuntu Server te installeren op je Raspberry Pi, volg je deze stappen:","category":"page"},{"location":"chapter1/","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","text":"Stap 1: Installeer het Raspberry Pi Imager programma op je computer.","category":"page"},{"location":"chapter1/","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","text":"Stap 2: Maak het Micro SD kaartje klaar met Ubuntu Server.","category":"page"},{"location":"chapter1/#Stap-1-Installeer-het-Raspberry-Pi-Imager-programma-op-je-computer","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"Stap 1 - Installeer het Raspberry Pi Imager programma op je computer","text":"","category":"section"},{"location":"chapter1/","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","text":"Stap Actie\n1 Ga naar https://www.raspberrypi.com/software/ en download het programma Imager.\n2 Installeer het programma.\n ","category":"page"},{"location":"chapter1/#Stap-2-Maak-het-Micro-SD-kaartje-klaar-met-Ubuntu-Server","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"Stap 2 - Maak het Micro SD kaartje klaar met Ubuntu Server","text":"","category":"section"},{"location":"chapter1/","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","text":"Stap Actie\n1 Kijk of je een 32 bit of 64 bit Raspberry Pi 3B+ Hebt. Om te zien hoeveel \"bits\" je Raspberry Pi heeft, kun je het volgende doen:Kijk op het printplaatje van je Raspberry Pi naar het modelnummer. Dit staat meestal naast de microprocessor. Als het modelnummer eindigt op \"v7\", \"v7l\" of \"v7b\", betekent dit dat je Raspberry Pi een 32 bit processor heeft. Als het modelnummer eindigt op \"v8\" of \"v8l\", betekent dit dat je Raspberry Pi een 64 bit processor heeft.\n2 Doe het Micro SD-kaartje in de kaarthouder.\n3 Doe de kaarthouder in je laptop.\n4 Start het programma Imager. (Image: fig_1_1)\n5 Druk op de knop CHOOSE OS.\n6 Kies Other general-purpose OS.\n7 Kies Ubuntu.\n8 Kies Ubuntu Server 22.04.1 LTS (32 bit als je Raspberry Pi een 32 bit processor heeft, of Ubuntu Server 22.04.1 LTS (64 bit) als je Raspberry Pi een 64 bit processor heeft.\n9 We gaan naar een plek waar we kunnen veranderen hoe onze computer werkt. We komen daar door op een knop met een tandwiel erop te drukken. Daar kunnen we bijvoorbeeld WiFi istellen, de naam van onze computer veranderen en een wachtwoord instellen zodat we vanaf een andere plek op onze computer kunnen werken. (Image: fig_1_2)\n10 Druk op de knop met het tandwiel (rechts onderin).\n11 Klik op het keuzevakje dat voor 'Set hostname' en verander de naam in 'ubuntu'.\n12 Klik op het keuzevakje dat voor 'SSH' staat.\n13 Klik op het keuzerondje 'Use password authentication'.\n14 Scrol verder naar beneden en klik op het keuzevakje 'Set username and password'.\n15 Verander de naam in: ubuntu.\n16 En geef een wachtwoord op. Noteer het wachtwoord op een papiertje voor het geval je het vergeet.\n17 Klik op het keuzevakje 'Configure wireless wan'.\n18 Verander de naam in de naam van je WiFi netwerk.\n19 Geef ook het wachtwoord op.\n20 Klik op het keuzevakje 'Show password' en controleer of het juist is.\n21 Verander de landcode in 'NL'.\n22 Klik op het keuzevakje 'Set local setting'.\n23 Verander 'Time Zone' in Europe/Amsterdam.\n24 Druk op knop \"SAVE\".\n25 Nu zijn we klaar om Ubuntu op een Micro SD kaart te zetten. Dit programma zorgt ervoor dat onze computer werkt.\n26 Druk op de knop CHOOSE STORAGE.\n27 Kies Internal SD card reader.\n28 Druk op de knop \"WRITE\" en dan op \"YES\". Ubuntu Server wordt op je micro SD kaartje gezet. Als dat gebeurd is wordt het geheel nog een keer getest.\n29 Haal de kaarthouder met de Micro SD kaart uit je computer.\n ","category":"page"},{"location":"chapter1/#Samenvatting","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"Samenvatting","text":"","category":"section"},{"location":"chapter1/","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","text":"Dit hoofdstuk gaat over het voorbereiden van een Micro SD-kaartje voor de Raspberry Pi 3B+ met het besturingssysteem Ubuntu Server erop. Ubuntu Server is gemaakt om te helpen bij het uitvoeren van taken op een computer. Om het kaartje klaar te maken, heb je een computer nodig met een Micro SD kaarthouder, een Micro SD kaartje van 32GB, en het Raspberry Pi Imager programma. Je hebt ook de naam en het wachtwoord van je wifi-netwerk nodig.","category":"page"},{"location":"chapter1/","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","text":"Om Ubuntu Server te installeren, moet je het Raspberry Pi Imager programma op je computer installeren. Vervolgens moet je het Micro SD kaartje klaarmaken met Ubuntu Server. Om dit te doen, moet je het kaartje in de kaarthouder schuiven en deze in je laptop plaatsen. Daarna moet je het Imager-programma starten en de stappen volgen om Ubuntu Server op het kaartje te zetten.","category":"page"},{"location":"chapter1/","page":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","title":"1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+","text":"Je moet ook enkele instellingen wijzigen om ervoor te zorgen dat Ubuntu Server correct werkt. Dit omvat het veranderen van de naam van je computer naar 'ubuntu', het instellen van een wachtwoord en het configureren van je wifi-netwerk. Als je deze stappen hebt voltooid en Ubuntu Server op het Micro SD kaartje is geïnstalleerd, haal je de kaarthouder uit je computer en ben je klaar om je Raspberry Pi 3B+ te gebruiken.","category":"page"},{"location":"chapter13/#Grafana-en-InfluxDB-containers-installeren","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"","category":"section"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"*Grafana is een programma dat je kunt gebruiken om gegevens te visualiseren. Stel je voor dat je een lijst hebt met getallen, zoals de temperatuur in een kamer gedurende een dag. Met Grafana kun je deze getallen op een grafiek zetten, zodat je gemakkelijk kunt zien hoe de temperatuur is veranderd gedurende de dag. Zo kun je bijvoorbeeld zien of de temperatuur is gestegen of gedaald, en hoeveel.","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"InfluxDB is een programma waarmee je gegevens kunt opslaan en beheren. Stel je voor dat je een lijst hebt met getallen, zoals de temperatuur in een kamer gedurende een week. Met InfluxDB kun je deze getallen opslaan, zodat je ze later weer kunt bekijken. Zo kun je bijvoorbeeld zien hoe de temperatuur is veranderd gedurende een week, en hoeveel.","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Grafana en InfluxDB worden vaak samen gebruikt. Met Grafana kun je de gegevens die in InfluxDB zijn opgeslagen visualiseren, zodat je ze gemakkelijk kunt begrijpen en analyseren. Bijvoorbeeld, als je de temperatuur in een kamer wilt bekijken gedurende een week, kun je de gegevens van de temperatuur in InfluxDB opslaan.*","category":"page"},{"location":"chapter13/#Inhoud","page":"Grafana en InfluxDB containers installeren","title":"Inhoud","text":"","category":"section"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Pages = [\"chapter13.md\"]","category":"page"},{"location":"chapter13/#Wat-je-nodig-hebt","page":"Grafana en InfluxDB containers installeren","title":"Wat je nodig hebt","text":"","category":"section"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Een Raspberry Pi 3B+ met het besturingssysteem Ubuntu Server 22.04.\nDocker, Portainer en Node-RED zijn geïnstalleerd.\nDe Raspberry Pi heeft verbinding met het Internet.","category":"page"},{"location":"chapter13/#Wat-je-gaat-doen","page":"Grafana en InfluxDB containers installeren","title":"Wat je gaat doen","text":"","category":"section"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Stap 1: Stack met Grafana en Influxdb maken.","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Stap 2: Wachtwoord Grafana wijzigen.","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Stap 3: Grafana aan InfluxDB koppelen.","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Stap 4: Sensor_data database maken.","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Stap 5: Data naar database wegschrijven","category":"page"},{"location":"chapter13/#Stap-1-Stack-met-Grafana-en-Influxdb-maken","page":"Grafana en InfluxDB containers installeren","title":"Stap 1 - Stack met Grafana en Influxdb maken","text":"","category":"section"},{"location":"chapter13/#docker-compose.yml","page":"Grafana en InfluxDB containers installeren","title":"docker-compose.yml","text":"","category":"section"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"version: '3'\n\nservices:\n  influxdb:\n    image: influxdb\n    container_name: influxdb\n    restart: unless-stopped\n    ports:\n      - \"8086:8086\"\n    environment:\n      - INFLUXDB_DB=mydb\n      - INFLUXDB_ADMIN_USER=admin\n      - INFLUXDB_ADMIN_PASSWORD=password\n      - INFLUXDB_USER=myuser\n      - INFLUXDB_USER_PASSWORD=mypassword\n    volumes:\n      - influxdb_data:/var/lib/influxdb\n\n  grafana:\n    image: grafana/grafana\n    container_name: grafana\n    restart: unless-stopped\n    ports:\n      - \"3000:3000\"\n    environment:\n      - GF_INSTALL_PLUGINS=grafana-clock-panel,grafana-simple-json-datasource\n      - GF_SECURITY_ADMIN_USER=admin\n      - GF_SECURITY_ADMIN_PASSWORD=password\n    volumes:\n      - grafana_data:/var/lib/grafana\n    healthcheck:\n      test: [\"CMD-SHELL\", \"curl --fail http://localhost:3000/login\"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n\nvolumes:\n  influxdb_data:\n  grafana_data:","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Dit is een bestand dat aan Docker vertelt hoe het twee programma's moet starten en ze laten samenwerken.","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Het eerste programma heet InfluxDB en het tweede heet Grafana.","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Voor elk programma staat er een stukje code dat vertelt hoe Docker het moet starten en hoe het met andere programma's kan communiceren.","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Voor InfluxDB, vertelt de code Docker om de \"influxdb\" te starten. Het gebruikt een image van InfluxDB dat al bestaat en zet het in een container genaamd \"influxdb\". Het vertelt ook Docker om de container te laten communiceren via poortnummer 8086 op de computer waar het op draait. Er worden ook gegevens opgeslagen in een speciale map genaamd \"influxdb_data\". Dit programma zal altijd opnieuw opstarten als het per ongeluk vastloopt.","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Voor Grafana, vertelt de code Docker om de \"grafana\" te starten. Het gebruikt een plaatje van Grafana dat al bestaat en zet het in een container genaamd \"grafana\". Het vertelt ook Docker om de container te laten communiceren via poortnummer 3000 op de computer waar het op draait. Er worden ook gegevens opgeslagen in een speciale map genaamd \"grafana_data\". Dit programma zal ook altijd opnieuw opstarten als het per ongeluk vastloopt.","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Het bestand sluit af met een lijst van de speciale mappen die Docker moet maken om gegevens op te slaan.","category":"page"},{"location":"chapter13/#Stap-2-Wachtwoord-Grafana-wijzigen","page":"Grafana en InfluxDB containers installeren","title":"Stap 2 - Wachtwoord Grafana wijzigen","text":"","category":"section"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Als je de eerste keer inlogt, moet je een gebruikersnaam en wachtwoord invullen. De standaard gebruikersnaam is \"admin\" en het wachtwoord is ook \"admin\". Maar het is belangrijk om je wachtwoord te veranderen zodat het veiliger is. Als je inlogt, zal er worden gevraagd of je je wachtwoord wilt veranderen. Zorg ervoor dat je een nieuw en sterk wachtwoord kiest dat niemand anders kan raden.","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"(Image: fig_13_1)","category":"page"},{"location":"chapter13/#Stap-3-Grafana-aan-InfluxDB-koppelen","page":"Grafana en InfluxDB containers installeren","title":"Stap 3 - Grafana aan InfluxDB koppelen","text":"","category":"section"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Verbreed het menu door op het venster te verbreden door op \">\" te klikken. Ga naar \"Configuration\" en klik op \"Data sources\".","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"(Image: fig_13_2)","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Klik op de knop \"Add data source\".","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"(Image: fig_13_3)","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Kies voor \"InfluxDB\".","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"(Image: fig_13_4)","category":"page"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Grafana en InfluxDB werken nu samen.","category":"page"},{"location":"chapter13/#Samenvatting","page":"Grafana en InfluxDB containers installeren","title":"Samenvatting","text":"","category":"section"},{"location":"chapter13/","page":"Grafana en InfluxDB containers installeren","title":"Grafana en InfluxDB containers installeren","text":"Grafana en InfluxDB zijn programma's die samen kunnen worden gebruikt om gegevens te visualiseren en op te slaan. Grafana helpt om deze gegevens op een grafiek te zetten, terwijl InfluxDB helpt om deze gegevens op te slaan en te beheren. De installatie van deze programma's kan worden gedaan door het uitvoeren van een aantal stappen op een Raspberry Pi 3B+ met het Ubuntu Server-besturingssysteem. Deze stappen omvatten het maken van een stapel met Grafana en InfluxDB, het wijzigen van het wachtwoord van Grafana en het koppelen van Grafana aan InfluxDB. De code toont de instellingen voor de containerdiensten Grafana en InfluxDB.","category":"page"},{"location":"chapter4/#Portainer-installeren","page":"4 Portainer installeren","title":"Portainer installeren","text":"","category":"section"},{"location":"chapter4/","page":"4 Portainer installeren","title":"4 Portainer installeren","text":"Portainer is een programma waarmee we onze Docker-omgeving gemakkelijker kunnen beheren. Dit betekent dat we een overzicht krijgen van alle computerprogramma's die we in Docker hebben staan en dat we deze programma's gemakkelijker kunnen starten en beheren.","category":"page"},{"location":"chapter4/#Inhoud","page":"4 Portainer installeren","title":"Inhoud","text":"","category":"section"},{"location":"chapter4/","page":"4 Portainer installeren","title":"4 Portainer installeren","text":"Pages = [\"chapter4.md\"]","category":"page"},{"location":"chapter4/#Wat-je-nodig-hebt","page":"4 Portainer installeren","title":"Wat je nodig hebt","text":"","category":"section"},{"location":"chapter4/","page":"4 Portainer installeren","title":"4 Portainer installeren","text":"Een Raspberry Pi 3B+ met het besturingssysteem Ubuntu 22.04 (zie het vorige hoofdstuk).\nSSH verbinding met de Raspberry Pi.","category":"page"},{"location":"chapter4/#Wat-je-gaat-doen","page":"4 Portainer installeren","title":"Wat je gaat doen","text":"","category":"section"},{"location":"chapter4/","page":"4 Portainer installeren","title":"4 Portainer installeren","text":"Je hebt geen account nodig als je 'images' van containers wilt downloaden. De image van Portainer heet portainer/portainer-ce en gaan we gebuiken om een container op de Raspberry Pi te maken.","category":"page"},{"location":"chapter4/","page":"4 Portainer installeren","title":"4 Portainer installeren","text":"Docker Hub is een website waar veel software zit in kleine stukjes die images heten. Een image is een soort mal of patroon dat je kunt gebruiken als basis voor iets dat je wilt maken, bijvoorbeeld een container. Zo hoef je niet alles opnieuw te bedenken of te maken, maar kun je snel aan de slag met de dingen die echt belangrijk zijn voor jouw project.","category":"page"},{"location":"chapter4/","page":"4 Portainer installeren","title":"4 Portainer installeren","text":"Je hoeft geen account te hebben om deze images te downloaden en te gebruiken om containers te maken. We gaan een speciaal stukje software gebruiken dat portainer/portainer-ce heet, een programma waarmee we onze Docker-omgeving gemakkelijker kunnen beheren. We hebben het images nodig om er een container van te maken op de Raspberry Pi.","category":"page"},{"location":"chapter4/","page":"4 Portainer installeren","title":"4 Portainer installeren","text":"Stap 1: Container met Portainer installeren.","category":"page"},{"location":"chapter4/#Stap-1-Container-met-Portainer-installeren","page":"4 Portainer installeren","title":"Stap 1 - Container met Portainer installeren","text":"","category":"section"},{"location":"chapter4/","page":"4 Portainer installeren","title":"4 Portainer installeren","text":"Vaak zul je verder moeten zoeken op het Internet hoe je een container moet installeren. Op de PiMyLife vind je het volgende commando: sudo docker run -d -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:latest.","category":"page"},{"location":"chapter4/","page":"4 Portainer installeren","title":"4 Portainer installeren","text":"Met dit commando wordt een container gemaakt, die uitgevoerd wordt in de achtergrond met de -d optie. Poort 9000 van de container wordt gekoppeld aan de poort 9000 van de Raspberry Pi met de -p optie. Een poort verwijst dus naar een specifieke soort software. De container wordt \"portainer\" genoemd met de --name optie. De container wordt automatisch herstart na een systeemcrash of een reboot met de --restart optie. Met de -v optie wordt de container gekoppeld aan de folder /var/run/docker.sock). De data van de container wordt er opgeslagen. Als we eenmaal Portainer hebben geinstalleerd kunnen we er ook andere containers mee installeren.","category":"page"},{"location":"chapter4/","page":"4 Portainer installeren","title":"4 Portainer installeren","text":"Stap Actie\n1 Maak verbinding met je Raspberry Pi-computer door dit commando te typen: ssh ubuntu@IP-adres Raspberry Pi. Bijvoorbeeld: ssh ubuntu@192.168.2.49.\n3 We gaan werken met de \"Docker Standalone\" omgeving.\n4 Installeer Portainer met dit commando: sudo docker run -d -p 9000:9000 --name=portainer --restart=unless-stopped -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:latest.\n5 Ga naar de Portainer website door IP_adres_Raspberry_Pi:9000 in de adresbalk van je webbrowser te typen. Bijvoorbeeld: 192.168.2.49:9000.\n6 Maak een account aan met gebruikersnaam \"admin\". Zorg dat je de gebruikersnaam opschrijft.\n7 Kies een wachtwoord, zorg dat je het opschrijft.\n8 Je gaat nu Portainer geschikt maken voor de Docker Standalone. Klik op \"Add Environments\". (Image: fig_4_4)\n9 Activeer \"Docker Standalone\" door op het viekantje rechtsboven te klikken. (Image: fig_4_2)\n10 Ververs je browser met http://IP-adres Raspberry Pi:9000/, bijvoorbeeld: http://192.168.2.49:9000\n11 Klik op \"stacks\" in het rechter venster. (Image: fig_4_3)\n12 Klik op \"containers\" in het menu links en je krijgt een lijst te zien van alle containers die draaien onder Docker. (Image: fig_4_9)\n ","category":"page"},{"location":"chapter4/","page":"4 Portainer installeren","title":"4 Portainer installeren","text":"info: Info\nWe gebruiken in het commando de optie \"--restart=unless-stopped\", zodat we de Portainer container ook kunnen verwijderen als we hem stoppen.Als je een container hebt met de naam portainer (--name=portainer) en je wilt het verwijderen, dan kan je dat doen door in de terminal te typen:docker rm -f portainerJe kan jezelf een hoop typewerk besparen, door in het vak te klikken op het kopieer (Image: Copy symbool) symbool\". Zo kopieer je alle tekst in dat vak naar het klembord. Je plakt het terug in de terminal met \"Ctrl + Shift + V\".","category":"page"},{"location":"chapter4/#Samenvatting","page":"4 Portainer installeren","title":"Samenvatting","text":"","category":"section"},{"location":"chapter4/","page":"4 Portainer installeren","title":"4 Portainer installeren","text":"Portainer is een programma waarmee je gemakkelijker je Docker-omgeving kunt beheren, zoals het starten en stoppen van computerprogramma's. Om Portainer te installeren op een Raspberry Pi 3B+ met het besturingssysteem Ubuntu 22.04, heb je een SSH-verbinding nodig met de Raspberry Pi. Je gebruikt een stukje software dat een \"image\" wordt genoemd en dat portainer/portainer-ce heet. Docker Hub is een website waar veel van deze software-images te vinden zijn. Met een speciaal commando wordt een container gemaakt, die Poort 9000 van de container koppelt aan de poort 9000 van de Raspberry Pi en automatisch opnieuw opstart na een systeemcrash of een reboot. Als je Portainer hebt geïnstalleerd, kun je ook andere containers installeren. Om Portainer te verwijderen, gebruik je het commando \"docker rm -f portainer\". Om Portainer te gebruiken, maak je een account aan met een gebruikersnaam en wachtwoord. Door op \"stacks\" te klikken, kun je de containers bekijken die onder Docker draaien, zoals \"portainer\".","category":"page"},{"location":"appendix/#Bijlage","page":"Bijlage","title":"Bijlage","text":"","category":"section"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"info: Info\nZorg ervoor dat je toestemming hebt van een ouder of verantwoordelijke volwassene voordat je iets downloadt op je computer. Als je hulp nodig hebt tijdens het downloaden en installeren, vraag dan aan een ouder of verantwoordelijke volwassene om je te helpen.","category":"page"},{"location":"appendix/#Introduction","page":"Bijlage","title":"Introduction","text":"","category":"section"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Ik heb zelf een Lenovo Legion Y520 Windows 10 laptop met Ubuntu 22.04 geïnstalleerd op een Samsung portable SSD T5 schijf. Ik start mijn machine op vanaf deze schijf.","category":"page"},{"location":"appendix/#Node-RED-flows-van-de-cursus-importeren","page":"Bijlage","title":"Node-RED flows van de cursus importeren","text":"","category":"section"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Zorg dat je vooraf de modules Dashboard en InfluxDB hebt geinstalleerd.","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Volg de volgende stappen om de Node-RED flows te importeren.","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Stap Actie Opmerking\n1 Klik op de link: flows_cursus.json Open het bestand.\n2 Ctrl + A Selecteer alle tekst.\n3 Ctrl + C Kopieer de tekst naar het klembord.\n4 Ctrl + I Open het import venster.\n5 Ctrl + V Plak de code in het import ventser.\n6 Druk op de toets \"Import\" Code wordt geïmporteerd.\n  ","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"(Image: fig_appendix_1)","category":"page"},{"location":"appendix/#Voordelen-en-nadelen-van-containerisatie","page":"Bijlage","title":"Voordelen en nadelen van containerisatie","text":"","category":"section"},{"location":"appendix/#Nadelen","page":"Bijlage","title":"Nadelen","text":"","category":"section"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Er zijn een aantal nadelen verbonden aan containerisatie, waaronder:","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Complexiteit: Containerisatie kan de complexiteit van een systeem verhogen, vooral als er veel verschillende containers worden gebruikt.\nBeveiliging: Containerisatie kan beveiligingsrisico's introduceren, vooral als containers niet goed worden beheerd en geconfigureerd.\nPrestaties: In sommige gevallen kunnen containers de prestaties van een systeem beïnvloeden, vooral als er veel containers op dezelfde fysieke server worden uitgevoerd.\nOpslag: Containerisatie kan leiden tot een grotere opslagbehoefte voor het opslaan van de containerafbeeldingen.\nBeheer: Containerbeheer kan complex zijn en vereist specifieke vaardigheden en tools.\nNetwerk: In sommige gevallen kan de netwerkconfiguratie van de containerisatie-omgeving complex zijn.","category":"page"},{"location":"appendix/#Voordelen","page":"Bijlage","title":"Voordelen","text":"","category":"section"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Er zijn een aantal voordelen verbonden aan containerisatie, waaronder:","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Portabiliteit: Containers zorgen voor een hoge graad van portabiliteit, waardoor applicaties gemakkelijk tussen verschillende omgevingen kunnen worden verplaatst.\nIsolatie: Containers bieden een aantal voordelen voor de isolatie van applicaties, waardoor het risico van conflicten tussen verschillende applicaties wordt verminderd.\nSchaalbaarheid: Containerisatie maakt het gemakkelijker om applicaties te schalen, aangezien containers gemakkelijk kunnen worden toegevoegd of verwijderd als er meer of minder capaciteit nodig is.\nKostenefficiëntie: Containerisatie kan leiden tot kostenefficiëntie, aangezien containers minder middelen verbruiken dan traditionele virtuele machines.\nContinu integratie en deployment: De containerisatie-technologie kan gebruikt worden voor continu integratie en deployment, waardoor het gemakkelijker is om updates en nieuwe versies van applicaties te implementeren.\nBeheer: Containerisatie kan het beheer van applicaties vergemakkelijken, omdat containers gemakkelijk kunnen worden gestart, gestopt en verwijderd.","category":"page"},{"location":"appendix/#Installeren-van-PuTTY-op-Windows","page":"Bijlage","title":"Installeren van PuTTY op Windows","text":"","category":"section"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Om PuTTY te downloaden en te installeren, moet je de volgende stappen volgen:","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Stap Actie Opmerking\n1 Ga naar https://www.putty.org/ Website van PuTTY.\n2 Klik op de link 'Download PuTTY' om het installatieprogramma te downloaden \n3 Zoek het installatieprogramma in je downloads en open het \n4 Volg de stappen in het installatieprogramma om PuTTY te installeren op je computer \n  ","category":"page"},{"location":"appendix/#Installeren-Git","page":"Bijlage","title":"Installeren Git","text":"","category":"section"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Git is een vrij en open source gedistribueerd versiebeheersysteem, ontworpen om alles van kleine tot zeer grote projecten met snelheid en efficiëntie af te handelen.","category":"page"},{"location":"appendix/#Voorwaarden","page":"Bijlage","title":"Voorwaarden","text":"","category":"section"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Je computer OS is Ubuntu 22.04 64 bit.\nJe hebt een GitHub account.","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Stap Actie Opmerking\n1 sudo apt install git \n2 git config –global user.email \"<Je email address>\" Bijvoorbeeld: \"rbontekoe@appligate.nl\"\n3 git config –global user.name \"<Je voor- en achternaam>\" Bijvoorbeeld: \"Rob Bontekoe\"\n4 git config –global github.user \"<Je git hub naam>\" Bijvoorbeeld: \"rbontekoe\"\n5 cat .gitconfig Dit laat je git gegevens zien. Bestanden die met een punt beginnen zijn verborgen bestanden. Verborgen bestanden kun je zien met ls -al.\n  ","category":"page"},{"location":"appendix/#Installeren-Thonny","page":"Bijlage","title":"Installeren Thonny","text":"","category":"section"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Om Thonny te installeren op Ubuntu 22.04, volg je de volgende stappen:","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Stap Actie Opmerking\n1 Ctrl + Alt + T Open het terminalvenster.\n2 sudo apt install thonny Thonny installeren.\n  ","category":"page"},{"location":"appendix/#Installeren-Docker-op-Raspberry-Pi","page":"Bijlage","title":"Installeren Docker op Raspberry Pi","text":"","category":"section"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Docker is een open containerplatform voor het ontwikkelen, verschepen en uitvoeren van toepassingen.","category":"page"},{"location":"appendix/#Voorwaarden-2","page":"Bijlage","title":"Voorwaarden","text":"","category":"section"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Je computer besturingssysteem is Ubuntu 22.04 of hoger.\nJe hebt curl geinstallleerd: sudo apt install curl.","category":"page"},{"location":"appendix/#Installeren","page":"Bijlage","title":"Installeren","text":"","category":"section"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Stap Actie Opmerking\n1 sudo apt update Update Software Repositories.\n2 sudo apt remove docker docker-engine docker.io Verwijder oudere versies van Docker\n3 curl -sSL https://get.docker.com | sh Installeer Docker\n4 sudo docker version Check Docker Engine Version\n  ","category":"page"},{"location":"appendix/#Installeren-van-Ubuntu-op-een-Samsung-T5-en-Lenovo-Legion-Y520-met-Windows-10","page":"Bijlage","title":"Installeren van Ubuntu op een Samsung T5 en Lenovo Legion Y520 met Windows 10","text":"","category":"section"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"The stappen die ik heb gevolgd.","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Stap Actie/Response Opmerking\n1 Download ISO-image van de Ubuntu 18.04. website \n2 Kopieer met Rufus naar een USB-stick \n3 Start de machine en druk op F2 Verander de Bios van Lenovo\n  ","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Onder de Boot tab:\n Fast Boot disabled\nOnder de Security tab:\n Secureboot disabled","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Stap Action/Response Omerking\n4 Start Y520 met Windows 10 and druk op F12 \n5 Kies Ubuntu Herstart via USB.\n6 Na herstart kies voor install Ubuntu on 500GB portable disk \n7 sudo apt update \n8 sudo do-release-upgrade -d Upgrade naar Ubuntu 20.04.\n  ","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Nog even bewaren!","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"########################","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Deze code gaat over twee services die \"Grafana\" en \"InfluxDB\" heten.","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Laten we beginnen met Grafana. De \"services\" sectie vertelt ons dat we een service hebben die Grafana heet. Het gebruikt een \"image\" genaamd \"grafana/grafana\", wat betekent dat het Grafana-pakket van Docker Hub zal worden gebruikt.","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"De \"restart\" sectie vertelt de container om opnieuw op te starten tenzij er een specifieke stopopdracht wordt gegeven. De \"user\" sectie stelt de gebruiker in de container in op 0, wat betekent dat het als de rootgebruiker wordt uitgevoerd.","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Dan hebben we de \"ports\" sectie die ons vertelt dat we de poorten 3000:3000 moeten openen, wat betekent dat verkeer naar de poort 3000 van de container zal worden omgeleid naar poort 3000 op de hostmachine.","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"De \"environment\" sectie vertelt ons welke omgevingsvariabelen we moeten instellen. \"TZ\" is de tijdzone en \"GFPATHSDATA\" en \"GFPATHSLOGS\" zijn de paden naar de gegevens- en logbestanden van Grafana. De \"volumes\" sectie vertelt ons dat we lokale mappen moeten koppelen aan mappen in de container.","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Ten slotte hebben we de \"healthcheck\" sectie die ons vertelt hoe we kunnen controleren of Grafana correct werkt. Het test de container elke 30 seconden door een opdracht uit te voeren en als de test niet slaagt, zal het nog twee keer proberen voordat het de container als niet-gezond beschouwt.","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"InfluxDB volgt een vergelijkbaar formaat als Grafana. We hebben een container genaamd \"influxdb\" die de \"influxdb:1.8\" image gebruikt. Het opent poort 8086, stelt enkele omgevingsvariabelen in en koppelt mappen.","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"Net als Grafana heeft InfluxDB ook een \"healthcheck\" sectie die test of de container correct werkt door het elke 30 seconden te testen.","category":"page"},{"location":"appendix/","page":"Bijlage","title":"Bijlage","text":"########################","category":"page"},{"location":"chapter12/#Stroom-en-gasverbruik-op-het-dashboard-weergeven","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"Stroom- en gasverbruik op het dashboard weergeven","text":"","category":"section"},{"location":"chapter12/","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"12 Stroom- en gasverbruik op het dashboard weergeven","text":"We willen de gegevens over hoeveel stroom en gas we verbruiken willen laten zien op het Dashboard.","category":"page"},{"location":"chapter12/#Inhoud","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"Inhoud","text":"","category":"section"},{"location":"chapter12/","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"12 Stroom- en gasverbruik op het dashboard weergeven","text":"Pages = [\"chapter11.md\"]","category":"page"},{"location":"chapter12/#Wat-je-nodig-hebt","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"Wat je nodig hebt","text":"","category":"section"},{"location":"chapter12/","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"12 Stroom- en gasverbruik op het dashboard weergeven","text":"Een Raspberry Pi 3B+ met het besturingssysteem Ubuntu Server 22.04.\nDocker, Portainer, Domoticz en Node-RED zijn geïnstalleerd.\nDe Raspberry Pi heeft verbinding met het Internet.","category":"page"},{"location":"chapter12/#Wat-je-gaat-doen","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"Wat je gaat doen","text":"","category":"section"},{"location":"chapter12/","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"12 Stroom- en gasverbruik op het dashboard weergeven","text":"Stap 1: Domoticz gegevens aan de MQTT broker doorgeven.","category":"page"},{"location":"chapter12/","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"12 Stroom- en gasverbruik op het dashboard weergeven","text":"Stap 2: Domoticz gegevens op het Dashboard weergegeven.","category":"page"},{"location":"chapter12/#Stap-1-Domoticz-gegevens-aan-de-MQTT-broker-doorgeven","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"Stap 1 - Domoticz gegevens aan de MQTT broker doorgeven","text":"","category":"section"},{"location":"chapter12/","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"12 Stroom- en gasverbruik op het dashboard weergeven","text":"Soms wil je misschien weten hoeveel gas en elektriciteit je gebruikt. Om deze informatie te krijgen, kun je deze ook naar onze \"MQTT broker\" sturen. Je hebt een speciale instelling in Domoticz nodig die een \"MQTT client gateway with LAN interface\" heet. Die ervoor zorgt dat de informatie naar de MQTT broker wordt gestuurd.","category":"page"},{"location":"chapter12/","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"12 Stroom- en gasverbruik op het dashboard weergeven","text":"Type in de adresbalk van je browser IP_adres_Raspberry_Pi:8081 en druk op \"Enter\". Je ziet nu het beginscherm van Domoticz.\nLog in met de naam \"admin\" en het wachtwoord \"domoticz\".\nKlik op de tab \"Setup\" en kies dan \"Hardware\".\nDruk op de knop \"Add\" die onderaan de pagina staat. (Image: fig_12_1)  Vul de volgende waarden in:   Enabled: Aan   Name: mqtt  Type: selecteer \"MQTT client with LAN interfase\"   Remote Address: IP_adres_Raspberry_Pi  Port: 1883  Prevent Loop: True  Publish Topic: Flat  Topic Out Prefix: domoticz/out  TLS Version: tlsv1.2\nDruk op de toets \"Update\" bovenaan de pagina.","category":"page"},{"location":"chapter12/#Stap-2-Domoticz-gegevens-op-het-Dashboard-weergegeven","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"Stap 2 - Domoticz gegevens op het Dashboard weergegeven","text":"","category":"section"},{"location":"chapter12/","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"12 Stroom- en gasverbruik op het dashboard weergeven","text":"Eerder heb je geleerd hoe je informatie op een Dashboard kunt laten zien. Dit is als een magische plek waar je alle gegevens kunt verzamelen die je naar de \"MQTT broker\" hebt gestuurd.","category":"page"},{"location":"chapter12/","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"12 Stroom- en gasverbruik op het dashboard weergeven","text":"Stel de volgende flows op: (Image: fig_12_2)\nKies \"domoticz/out\" als het onderwerp waarover je informatie wilt verzamelen.\nGebruik de code uit deze link voor functie 9. Dit is als een speciaal stukje code dat ervoor zorgt dat de informatie wordt opgehaald en op de juiste manier wordt weergegeven.\nGebruik de code uit deze link voor functie 10. Dit zorgt ervoor dat de informatie wordt opgehaald en weergegeven op de juiste plek.\nVoor \"Electra momenteel\" moet je deze instellingen gebruiken: (Image: fig_12_3)\nVoor \"Gas per 1-1-2023\" moet je deze instellingen gebruiken:  (Image: fig_12_4)","category":"page"},{"location":"chapter12/#JavaScript-code-functie-9","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"JavaScript code functie 9","text":"","category":"section"},{"location":"chapter12/","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"12 Stroom- en gasverbruik op het dashboard weergeven","text":"var myval = msg.payload;\nif (myval.name == 'Power') {\n  msg.payload.value = Number(myval.svalue5);\n  return msg;\n}","category":"page"},{"location":"chapter12/","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"12 Stroom- en gasverbruik op het dashboard weergeven","text":"De informatie die je krijgt, gaat altijd over wat er op dat moment gebeurt. Als je kijkt naar hoeveel stroom je gebruikt, zie je altijd hoeveel stroom je op dat moment verbruikt. En als je een apparaat uitzet, zie je het verschil in het stroomverbruik en weet je dus hoeveel Watt dat apparaat gebruikt.","category":"page"},{"location":"chapter12/#JavaScript-code-functie-10","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"JavaScript code functie 10","text":"","category":"section"},{"location":"chapter12/","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"12 Stroom- en gasverbruik op het dashboard weergeven","text":"let myvalNew = msg.payload;\nlet myvalOld = 0;\nlet myvalStart = 3050.00;\n\nif (myvalNew.name == 'Gas') {\n  \n  msg.payload = ((Number(myvalNew.svalue1-myvalOld)/1000) - myvalStart).toFixed(2);\n  myvalOld = myvalNew.svalue1;\n  return msg;\n\n}","category":"page"},{"location":"chapter12/","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"12 Stroom- en gasverbruik op het dashboard weergeven","text":"Bij het gasverbruik krijg je de totale hoeveelheid die is gebruikt, dus vanaf het begin. Daarom moet je de beginwaarde \"myvalStart\" ervan aftrekken om te weten hoeveel gas er sinds dat moment is gebruikt.","category":"page"},{"location":"chapter12/#Samenvatting","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"Samenvatting","text":"","category":"section"},{"location":"chapter12/","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"12 Stroom- en gasverbruik op het dashboard weergeven","text":"Deze les gaat over hoe je op een Dashboard kan zien hoeveel stroom en gas je verbruikt. Hiervoor heb je een Raspberry Pi 3B+ nodig met het besturingssysteem Ubuntu Server 22.04 en een aantal programma's zoals Docker, Portainer, Domoticz en Node-RED. Je moet ervoor zorgen dat de gegevens van Domoticz naar de \"MQTT broker\" worden gestuurd. Daarna kan je deze informatie ophalen en op de juiste manier weergeven op het Dashboard. Als je bijvoorbeeld kijkt naar hoeveel stroom je op dat moment verbruikt, dan zie je dat op het Dashboard. Bij het gasverbruik krijg je de totale hoeveelheid die is gebruikt, dus vanaf het begin. Daarom moet je de beginwaarde van het gasverbruik aftrekken om te weten hoeveel gas er sinds dat moment is gebruikt.","category":"page"},{"location":"chapter12/","page":"12 Stroom- en gasverbruik op het dashboard weergeven","title":"12 Stroom- en gasverbruik op het dashboard weergeven","text":"Ik heb nog de post Temperatuur van de huiskamer in Domoticz weergeven aan de blog toegevoegd!","category":"page"},{"location":"chapter6/#Website-bouwen-met-Node-RED","page":"6 Website bouwen met Node-RED","title":"Website bouwen met Node-RED","text":"","category":"section"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"We gaan een website maken met Node-RED. De website werkt alleen op het wifi-netwerk waar we op zijn aangesloten. Dit betekent dat we de website alleen kunnen bekijken als we met onze computer of telefoon verbonden zijn met het wifi-netwerk. Tijdens het maken van de website leer je ook werken met HTML-code. HTML is een soort taal waarmee we websites kunnen maken.","category":"page"},{"location":"chapter6/#Inhoud","page":"6 Website bouwen met Node-RED","title":"Inhoud","text":"","category":"section"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"Pages = [\"chapter6.md\"]","category":"page"},{"location":"chapter6/#Wat-je-nodig-hebt","page":"6 Website bouwen met Node-RED","title":"Wat je nodig hebt","text":"","category":"section"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"Een Raspberry Pi 3B+ met het besturingssysteem Ubuntu Server 22.04.\nDocker, Portainer en Node-RED zijn geinstalleerd.","category":"page"},{"location":"chapter6/#Wat-je-gaat-doen","page":"6 Website bouwen met Node-RED","title":"Wat je gaat doen","text":"","category":"section"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"Stap 1: Introductie tot Node-RED en een \"Hallo wereld!\" voorbeeld.","category":"page"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"Stap 2: Werken met API's.","category":"page"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"Stap 3: Personaliseer je website.","category":"page"},{"location":"chapter6/#Stap-1:-Introductie-tot-Node-RED-en-een-\"Hallo-wereld!\"-voorbeeld","page":"6 Website bouwen met Node-RED","title":"Stap 1: Introductie tot Node-RED en een \"Hallo wereld!\" voorbeeld","text":"","category":"section"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"Je hebt 3 knooppunten nodig om een eenvoudige website te maken:","category":"page"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"http in\ntemplate (staat in functie, 1 sectie hoger)\nhttp response","category":"page"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"Met \"http in\" vertel je hoe mensen naar een specifieke pagina op je website kunnen gaan. De pagina is te vinden op het adres IPadresraspberrypi:1880/naam\\pagina. \"http response\" zorgt ervoor dat de pagina er mooi uitziet door middel van iets watHTML-code heet. In \"template\" kun je zien hoe de HTML-code eruit ziet.","category":"page"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"Voer de volgende stappen uit:","category":"page"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"Ga met je browser naar IP_adres_raspberry_pi:1880.\nSleep de knooppunten naar je werkblad. Zie ook Inleiding NodeRed van Eelco Dijkstra.\n(Image: fig_6_1)\nVerbind de knooppunten met de muis aan elkaar. Steeds een eindpunt met een beginpunt. Als je alle knooppunten aan elkaar hebt geplakt, heb je een \"Flow\". Dit is een soort programma.\nDubbelklik op het http in knooppunt en geef als URL op: /hallo.\nDubbelklik op template en tik <h1>Hallo wereld!</h1> op de eerste regel van het veld \"template\".\n(Image: fig_6_2)\nKlik op de knop \"Deploy\" boven aan rechts om de code te maken voor je website.\n(Image: fig_6_3)\nTyp in de zoekbalk van je internet browser: IP_adres_Raspberry_Pi:1880/hallo. Als alles goed is gegaan, zie je 'Hallo wereld!' in vette letters verschijnen op het scherm.\n(Image: fig_6_4)\nVoeg meer tekst toe aan de website door ze tussen de <p> en </p> tags te zetten.","category":"page"},{"location":"chapter6/#Stap-2:-Werken-met-API's","page":"6 Website bouwen met Node-RED","title":"Stap 2: Werken met API's","text":"","category":"section"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"Een API is een manier voor computers om met elkaar te praten en informatie uit te wisselen. Ze doen dit door verzoeken en antwoorden uit te wisselen. JSON is een manier om informatie op te slaan en uit te wisselen die zowel door computers als door mensen begrepen wordt.","category":"page"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"Zo is er de website Dogs die steeds de URL van een ander plaatje van een hond geeft in JSON formaat:","category":"page"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"{\n  \"status\":\"success\",\n  \"message\":\"https://images.dog.ceo/breeds/segugio-italian/n02090722_002.jpg\"\n}","category":"page"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"De code bevat twee delen: een sleutel en een waarde gescheiden door een dubbele punt (:). De sleutel is aan de linkerkant en de waarde is aan de rechterkant.","category":"page"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"De eerste sleutel is \"status\" en de waarde is \"success\". Dit betekent dat alles goed is gegaan en er geen fouten zijn opgetreden.","category":"page"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"De tweede sleutel is \"message\" en de waarde is een URL \"https://images.dog.ceo/breeds/segugio-italian/n02090722_002.jpg\". Dit is een link naar een afbeelding op het internet.","category":"page"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"Dus dit stuk code bevat informatie over de status van een bepaalde actie en een link naar een afbeelding.","category":"page"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"Voer de volgende stappen uit:","category":"page"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"Ga met je browser naar IP_adres_raspberry_pi:1880.\nSleep de volgende knooppunten naar je werkblad:\nhttp in\nhttp request\ntemplate\nhttp response\ndebug\nEen http request gebruik je als je op internet iets vraagt aan een website, zoals de honden website. Het antwoord dat je terugkrijgt is in het formaat van \"JSON\". Als je \"debug\" gebruikt, kun je het antwoord dat je hebt opgehaald bekijken.\nVerbind de knooppunten net als op de tekening:\n(Image: fig_6_5)\nVoer de volgende webadres in bij het invoerveld 'http in': /toon.\nGeef het webadres voor een foto van een hond op: https://dog.ceo/api/breeds/image/random. Stel \"<-Return\" in op \"a parsed JSON object\".\nJe krijgt een plaatje van een willekeurige hond te zien met de HTML code: <img src=\"{{payload}}.message\">.\nDeze code moet je gebruiken om echte websites te maken.\nPlaats in het template de HTML-code voor de website:\n<!DOCTYPE html>\n<html>\n<head>\n\n  <title>Dogs</title>\n\n</head>\n<body>\n\n  <img src=\"{{payload.message}}\">\n\n</body>\n</html>\nIn de <head> sectie kun je de titel van je website zetten. In de <body> sectie kun je de HTML voor de website zetten.\nKlik hier voor een lijst met API's.\nTest het resultaat in de browser: IP_adres_raspberry_pi:1880/toon.","category":"page"},{"location":"chapter6/#Stap-3:-Personaliseer-je-website","page":"6 Website bouwen met Node-RED","title":"Stap 3: Personaliseer je website","text":"","category":"section"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"Web responsive design (WRD) betekent dat je website op elk apparaat, zoals je computer, tablet of telefoon, er altijd even mooi uitziet en makkelijk te gebruiken is. Het past zichzelf aan de grootte van het scherm aan, zodat je altijd een fijne ervaring hebt, ongeacht op welk apparaat je het bekijkt. Bootstrap helpt ontwikkelaars hierbij.","category":"page"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"Ga met je browser naar Node-RED: IP_adres_raspberry_pi:1880.\nVervang de code in het knooppunt template met:\n<!DOCTYPE html>\n<html>\n  <head>\n    <title>Bootstrap Example</title>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css\">\n    <script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js\"></script>\n    <script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js\"></script>\n  </head>\n  <body>\n   \n    <div class=\"container\">\n      <button onclick=\"location.reload();\">Volgende plaatje</button>\n      <h1 stype=\"text-align:center;\">Mijn Eerste Honden Pagina</h1>\n      <img src=\"{{payload.message}}\" width=\"100%\" />           \n    </div>\n  \n  </body>\n</html>\nDit is een stuk code in het HTML formaat. Het bevat instructies voor een website om weer te geven op internet.\nDe eerste regel <!DOCTYPE html> zegt de browser welk soort code de website bevat.\nDe volgende regel <html> markeert het begin van de HTML-code.\nDaarna hebben we de <head> en <body> secties. In de <head> sectie staat informatie over de website, zoals de titel van de website en de bronnen voor stijlen en scripts.\nIn de <body> sectie staat de inhoud van de website die we willen weergeven aan de gebruiker. Bijvoorbeeld een knop om naar een volgend plaatje te gaan, een koptekst \"Mijn Honden Pagina\" en een plaatje van een hond.\nDe code maakt gebruik van Bootstrap, een toolkit voor het maken van mooie en responsieve websites.\nTest de website op je computer door het venster van de browser smaller te maken: IP_adres_raspberry_pi:1880/toon.\n(Image: Mijn Eerste Honden Pagina)","category":"page"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"info: Info\nEen vast IP-adres op wifi is zoals een huisadres voor je apparaat. Het is uniek en zorgt ervoor dat je apparaat altijd hetzelfde adres heeft wanneer het aan het wifi-netwerk is verbonden. Dit maakt het makkelijker voor andere apparaten om contact met jouw apparaat te maken.Om een vast IP-adres te krijgen, moet je naar de instellingen van je wifi-router gaan. Daar moet je de instellingen van je apparaat veranderen zodat het altijd hetzelfde IP-adres krijgt wanneer het aan het wifi-netwerk is verbonden. Als je niet weet hoe dat moet, vraag het dan aan iemand die daar verstand van heeft.","category":"page"},{"location":"chapter6/#Samenvatting","page":"6 Website bouwen met Node-RED","title":"Samenvatting","text":"","category":"section"},{"location":"chapter6/","page":"6 Website bouwen met Node-RED","title":"6 Website bouwen met Node-RED","text":"Dit hoofdstuk gaat over het bouwen van een website met Node-RED. Node-RED is een programma waarmee je websites kunt maken en leren hoe HTML-code werkt. De website werkt alleen op het wifi-netwerk waarmee je verbonden bent. Je hebt een Raspberry Pi 3B+ nodig met het besturingssysteem Ubuntu Server 22.04, Docker, Portainer en Node-RED geïnstalleerd. Om een eenvoudige website te maken met Node-RED heb je 3 knooppunten nodig, namelijk \"http in\", \"template\" en \"http response\". Met deze knooppunten maak je een flow die als een soort programma werkt. Je leert ook hoe je kunt werken met API's, waarmee computers met elkaar kunnen communiceren en informatie kunnen uitwisselen. JSON is een manier om informatie op te slaan en uit te wisselen tussen computers en mensen. Er wordt stapsgewijs uitgelegd hoe je een eenvoudige website maakt en hoe je verbinding maakt met de Dogs API om informatie over honden op te halen en deze informatie op de website te tonen.","category":"page"},{"location":"chapter8/#Temperatuur-meten","page":"8 Temperatuur meten","title":"Temperatuur meten","text":"","category":"section"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"We gaan de temperatuur meten met een ESP8266 en een DHT22. De ESP8266 is een klein computerboardje waarmee we gegevens kunnen versturen en ontvangen via wifi. De DHT22 is een sensor die we kunnen gebruiken om de temperatuur en luchtvochtigheid te meten.","category":"page"},{"location":"chapter8/#Inhoud","page":"8 Temperatuur meten","title":"Inhoud","text":"","category":"section"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"Pages = [\"chapter8.md\"]","category":"page"},{"location":"chapter8/#Wat-je-nodig-hebt","page":"8 Temperatuur meten","title":"Wat je nodig hebt","text":"","category":"section"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"ESP8266.\nDHT22.\nUSB A naar Micro USB kabel.\nVoeding voor de ESP8266.\nThonny.","category":"page"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"Thonny is een softwareprogramma speciaal gemaakt voor kinderen en beginners om te programmeren. Het is eenvoudig te gebruiken en biedt hulpmiddelen die het makkelijker maken om te leren programmeren. Het is bedoeld om jou te helpen leren hoe je computers kunt laten doen wat jij wilt door het schrijven van code.","category":"page"},{"location":"chapter8/#Wat-je-gaat-doen","page":"8 Temperatuur meten","title":"Wat je gaat doen","text":"","category":"section"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"Stap 1: Download en installeer Thonny.","category":"page"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"Stap 2: Zet Thonny klaar voor het gebruik met de ESP8266.","category":"page"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"Stap 3: Voeg programma's toe aan Thonny.","category":"page"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"Stap 4: Stuur de programma's naar de ESP8266.","category":"page"},{"location":"chapter8/#Stap-1-Download-en-installeer-Thonny","page":"8 Temperatuur meten","title":"Stap 1 - Download en installeer Thonny","text":"","category":"section"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"Om Thonny te installeren, moet je de volgende stappen volgen:","category":"page"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"Stap Actie\n1 De Thonny-website is te vinden op https://thonny.org. Klik op de link om er naar toe te gaan.\n2 Klik op de juiste Download link om het installatiebestand te downloaden. (Image: fig_8_11)\n3 Ga naar de map waarin het installatiebestand is gedownload en dubbelklik op het bestand.\n4 Volg de stappen in de installatie-wizard om Thonny te installeren op je computer.\n5 Nadat de installatie is voltooid, kun je Thonny openen door op het icoon te klikken dat is gemaakt op je bureaublad of door het te vinden via het startmenu.\n6 En daar heb je het! Nu kun je Thonny gebruiken om te programmeren en te leren hoe computers werken. Veel plezier!\n ","category":"page"},{"location":"chapter8/#Stap-2-Zet-Thonny-klaar-voor-het-gebruik-met-ESP8266.","page":"8 Temperatuur meten","title":"Stap 2 - Zet Thonny klaar voor het gebruik met ESP8266.","text":"","category":"section"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"Stap Actie\n1 Ga naar de website van MicroPython downloads door op de link te klikken.\n2 Zoek naar het plaatje met de tekst ESP8266 with 2MiB+ flash Espressif. (Image: fig_8_1)\n3 Klik op de link in het plaatje.\n4 Zoek in de lijst naar het nieuwste item. Download die dan. Het voordeel van de laatste versie is dat de software voor de DHT22 ook toegevoegd is. Bij mij was dat op 6 febr. 2023: (Image: fig_8_12)\n5 Start Thonny op.\n6 Druk op \"Tools > Options...\" en ga naar de tab \"Interpreter\".\n7 Kies als interpreter/device \"MicroPython (ESP8266)\". (Image: fig_8_3).\n8 Klik op de link \"Install or update\".\n9 Kies in het veld genaamd \"Firmware\" het bestand dat je in stap 4 hebt gedownload, bijvoorbeeld esp8266-20220618-v1.19.1.bin. (Image: fig_8_4).\n10 Druk op de knop Install.","category":"page"},{"location":"chapter8/#Stap-3-Voeg-programma's-toe-aan-Thonny","page":"8 Temperatuur meten","title":"Stap 3 - Voeg programma's toe aan Thonny","text":"","category":"section"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"Meer documentatie ESP8266.","category":"page"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"We hebben twee bestanden met Python software nodig: boot.py en main.py. We zetten beide bestanden in een folder \"dht22\" op de laptop.","category":"page"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"Stap Actie\n1 Selecteer de code in boot.py en kopieer het naar het klembord met \"Ctrl-C\".\n2 Maak een nieuwe map door met je rechtermuisknop te klikken in het meest linkse venster \"Files\" en \"New directory...\" te kiezen. Als je dat venster niet kunt zien, klik dan eerst op \"View > Files\" in het menu.\n3 Typ \"dht22\" en druk op OK. (Image: fig_8_5)\n4 Maak een leeg bestand met \"Ctrl + N\".\n5 Plak de code die je hebt gekopieerd in stap 1 in het lege venster door op \"Ctrl + V\" te drukken.\n6 Vul op regel 6 de naam van jouw wifi-netwerk en het bijbehorende wachtwoord in.\n7 Sla het bestand op door \"Ctrl + S\" te drukken, kies de map \"dht22\" en geef het bestand de naam \"boot.py\". (Image: fig_8_6)\n8 Herhaal stap 1 en 4 voor main.py.\n9 In regel 12 van de code moet je het woord IP_adres_Raspberry_Pi veranderen in het echte IP-adres van jouw Raspberry Pi, bijvoorbeeld: 192.168.2.49. Het is belangrijk om te weten dat de aanduidingen om de DHT22 te verbinden kunnen verschillen bij elke DHT22.\n10 Sla het bestand op door op \"Ctrl + S\" te drukken, kies de map \"dht22\" en geef het bestand de naam \"main.py\".\n11 Sluit Thonny.\n ","category":"page"},{"location":"chapter8/#boot.py","page":"8 Temperatuur meten","title":"boot.py","text":"","category":"section"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"# boot.py - connect to wifi\ndef connect():\n    import network\n    station = network.WLAN(network.STA_IF)\n    if not station.isconnected():\n        station.active(True)\n        station.connect('Naam_wifi_netwerk', 'Wachtwoord_wifi_netwerk)\n        while not station.isconnected():\n            pass # wait till connection\n    print('network config:', station.ifconfig())\n    \nconnect()","category":"page"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"Dit is een stuk code geschreven in de programmeertaal Python. Het doel van de code is om je microcontroller (bijvoorbeeld een ESP8266 of ESP32) te verbinden met een wifi-netwerk.","category":"page"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"De code bevat één functie, die 'connect' heet. Als we deze functie aanroepen, zal de microcontroller verbinding maken met het wifi-netwerk met de naam 'Naam_wifi_netwerk' en het wachtwoord 'Wachtwoord_wifi_netwerk'.","category":"page"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"Als de verbinding is gemaakt, zal het IP-adres dat is toegewezen aan de microcontroller worden weergegeven.","category":"page"},{"location":"chapter8/#main.py","page":"8 Temperatuur meten","title":"main.py","text":"","category":"section"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"# main.py - read sensor DHT22\n\nfrom umqtt.simple import MQTTClient\nimport ubinascii\nimport dht\nimport machine\nfrom machine import Pin\nimport time\n\n# mqtt client setup\nclient_id = ubinascii.hexlify(machine.unique_id())\nmqtt_server = 'IP_adres_Raspberry_Pi'\n\nlast_message = 0\nmessage_interval = 5\n\ntopic_pub_temp = b'temperature2'\ntopic_pub_hum = b'humidity2'\n\nsensor = dht.DHT22(Pin(14))\n\ndef connect_mqtt():\n  global client_id, mqtt_server\n  mqttc = MQTTClient(client_id, mqtt_server, keepalive=60)\n  mqttc.connect()\n  return mqttc\n\ndef restart_and_reconnect():\n  print('Failed to connect to MQTT broker. Reconnecting...')\n  time.sleep(10)\n  machine.reset()\n\ndef read_sensor():\n  try:\n    sensor.measure()\n    # uncomment for Fahrenheit\n    #temp = temp * (9/5) + 32.0\n    temp = sensor.temperature()\n    hum = sensor.humidity()\n    if (isinstance(temp, float) and isinstance(hum, float)) or (isinstance(temp, int) and isinstance(hum, int)):\n      temp = (b'{0:3.1f},'.format(temp))\n      hum =  (b'{0:3.1f},'.format(hum))\n      return temp, hum\n    else:\n      return('Invalid sensor readings.')\n  except OSError as e:\n    return('Failed to read sensor.')\n\ntry:\n  client = connect_mqtt()\nexcept OSError as e:\n  restart_and_reconnect()\n\nwhile True:\n  try:\n    if (time.time() - last_message) > message_interval:\n      temp, hum = read_sensor()\n      print(temp)\n      print(hum)\n      client.publish(topic_pub_temp, temp[:-1])\n      client.publish(topic_pub_hum, hum[:-1])\n      last_message = time.time()\n  except OSError as e:\n    restart_and_reconnect()","category":"page"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"Het doel van de code is om gegevens te lezen van een sensormodule die DHT22 heet en deze vervolgens publiceert via MQTT.","category":"page"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"De code maakt gebruik van een microcontroller (bijvoorbeeld een ESP8266 of ESP32), en leest elke 5 seconden de temperatuur en luchtvochtigheid van de sensor DHT22. Deze gegevens worden vervolgens naar een MQTT-broker verzonden, waar ze kunnen worden opgehaald door andere apparaten die zijn verbonden met hetzelfde netwerk.","category":"page"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"De MQTT-broker heeft een IP-adres 'IPadresRaspberry_Pi' en de gegevens worden gepubliceerd op twee verschillende topics: 'temperature2' voor de temperatuur en 'humidity2' voor de luchtvochtigheid.","category":"page"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"Als er tijdens het verzenden van gegevens een fout optreedt, zal de code proberen om opnieuw verbinding te maken met de MQTT-broker. Als dit na 10 seconden nog steeds niet lukt, wordt de microcontroller opnieuw gestart.","category":"page"},{"location":"chapter8/#Stap-4-Stuur-de-programma's-naar-de-ESP8266","page":"8 Temperatuur meten","title":"Stap 4 - Stuur de programma's naar de ESP8266","text":"","category":"section"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"<img src=\"https://i0.wp.com/randomnerdtutorials.com/wp-content/uploads/2019/05/ESP8266-NodeMCU-kit-12-E-pinout-gpio-pin.png?w=817&quality=100&strip=all&ssl=1\" alt=\"Raspberry Pi logo\" width=\"400\">","category":"page"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"De ESP8266 12-E NodeMCU kit pinout diagram volgens Random Nerd Tutorials","category":"page"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"Stap Actie\n1 Verbind de DHT22 met de ESP8266 (DA1 met GPIO14 => sensor = dht.DHT22(Pin(14)) en sluit de ESP8266 aan op de laptop met de \"USB A naar Micro USB\" kabel. (Image: DHT22-ESP8266)\n2 Open het programma Thonny op de laptop. Als het programma al loopt, klik dan eventueel op het \"Stop\" symbool in het menu of druk op \"Ctrl + F2\".\n3 Ga naar de map \"dht22\" en kies boot.py.\n4 Kies \"File > Save as...\" in het menu om het bestand op te slaan. Er verschijnt dan een pop-up met: Where to save to?.(Image: Where to save to?)\n5 Klik op de knop die \"MicroPython device\" heet.\n6 Plaats het bestand \"main.py\" op dezelfde manier op de ESP8266.\n7 Klik op de groene knop met de pijl rechts of druk op \"F5\" om de code te laten werken. Je ziet op het scherm de temperatuur in graden Celsius en de hoeveelheid vocht in de lucht in procenten verschijnen, één voor één. (Image: fig_8_8)\n ","category":"page"},{"location":"chapter8/#Samenvatting","page":"8 Temperatuur meten","title":"Samenvatting","text":"","category":"section"},{"location":"chapter8/","page":"8 Temperatuur meten","title":"8 Temperatuur meten","text":"Dit hoofdstuk gaat over het meten van temperatuur en luchtvochtigheid met behulp van een computerbordje genaamd ESP8266 en een sensor genaamd DHT22. Thonny is een eenvoudig te gebruiken softwareprogramma dat kinderen en beginners helpt om te leren programmeren. Om te beginnen moet je Thonny downloaden en installeren. Vervolgens moet je Thonny klaarzetten voor gebruik met de ESP8266. Dit omvat het downloaden van de nieuwste firmware en het instellen van de interpreter in Thonny. Vervolgens moet je twee bestanden met Python-software boot.py en main.py downloaden en deze in een map genaamd dht22 op je computer opslaan. In boot.py vul je de naam van jouw wifi-netwerk en het bijbehorende wachtwoord in. Nadat alle stappen zijn voltooid, kun je programma's naar de ESP8266 sturen en de temperatuur en luchtvochtigheid meten.","category":"page"},{"location":"chapter15/#Gegevens-in-de-Influx-database-grafisch-weergeven-met-Grafana","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Gegevens in de Influx database grafisch weergeven met Grafana","text":"","category":"section"},{"location":"chapter15/","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Gegevens in de Influx database grafisch weergeven met Grafana","text":"Je leert hoe je gegevens uit de Influx database kunt gebruiken om grafieken te maken. Dit kan handig zijn om bijvoorbeeld trends te zien in de temperatuur of vochtigheid. We gebruiken het programma Grafana om de gegevens uit de Influx database te halen en om de grafieken te maken. Zo kunnen we gemakkelijk zien hoe de gegevens zich in de tijd hebben ontwikkeld.","category":"page"},{"location":"chapter15/","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Gegevens in de Influx database grafisch weergeven met Grafana","text":"(Image: fig_15_1) Nieuws van 1 mrt. 2023","category":"page"},{"location":"chapter15/#Inhoud","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Inhoud","text":"","category":"section"},{"location":"chapter15/","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Gegevens in de Influx database grafisch weergeven met Grafana","text":"Pages = [\"chapter15.md\"]","category":"page"},{"location":"chapter15/#Wat-je-nodig-hebt","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Wat je nodig hebt","text":"","category":"section"},{"location":"chapter15/","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Gegevens in de Influx database grafisch weergeven met Grafana","text":"Een Raspberry Pi 3B+ met het besturingssysteem Ubuntu Server 22.04.\nDocker, Portainer, Node-RED, InfluxDB en Grafana zijn geinstalleerd.\nNode-RED programma uit de les 9 Node-RED dashboard programma maken.\nDe Raspberry Pi heeft verbinding met het Internet.","category":"page"},{"location":"chapter15/#Wat-je-gaat-doen","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Wat je gaat doen","text":"","category":"section"},{"location":"chapter15/","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Gegevens in de Influx database grafisch weergeven met Grafana","text":"Stap 1: Temperatuur als uitslagmeter weergeven.","category":"page"},{"location":"chapter15/","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Gegevens in de Influx database grafisch weergeven met Grafana","text":"Stap 2: Temperatuur in een lijngrafiek laten zien.","category":"page"},{"location":"chapter15/","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Gegevens in de Influx database grafisch weergeven met Grafana","text":"Stap 3: RSS nieuwsberichten  weergeven.","category":"page"},{"location":"chapter15/#Stap-1-Temperatuur-als-uitslagmeter-weergeven","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Stap 1 - Temperatuur als uitslagmeter weergeven","text":"","category":"section"},{"location":"chapter15/","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Gegevens in de Influx database grafisch weergeven met Grafana","text":"Stap Actie\n1 Typ in de webbrowser adresbalk: IP_adres_Raspberry_Pi:3000. Hierdoor open je de webinterface van Grafana.\n2 Open het menu door op > te klikken. (Image: fig_15_2).\n3 Klik op Dashboards > + New dashboard. (Image: fig_15_3).\n4 Klik op Add a new panel. (Image: fig_15_4).\n5 Klik op ⌄. (Image: fig_15_5)\n6 Kies voor Gauge. Een Gauge geeft de laatste meetwaarde weer. (Image: fig_15_6)\n7 Druk op het podloodje en type: select * from test. (Image: fig_15_7)\n8 In het rechter paneel type de titel van de grafiek: Temperatuur buiten. (Image: fig_15_8)\n9 Druk op de kop \"Save\" 2x. (Image: fig_15_5)\n10 Keer terug naar het Dashboard overzicht met \"<- Dashboard\" en verklein de grafiek vanuit de hoek rechtsonder. (Image: fig_15_9) Door op het sterretje te klikken komt het dashboard in de sterrenlijst\n ","category":"page"},{"location":"chapter15/","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Gegevens in de Influx database grafisch weergeven met Grafana","text":"Je kunt achteraf de instellingen van de grafiek wijzigen door op titel Temperatuur buiten te klikken en kiezen voor \"Edit\". Met het tandwieldje (Dashboard setting) geeft je het dashboard een andere naam: (Image: fig_15_10)","category":"page"},{"location":"chapter15/#Stap-2-Temperatuur-in-een-lijngrafiek-laten-zien","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Stap 2 - Temperatuur in een lijngrafiek laten zien","text":"","category":"section"},{"location":"chapter15/","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Gegevens in de Influx database grafisch weergeven met Grafana","text":"Stap Actie\n1 Klik op de grafiektitel en kies voor \"More... > Duplicate (Image: fig_15_11)\n2 Kies als grafiektype \"Time series\". (Image: fig_15_12)\n ","category":"page"},{"location":"chapter15/#Stap-3-RSS-nieuwsberichten-weergeven","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Stap 3 - RSS nieuwsberichten weergeven","text":"","category":"section"},{"location":"chapter15/","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Gegevens in de Influx database grafisch weergeven met Grafana","text":"RSS staat voor Really Simple Syndication of soms ook wel \"Rich Site Summary\", zie bijvoorbeeld (Syndicatie Nederlandse RSS-feeds). Het is een manier om updates en nieuws van websites bij te houden zonder dat je elke keer naar die websites hoeft te gaan om te zien of er iets nieuws is.","category":"page"},{"location":"chapter15/","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Gegevens in de Influx database grafisch weergeven met Grafana","text":"Stel je bijvoorbeeld voor dat je graag het nieuws leest op verschillende websites, maar het is vervelend om elke keer naar elke website te gaan om te zien of er iets nieuws is. Met RSS kun je je abonneren op de RSS-feed van die websites en elke keer dat er iets nieuws wordt toegevoegd, krijg je automatisch een melding of een update.","category":"page"},{"location":"chapter15/","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Gegevens in de Influx database grafisch weergeven met Grafana","text":"Je kunt RSS-feeds bekijken in een speciale RSS-lezer of in een internetbrowser met een ingebouwde RSS-functie. Door RSS te gebruiken, kun je dus snel en gemakkelijk op de hoogte blijven van nieuwe inhoud op de websites die je volgt, zonder dat je steeds handmatig de websites hoeft te bezoeken.","category":"page"},{"location":"chapter15/","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Gegevens in de Influx database grafisch weergeven met Grafana","text":"Stap Actie\n1 Klik op de titel van de laatste grafiek en mssk een duplikaat.\n2 Sleep de nieuwe grafiek onder  de eerste twee grafieken.\n3 Verander het grafiektype in: News (RSS feed reader). (Image: fig_15_13)\n4 Ga naar (Syndicatie Nederlandse RSS-feeds) en kies een feed. Stel dat je kies voor \"Nieuwsportaal\" dan is de link \"https://www.telegraaf.nl/rss\". Kopieer de link.\n5 Plak de link in het vak \"URL\" van \"Neuws\" en pas de afmetingen van de \"grafiek\" aan. Bewaar de feed\". (Image: fig_15_14)\n ","category":"page"},{"location":"chapter15/#Samenvatting","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Samenvatting","text":"","category":"section"},{"location":"chapter15/","page":"Gegevens in de Influx database grafisch weergeven met Grafana","title":"Gegevens in de Influx database grafisch weergeven met Grafana","text":"In deze les leer je hoe je gegevens uit een database kunt gebruiken om grafieken te maken met Grafana. Dit kan handig zijn om trends te zien in bijvoorbeeld temperatuur en vochtigheid. Hiervoor heb je een Raspberry Pi 3B+ nodig met bepaalde programma's geïnstalleerd. Vervolgens kun je stap voor stap leren hoe je een grafiek maakt voor de temperatuur, hoe je deze grafiek aanpast en hoe je RSS nieuwsberichten kunt weergeven in een grafiek. RSS is een manier om updates en nieuws van websites bij te houden zonder steeds handmatig de websites te bezoeken.","category":"page"},{"location":"chapter3/#Docker-installeren","page":"3 Docker installeren","title":"Docker installeren","text":"","category":"section"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"Docker is een programma waarmee we verschillende computerprogramma's op een gemakkelijke manier kunnen draaien. Het is een soort 'doos' waarin we de programma's kunnen zetten, zodat we ze gemakkelijk kunnen starten en gebruiken.","category":"page"},{"location":"chapter3/#Inhoud","page":"3 Docker installeren","title":"Inhoud","text":"","category":"section"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"Pages = [\"chapter3.md\"]","category":"page"},{"location":"chapter3/#Wat-je-nodig-hebt","page":"3 Docker installeren","title":"Wat je nodig hebt","text":"","category":"section"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"Een Raspberry Pi 3B+ met het programma Ubuntu 22.04. \nSSH verbinding met de Raspberry Pi.","category":"page"},{"location":"chapter3/#Wat-je-gaat-doen","page":"3 Docker installeren","title":"Wat je gaat doen","text":"","category":"section"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"Stap 1: curl installeren.","category":"page"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"Stap 2: docker installeren.","category":"page"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"Stap 3: Benader de Raspberry Pi vanuit je laptop. ","category":"page"},{"location":"chapter3/#Stap-1-curl-installeren","page":"3 Docker installeren","title":"Stap 1 - curl installeren","text":"","category":"section"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"Oké, dus soms hebben we een programma nodig om dingen van het internet af te halen. Het heet 'curl'. Als je wilt weten of het al op je computer staat, kun je dat controleren door curl -h te typen. Als het niet op je computer staat, dan kun je het installeren door dit te typen (commentaarregels die beginnen met een # hoef je niet te typen): ","category":"page"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"# Maak verbinding met je Raspberry Pi en stel dat het IP-adres 192.168.2.49 is. Zie stap 3 uit de vorige les!\nssh ubuntu@192.168.2.49\n\n# Maak softwarelijst up-to-date en update Ubuntu server software\nsudo apt update && sudo apt full-upgrade\n\n# Installeer curl\nsudo apt install curl","category":"page"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"info: Info\n\"sudo apt update && sudo apt full-upgrade\" is eigenlijk een combinatie van twee commando's die je kunt gebruiken op een computer die Linux gebruikt, zoals de Raspberry Pi.Het eerste commando, \"sudo apt update\", zorgt ervoor dat de computer kan controleren of er nieuwe programma's beschikbaar zijn om te downloaden en te gebruiken. Het is alsof je jouw speelgoeddoos up-to-date houdt met nieuwe speeltjes.Het tweede commando, \"sudo apt full-upgrade\", is als het upgraden van je speelgoed. Het zorgt ervoor dat alle programma's die je hebt gedownload worden bijgewerkt naar de nieuwste versies.Dus, door het uitvoeren van deze twee commando's samen, kun je ervoor zorgen dat je altijd toegang hebt tot de nieuwste en beste programma's die beschikbaar zijn, en dat deze programma's ook worden bijgewerkt naar de nieuwste versies. Het is als het hebben van een bijgewerkte speelgoeddoos met de nieuwste en beste speeltjes die je kunt gebruiken om te spelen en te leren!","category":"page"},{"location":"chapter3/#Stap-2-docker-installeren","page":"3 Docker installeren","title":"Stap 2 - docker installeren","text":"","category":"section"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"We willen een programma op onze computer gebruiken dat 'Docker' heet. Op onze Raspberry Pi 3B+ draait 'Ubuntu Server 22.04'. We doen dat door de volgende stappen te volgen:","category":"page"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"Stap Actie\n1 Maak verbinding met je Raspberry Pi-computer door dit commando te typen: ssh ubuntu@IP_adres_Raspberry_pi. Je moet het internetadres van je Raspberry Pi weten, dus kijk in stap 3 van het vorige hoofdstuk om te zien hoe je dat kunt vinden.\n2 Zorg dat de softwarelijst up-to-date is door dit commando te typen: sudo apt update.\n3 Verwijder oudere versies van Docker door dit commando te typen: sudo apt remove docker docker-engine docker.io.\n4 Installeer Docker door dit commando te typen: curl -sSL https://get.docker.com | sh.\n5 Zorg dat je computer weet dat jij mag werken met Docker door dit commando te typen: sudo usermod -aG docker $USER.\n6 Controleer de versie van Docker Engine door dit commando te typen: sudo docker version. Het moet versie 20.10.22 of hoger zijn.\n7 Herstart je Raspberry Pi door dit commando te typen: sudo reboot.\n ","category":"page"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"Nu is Docker geïnstalleerd en gestart op je Raspberry Pi 3B+ met Ubuntu Server 22.04. Je kan met het installeren van Docker-images en -containers beginnen door de docker commando's te gebruiken.","category":"page"},{"location":"chapter3/#Stap-3-Benader-de-Raspberry-Pi-vanuit-je-laptop","page":"3 Docker installeren","title":"Stap 3 - Benader de Raspberry Pi vanuit je laptop","text":"","category":"section"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"Een manier is om te werken met de Raspberry Pi is met SSH. Met het programma Portainer kunt je ook via een webbrowser met Docker kunt werken. We leren meer over Portainer in het volgende hoofdstuk.","category":"page"},{"location":"chapter3/#Windows","page":"3 Docker installeren","title":"Windows","text":"","category":"section"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"Windows Subsystem for Linux (WSL) is een tool waarmee je Linux-programma's op je Windows-computer kunt gebruiken. Je hebt Windows 10 of hoger nodig om met WSL te gebruiken. Met de WSL kun je heel gemakkelijk het Linux commando ssh gebruiken. ","category":"page"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"# Open een WSL venster en tik het ssh commando in. Er wordt\n# de eerste keer gevraagd of je verder wilt gaan, tik \"yes\" in. \n# Daarna wordt er gevraagd om het wachtwoord van de Raspberry Pi.\nssh ubuntu@IP_adres_Raspberry_Pi","category":"page"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"info: Info\nIn Windows 10 kun je een WSL (Windows Subsystem for Linux) venster openen door de volgende stappen te volgen:Klik op de startknop in de taakbalk of druk op de Windows toets op je toetsenbord.\nZoek naar \"Windows PowerShell\" en klik erop om het te openen.\nTyp in het PowerShell venster het volgende commando en druk op Enter:wslDit zal een WSL-venster openen waarmee je toegang hebt tot de Linux commandoregel.","category":"page"},{"location":"chapter3/#Mac","page":"3 Docker installeren","title":"Mac","text":"","category":"section"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"Mac OS is een soort software die je computer laat werken, net zoals Linux. Er zijn veel dingen die hetzelfde zijn tussen Mac OS en Linux. Dit betekent dat je veel van dezelfde opdrachten kunt geven op een Mac als op Linux. Maar er zijn ook dingen die anders zijn tussen Mac OS en Linux, dus sommige opdrachten die je op een Linux computer kunt geven, werken niet op een Mac.","category":"page"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"# Open een terminal sessie met Ctrl + Alt + T.\n# de eerste keer gevraagd of je verder wilt gaan, tik \"yes\" in. \n# Daarna wordt er gevraagd om het wachtwoord van de Raspberry Pi.\nssh ubuntu@IP_adres_Raspberry_Pi\n\n# Test de connectie\ndocker version","category":"page"},{"location":"chapter3/#Ubuntu-(Linux)","page":"3 Docker installeren","title":"Ubuntu (Linux)","text":"","category":"section"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"# Open een terminal sessie met Ctrl + Alt + T.\n# de eerste keer gevraagd of je verder wilt gaan, tik \"yes\" in. \n# Daarna wordt er gevraagd om het wachtwoord van de Raspberry Pi.\nssh ubuntu@IP_adres_Raspberry_Pi\n\n# Test de connectie\ndocker version","category":"page"},{"location":"chapter3/#Samenvattig","page":"3 Docker installeren","title":"Samenvattig","text":"","category":"section"},{"location":"chapter3/","page":"3 Docker installeren","title":"3 Docker installeren","text":"Dit hoofdstuk gaat over het installeren van Docker op een Raspberry Pi-computer met Ubuntu 22.04. Docker is een programma dat het mogelijk maakt om verschillende computerprogramma's op een gemakkelijke manier te draaien. Dit wordt gedaan door de programma's in een soort \"doos\" te plaatsen, zodat ze gemakkelijk kunnen worden gestart en gebruikt. Om Docker te installeren, heb je een Raspberry Pi 3B+ met Ubuntu 22.04 en een SSH-verbinding met de Raspberry Pi nodig. In stap 1 wordt uitgelegd hoe je curl installeert, een programma om bestanden van het internet te downloaden. In stap 2 wordt uitgelegd hoe je Docker installeert door verschillende commando's in de terminal in te typen, zoals het updaten van de softwarelijst, het verwijderen van oudere versies van Docker en het installeren van de nieuwste versie. Ook wordt uitgelegd hoe je de versie van Docker kunt controleren en hoe je de Raspberry Pi kunt herstarten. In stap 3 wordt uitgelegd hoe je de Raspberry Pi vanuit je laptop kunt benaderen via SSH of met het programma Portainer. Voor Windows-gebruikers wordt uitgelegd hoe je Windows Subsystem for Linux kunt gebruiken en hoe je een WSL-venster opent. Voor Mac-gebruikers wordt uitgelegd hoe je een terminalsessie opent en hoe je verbinding maakt met de Raspberry Pi via SSH. Voor Ubuntu-gebruikers wordt uitgelegd hoe je een terminalsessie opent en hoe je verbinding maakt met de Raspberry Pi via SSH.","category":"page"},{"location":"chapter10/#Domoticz-installeren","page":"10 Domoticz installeren","title":"Domoticz installeren","text":"","category":"section"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Domoticz is een programma dat je kunt gebruiken om het \"slimme\" huis te beheren. Als je een slimme meter hebt, is het handig om Domoticz te gebruiken om het energieverbruik in huis te bekijken en om op afstand het energieverbruik te controleren.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"(Image: fig_10_1)","category":"page"},{"location":"chapter10/#Inhoud","page":"10 Domoticz installeren","title":"Inhoud","text":"","category":"section"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Pages = [\"chapter10.md\"]","category":"page"},{"location":"chapter10/#Wat-je-nodig-hebt","page":"10 Domoticz installeren","title":"Wat je nodig hebt","text":"","category":"section"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Een Raspberry Pi 3B+ met het besturingssysteem Ubuntu Server 22.04.\nDocker en Portainer zijn geïnstalleerd.\nDe Raspberry Pi heeft verbinding met het Internet.\nEen PC die een SSH verbinding heeft met de Raspberry Pi.","category":"page"},{"location":"chapter10/#Wat-je-gaat-doen","page":"10 Domoticz installeren","title":"Wat je gaat doen","text":"","category":"section"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Stap 1: Verbind je computer via SSH verbinden met de Raspberry Pi.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Stap 2: Container starten met \"docker compose\".","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Stap 3: Domoticz benaderen met een browser.","category":"page"},{"location":"chapter10/#Stap-1-Verbind-je-computer-via-SSH-verbinden-met-de-Raspberry-Pi","page":"10 Domoticz installeren","title":"Stap 1 - Verbind je computer via SSH verbinden met de Raspberry Pi","text":"","category":"section"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Verbind je computer met de Raspberry Pi en log in.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"ssh ubuntu@IP_adres_Raspberry_Pi","category":"page"},{"location":"chapter10/#docker-compose.yml","page":"10 Domoticz installeren","title":"docker-compose.yml","text":"","category":"section"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"info: Info\nIn het vakje hieronder staat een stukje code. Bovenaan rechts zie je een symbool dat lijkt op twee bladen papier. Als je daarop klikt, kopieer je alle code in het vakje naar het klembord. Dat is heel handig! Het betekent dat je de code ergens anders kunt plakken en het niet opnieuw hoeft te typen.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"version: '3.3'\n\nservices:\n  domoticz:\n    image: domoticz/domoticz\n    container_name: domoticz\n    restart: unless-stopped\n    # Pass devices to container\n    devices:\n      - \"/dev/ttyUSB0:/dev/ttyUSB0\"\n    ports:\n      - \"8081:8080\"\n    volumes:\n      - ./config:/opt/domoticz/userdata\n    environment:\n      - TZ=Europe/Amsterdam\n      #- LOG_PATH=/opt/domoticz/userdata/domoticz.log","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Stel je voor dat je een computerprogramma hebt dat je helpt bij het besturen van alle slimme apparaten in huis, zoals slimme lampen en thermostaten. Het programma dat we gaan gebruiken heet Domoticz, en we gaan het installeren met behulp van een bestand dat docker-compose.yml heet.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Docker-compose.yml is een bestand dat ons vertelt welke software we willen installeren en hoe we die software willen gebruiken. In dit geval willen we Domoticz installeren en we willen ervoor zorgen dat het altijd blijft draaien, tenzij we het expliciet stoppen.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"We willen dat Domoticz toegang heeft tot een specifiek apparaat, namelijk een apparaat dat is aangesloten op de USB-poort van onze computer. We vertellen dit aan Docker door de regel \"devices\" toe te voegen en de locatie van het apparaat op te geven.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"We willen ook dat Domoticz toegankelijk is via onze webbrowser, dus we vertellen Docker om de poort 8081 op onze computer door te sturen naar de poort 8080 waar Domoticz op draait.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"We slaan ook een aantal belangrijke instellingen op, zoals onze tijdzone en de locatie waar we gegevens willen opslaan.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Als we alles hebben ingesteld in het docker-compose.yml-bestand, kunnen we de opdracht geven om het programma te starten en Domoticz zal worden geïnstalleerd en geconfigureerd zoals we hebben aangegeven in het bestand.","category":"page"},{"location":"chapter10/#Stap-2-Container-starten-met-\"docker-compose\"","page":"10 Domoticz installeren","title":"Stap 2 - Container starten met \"docker compose\"","text":"","category":"section"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Maak een map \"projects\" op je computer en maak vervolgens een andere map binnen die map die \"domoticz\" heet.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"mkdir projects\ncd projects\nmkdir domoticz\ncd domoticz","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Maak een leeg bestand \"docker-compose.yml\" en open het met de nano editor.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"# Maak docker-compose.yml\nnano docker-compose.yml","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Ga naar de docker-compose.yml sectie hierboven. Kopieer de code naar het klembord en plak het in de editor met Ctrl + Shift + V. Bewaar het bestand vervolgens met Ctrl + O en verlaat de editor met Ctr + X.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Maak dan de Domoticz container met:","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"# Maak Domoticz container\ndocker compose up","category":"page"},{"location":"chapter10/#Stap-3-Domoticz-via-een-browser","page":"10 Domoticz installeren","title":"Stap 3 - Domoticz via een browser","text":"","category":"section"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Type in de adresbalk van je browser IP_adres_Raspberry_Pi:8081 en druk op de Enter-toets.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Je krijgt je Domoticz openingspagina te zien, maar nog niet het verbruik van het gas en de electriciteit. Daarvoor moet je de Raspberry Pi aansluiten op je slimme meter.","category":"page"},{"location":"chapter10/#Samenvatting","page":"10 Domoticz installeren","title":"Samenvatting","text":"","category":"section"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Domoticz is een programma dat je helpt om je \"slimme\" huis te beheren en bijvoorbeeld het energieverbruik te monitoren en controleren. Om Domoticz te gebruiken, heb je een Raspberry Pi 3B+ nodig met het besturingssysteem Ubuntu Server 22.04, Docker en Portainer geïnstalleerd en een computer die verbinding heeft met de Raspberry Pi via SSH.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Om Domoticz te installeren, maak je gebruik van een bestand genaamd docker-compose.yml. Dit bestand vertelt Docker welke software er geïnstalleerd moet worden en hoe het gebruikt moet worden. In dit geval willen we Domoticz installeren en ervoor zorgen dat het altijd blijft draaien, tenzij we het expliciet stoppen.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"We willen dat Domoticz toegang heeft tot een specifiek apparaat, bijvoorbeeld een slimme meter dat is aangesloten op de USB-poort van onze computer. Dit kan via de \"devices\" regel in het docker-compose.yml-bestand. Zo wordt het apparaat doorgegeven aan de container waarin Domoticz draait.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Verder willen we dat Domoticz toegankelijk is via onze webbrowser, zodat we het energieverbruik kunnen monitoren en controleren. Dit kan via de poorten die worden doorgestuurd van de Raspberry Pi naar de computer. We slaan ook belangrijke instellingen op, zoals onze tijdzone en de locatie waar we gegevens willen opslaan.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Nadat we alles hebben ingesteld in het docker-compose.yml-bestand, geven we de opdracht om het programma te starten en Domoticz zal worden geïnstalleerd en geconfigureerd zoals we hebben aangegeven in het bestand.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Om Domoticz te starten, maak je een folder aan onder de folder \"projects\" met de naam \"domoticz\" en maak je een leeg bestand aan met de naam \"docker-compose.yml\". Hierin kopieer je de code die eerder in het artikel is gegeven en sla je het bestand op.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Vervolgens start je de Domoticz container door de opdracht \"docker compose up\" uit te voeren. Je kunt vervolgens Domoticz openen in je webbrowser door het IP-adres van de Raspberry Pi te gebruiken, gevolgd door de poort 8081.","category":"page"},{"location":"chapter10/","page":"10 Domoticz installeren","title":"10 Domoticz installeren","text":"Met deze stappen kun je Domoticz gebruiken om het energieverbruik in je slimme huis te monitoren en te controleren.","category":"page"},{"location":"chapter9/#Node-RED-dashboard-programma-maken","page":"9 Node-RED dashboard programma maken","title":"Node-RED dashboard programma maken","text":"","category":"section"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Deze module geeft je een set knooppunten in Node-RED waarmee je snel een live data dashboard kunt maken.","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Je gaat een dashboard maken dat de volgende dingen laat zien:","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Hoe warm het is en hoe vochtig de lucht in huis is.\nHoe de temperatuur buiten verandert.\nHoe hard de wind waait en vanuit welke richting.","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"(Image: UI)","category":"page"},{"location":"chapter9/#Inhoud","page":"9 Node-RED dashboard programma maken","title":"Inhoud","text":"","category":"section"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Pages = [\"chapter9.md\"]","category":"page"},{"location":"chapter9/#Wat-je-nodig-hebt","page":"9 Node-RED dashboard programma maken","title":"Wat je nodig hebt","text":"","category":"section"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Een Raspberry Pi 3B+ met het besturingssysteem Ubuntu Server 22.04.\nDocker, Portainer, Node-RED en MQTT broker zijn geinstalleerd.\nEen ESP8266 met een DHT22 die gegevens stuurt naar de MQTT broker.\nEen wifi netwerk waar de hierboven genoemde delen op zijn aangesloten.","category":"page"},{"location":"chapter9/#Wat-je-gaat-doen","page":"9 Node-RED dashboard programma maken","title":"Wat je gaat doen","text":"","category":"section"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Stap 1: De Node-RED Dashboard module downloaden.","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Stap 2: Indeling van een dashboard.","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Stap 3: Het dashboard samenstellen.","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Stap 4: Weergegevens ophalen en op dashboard weergeven.","category":"page"},{"location":"chapter9/#Stap-1-De-Node-RED-Dashboard-module-downloaden","page":"9 Node-RED dashboard programma maken","title":"Stap 1 - De Node-RED Dashboard module downloaden","text":"","category":"section"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Node-RED heeft al veel verschillende knooppunten om te gebruiken, maar soms wil je nog meer. Dan kun je nieuwe onderdelen toevoegen. Een handige toevoeging is de dashboard module. Deze module bestaat uit verschillende onderdelen die speciaal zijn gemaakt om een dashboard te maken. Bijvoorbeeld, er is een onderdeel om een metertje te maken of om gegevens in een grafiek te laten zien. Ook is er een onderdeel om gegevens als tekst weer te geven. Je moet de module wel zelf toevoegen, want het zit niet automatisch al in Node-RED.","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Stap Actie\n1 Als je naar \"Manage Palette\" wilt gaan, kun je op het menu klikken dat in de rechterbovenhoek van het scherm staat. Of je kunt de toetsen Shift + Alt + P indrukken.\n2 Ga naar de \"Install\" tab en zoek naar \"node-red-dashboard\" in de zoekbalk.\n3 Als je de dashboard onderdelen wilt krijgen, moet je op de witte knop met \"Install\" erop klikken. (Image: fig_9_22)\n4 Je ziet een berichtje op je scherm. Druk op de rode knop waar \"Install\" op staat om de dashboard onderdelen te krijgen. (Image: fig_9_22)\n5 Klik op de toets \"Close\".\n6 Als je de dashboard onderdelen hebt geïnstalleerd, kun je ze vinden in het linkermenu onder het kopje \"dashboard\".\n ","category":"page"},{"location":"chapter9/#Stap-2-Indeling-van-een-dashoard","page":"9 Node-RED dashboard programma maken","title":"Stap 2 - Indeling van een dashoard","text":"","category":"section"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Een dashboard kan bestaan uit verschillende tabs. Een tab kan verschillende groepen of secties hebben. Het is goed om hierover vooraf al een beeld te vormen.","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Een gebruiker kan maar één tab actief hebben. ","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Ons dashboard bestaat uit de tabs en groepen:","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Binnen\nWoonkamer\nKamer van Rob\nBuiten\nLeusden","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Opzetten van de structuur.","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Stap Actie\n1 Druk op de laatste tab rechts en kies voor \"Dashboard\". (Image: fig_9_18)\n2 Klik in de groep \"Tab & Links\" op de tab \"+tab\". (Image: fig_9_19)\n3 Druk op de \"edit\" knop om de tab te openen. (Image: fig_9_20)\n4 Verander de naam van de tab in: \"Binnen\".\n5 Maak nog een tab aan en noem die \"Buiten\"\n6 Selecteer de tab \"Binnen\" en klik op \"+group\".\n7 Klik op de \"edit\" knop am de groep te openen.\n8 Noem de groep \"Huiskamer\".\n9 Druk opde toets \"Update\".\n10 Herhaal stap 6 en 7 en noem de groep \"Kamer van Rob\".\n11 Druk opde toets \"Update\".\n12 Klik op de tab \"Buiten\" en klik op \"+group\".\n13 Klik op de \"edit\" knop om de groep te openen.\n14 Noen de groep \"Leusden\".\n11 Druk opde toets \"Update\". (Image: fig_9_31) Eindresultaat dashboard\n ","category":"page"},{"location":"chapter9/#Stap-3-Het-dashboard-samenstellen","page":"9 Node-RED dashboard programma maken","title":"Stap 3 - Het dashboard samenstellen","text":"","category":"section"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Als je het adres IP_adres_raspberry_pi:1880/ui intypt in je web browser, kan je gegevens zien van de \"dashboard module\". We zullen verwijzen naar de MQTT broker met het onderwerp (topic) \"temperatuur2\". (Image: UI).","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Volg deze stappen om het werk te doen:","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Stap Actie\n1 Pak de een \"mqtt in\" en een \"gauge\" knooppunt en zet ze op je werkblad.\n2 Verbind de het \"mqtt in\" knooppunt met het \"gauge\" knooppunt.\n3 Dubbelklik op \"mqtt in\" en klik op het potloodje achter het veld \"Server\". Een nieuw venster wordt geopend. (Image: fig_9_22)\n4 Typ het IP adres van je Raspberry Pi in het vak \"Server\". Het poortnummer \"1883\" wordt automatisch toegevoegd. Klik op de knop \"Add\". (Image: fig_9_29)\n5 Typ temperature2 in het \"Topic\" vak van het \"mqtt in\" knooppunt. (Image: fig_9_22)\n6 Typ Temp huiskamer in het \"Name\" vak van het \"gauge\" knooppunt. (Image: fig_9_23)\n7 Klik op de toets \"Done\".\n8 Dubbelklik op het \"gauge\" knooppunt. Vul het in volgens onderstaand figuur. (Image: fig_9_32)\n9 Klik op de toets \"Done\".\n10 Pak opnieuw een \"mqtt in\" en een \"text\" knooppunt en zet ze op je werkblad.\n11 Verbind de \"mqtt in\" knooppunt met het \"text\" knooppunt.\n12 Het IP adres van je Raspberry Pi staat al goed in het \"Server\" vak van het \"mqtt in\" knooppunt.\n13 Typ humidity2 in het \"Topic\" vak van het \"mqtt in\".\n14 Typ Hum huiskamer in het \"Name\" vak van de \"mqtt in\".\n15 Klik op \"Done\".\n16 Dubbelklik op \"text\" en Vul het in volgens onderstaand figuur. (Image: fig_9_24).\n17 Kies het vierde voorbeeld bij \"Layout\".\n18 Klik op \"Done\".\n19 Klik op de \"Deploy\" knop om alles in te stellen.\n20 Typ IP_adres_raspberry_pi:1880/ui in de adresbalk van je browser en druk op Enter om de informatie te zien. (Image: fig_9_22)\n ","category":"page"},{"location":"chapter9/#Stap-4-Weergegevens-ophalen-en-op-dashboard-weergeven","page":"9 Node-RED dashboard programma maken","title":"Stap 4 - Weergegevens ophalen en op dashboard weergeven","text":"","category":"section"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"We gaan weergegevens over Leusden ophalen van een website die \"Visual Crossing\" heet. Hiervoor moeten we eerst een account maken op de website. Als we een account hebben, krijgen we een \"API key\". Dit is een soort code die we nodig hebben om de informatie op te halen. We hebben in onze les \"Website bouwen met Node-RED\" al geleerd hoe je met een API omgaat. We mogen de informatie gratis opvragen, maar we moeten er wel voor zorgen dat we niet te vaak op een dag informatie opvragen. Als we het opvragen van informatie onder de 1000 keer per dag houden, is het gratis. Ik vraag zelf de informatie elke 15 minuten op, dus ik vraag het in totaal 4 x 24 = 96 keer per dag op, dus veel minder dan het maximum.","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"info: Info\nZorg dat je je persoonlijke \"API key\" klaar hebt liggen voordat je de steppen gaat uitvoeren.","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Stap Actie\n1 Sleep de knooppunten \"inject\", \"http request\", \"debug\", 3x \"function\" en uit de groep dashboard \"chart\" en 3x \"text\". Confiugreer de knooppunten volgens onderstaand schema. (Image: schema)\n2 Dubbelkik op \"timestamp\" (Image: fig_9_5 timestamp)\n3 Klik op het keuzevakje inject once after.\n4 Kies bij de Repeat groep voor: interval.\n5 Type in het veld \"every\": 30.\n6 Kies als eenheid: minutes.\n7 Druk op de toets \"Done\".\n8 Dubbelklik op \"http request\". (Image: fig_9_6 visual crossing)\n9 Type in het veld \"URL\": https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/Leusden?unitGroup=metric&key=JOUW_API_KEY&contentType=json\n10 Kies in het keuze veld \"Return\" voor: a parsed JSON object.\n11 Druk op de toets \"Done\".\n12 Debug ontvangt van het knooppunt \"visualcrossing\" een JSON object zodra je op het meest linkse grijze vierkantje klikt van timestamp (en eerst op \"Deploy\" hebt gedrukt). Een subgroep is \"currentConditions\". Dit bevat de gegevens die we willen gebruiken op het dashboard. Je krijgt ze te zien als je in het venster geheel rechts kies voor de derde tab van links \"Debug messages\". (Image: fig_9_16)Klik op het driehoekjes om het volledige JSON object te bekijken.\n13 Dubbelklik op de eerste \"functie\" en geef het de naam: buitentemp. (Image: get_actual_temp) Wat je hier ziet is JavaScript code. Elke uitdukking eindigt met een \";\". Iets ingesloten door accolades {...} verwijst naar een JSON-object.\n14 Typ op de eerste regel: return { payload : msg.payload.currentConditions.temp };. \"temp\" is de buitentemperatuur. Een payload is een belangrijk onderdeel van computers en technologie. Het is een term die gebruikt wordt om iets te beschrijven dat wordt verstuurd via internet, een computer-netwerk of in ons geval in een Node-RED flow. Denk bijvoorbeeld aan het versturen van een e-mail naar iemand. De boodschap die je verstuurt, bijvoorbeeld je tekst en eventuele afbeeldingen, is de payload. Het wordt verzonden via het internet naar de ontvanger, zoals jij wilt dat het wordt ontvangen. Met \"msg.payload\" wordt verwezen naar het bericht dat Visual Crossing verzendt. Het vervolg \".currentConditions.temp\" verwijst naar de buitentemperatuur. (Image: fig_9_17)\n14 Druk op de toets \"Done\".\n15 Dubbelklik op de tweede \"functie\" en geef het de naam: \"windrichting\". (Image: windrichting)\n16 Kopieer de tekst uit \"Javascript code windrichting\" naar het code blok.\n17 Druk op de toets \"Done\".\n18 Dubbelklik op de derde \"functie\" en geef het de naam: \"windsnelheid\".  (Image: fig_9_9)\n19 Kopieer de tekst uit Javascript code windsnelheid in Beaufort. Hiermee converteren we de windsnelheid (km/uur) naar Beaufort. De tabel vind je hier.\n20 Druk op de toets \"Done\".\n21 Dubbelklik op \"chart\" en verander: - Group: [Buiten] Leusden - Label: Buitentemperatuur (Image: fig_9_33)\n22 Druk op de toets \"Done\".\n23 Voor de \"text\" knooppunten, verander de \"Group\" in \"[Buiten] Leusden\" en het \"Label\" in wat het doet.\n24 Als je klaar bent, druk dan op de knop \"Deploy\"en laat het resultaat in je browser zien. De drie horizontale streepjes is het menu-symbool. (Image: fig_9_20)\n ","category":"page"},{"location":"chapter9/#Javascript-code-windrichting","page":"9 Node-RED dashboard programma maken","title":"Javascript code windrichting","text":"","category":"section"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"let test = msg.payload.currentConditions.winddir;\nlet windrichting = '';\n\nif (test >= 360 - 22.5) {\n    windrichting = 'N';\n} else if (test < 22.5) {\n    windrichting = 'N';\n} else if (test >= 325 - 22.5 && test <= 325 + 22.5) {\n    windrichting = 'NW';\n} else if (test >= 270 - 22.5 && test <= 270 + 22.5) {\n    windrichting = 'W'\n} else if (test >= 225 - 22.5 && test <= 225 + 22.5) {\n    windrichting = 'ZW';\n} else if (test >= 180 - 22.5 && test <= 180 + 22.5) {\n    windrichting = 'Z';\n} else if (test >= 135 - 22.5 && test <= 135 + 22.5) {\n    windrichting = 'ZO';\n} else if (test >= 90 - 22.5 && test <= 90 + 22.5) {\n    windrichting = 'O';\n} else if (test >= 45 - 22.5 && test <= 45 + 22.5) {\n    windrichting = 'NO';\n}\n\nreturn { payload: windrichting };","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Deze code doet net alsof het een windwijzer is. Het krijgt een nummer dat vertelt waar de wind vandaan komt en geeft dan een letter die past bij die richting.","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Bijvoorbeeld, als de wind uit het noorden komt, zal de code de letter \"N\" teruggeven.","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"De code bekijkt het nummer om te zien welke richting het dichtstbij ligt en kiest dan de letter voor die richting. Tot slot geeft het de letter terug, zodat we die ergens anders kunnen gebruiken.","category":"page"},{"location":"chapter9/#Javascript-code-windsnelheid-in-Beaufort","page":"9 Node-RED dashboard programma maken","title":"Javascript code windsnelheid in Beaufort","text":"","category":"section"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"let test = msg.payload.currentConditions.windspeed;\nlet windsnelheid = '';\n\nif (test <= 1) {\n    windsnelheid = '0';\n} else if (test > 1 && test <= 5) {\n    windsnelheid = '1';\n} else if (test > 5 && test <= 11) {\n    windsnelheid = '2'\n} else if (test > 11 && test <= 19) {\n    windsnelheid = '3';\n} else if (test > 19 && test <= 28) {\n    windsnelheid = '4';\n} else if (test > 28 && test <= 38) {\n    windsnelheid = '5';\n} else if (test > 38  && test <= 49) {\n    windsnelheid = '6';\n} else if (test > 49  && test <= 61) {\n    windsnelheid = '7';\n} else if (test > 61  && test <= 74) {\n    windsnelheid = '8';\n} else if (test > 74  && test <= 88) {\n    windsnelheid = '9';\n} else if (test > 88  && test <= 102) {\n    windsnelheid = '10';\n} else if (test > 102  && test <= 117) {\n    windsnelheid = '11';\n} else if (test > 117 ) {\n    windsnelheid = '12';\n}\n\nreturn { payload : windsnelheid };","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Deze code laat zien hoe hard de wind waait. Het krijgt een nummer dat vertelt hoe de wind waait in km/uur en geeft dan een cijfer dat past bij de kracht van de wind uitgedrukt in Beaufort.","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Bijvoorbeeld, als de wind heel zachtjes waait, zal de code het cijfer \"0\" teruggeven. \"0\" beteket windstil. Als de wind heel hard waait, kan het het cijfer \"12\" teruggeven. \"12\" betekent orkaankracht. ","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Tot slot geeft het dat cijfer terug, zodat we dat ergens anders kunnen gebruiken.","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Hoe hard de wind waait heb ik bepaald met de gegevens uit deze tabel. ","category":"page"},{"location":"chapter9/#Samenvatting","page":"9 Node-RED dashboard programma maken","title":"Samenvatting","text":"","category":"section"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Met Node-RED Dashboard module kun je een dashboard maken om live data te visualiseren. Het dashboard kan informatie over de temperatuur, vochtigheid en windrichting binnen en buiten tonen. Om dit te doen, heb je een Raspberry Pi 3B+ met Ubuntu Server 22.04 nodig, evenals geïnstalleerde Docker, Portainer, Node-RED en MQTT broker. Je hebt ook een ESP8266 met een DHT22-sensor nodig die gegevens naar de MQTT broker stuurt. Om het dashboard te maken, download je de Node-RED Dashboard module en stel je vervolgens het dashboard samen door de mqtt in- en gauge-knooppunten te slepen, de IP-adressen van de Raspberry Pi in te voeren en de juiste gegevens en namen in te voeren. Je kunt ook weergegevens van Visual Crossing ophalen met een API-sleutel en de informatie visualiseren.In dit hoofdstuk leer je hoe je met Node-RED snel een live data dashboard kunt maken. Dit dashboard kan informatie laten zien zoals de temperatuur, luchtvochtigheid, windrichting en -snelheid. Om dit te doen, heb je een Raspberry Pi 3B+ nodig met Ubuntu Server 22.04, geïnstalleerde Docker, Portainer, Node-RED en MQTT broker, een ESP8266 met een DHT22 die gegevens stuurt naar de MQTT broker en een wifi-netwerk waar alle onderdelen op aangesloten zijn.","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Stap 1: De Node-RED Dashboard module downloaden. Deze module biedt verschillende onderdelen, zoals een metertje, een grafiek en tekstweergave, die speciaal zijn ontworpen om een dashboard te maken. Je moet deze module zelf toevoegen aan Node-RED.","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Stap 2: Het dashboard samenstellen. Hier leer je hoe je verschillende onderdelen kunt toevoegen aan je dashboard en hoe je deze kunt verbinden met de MQTT broker. Je voegt bijvoorbeeld een \"mqtt in\", \"gauge\" en \"text\" knooppunt toe om de temperatuur en luchtvochtigheid weer te geven.","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Stap 3: Weergegevens ophalen en op dashboard weergeven. Je leert hoe je gegevens over het weer in Leusden kunt ophalen van een website en deze kunt integreren in je dashboard. Om je dashboard te bekijken, typ je het IP-adres van je Raspberry Pi in je webbrowser, gevolgd door /ui.","category":"page"},{"location":"chapter9/","page":"9 Node-RED dashboard programma maken","title":"9 Node-RED dashboard programma maken","text":"Met deze stappen kun je snel en gemakkelijk een dashboard maken om live data te visualiseren en te monitoren.","category":"page"},{"location":"index_en/#Applications-with-the-Raspberry-Pi","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"","category":"section"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"In this course, you will learn how to work with the Raspberry Pi and Docker containers.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"info: Info\nKijk in de Blog voor de laatste opmerkingen!","category":"page"},{"location":"index_en/#Introduction","page":"Applications with the Raspberry Pi","title":"Introduction","text":"","category":"section"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"I have a Raspberry Pi 3B+ at home running several programs. These include a program to measure the temperature in the different rooms in my house, a program to retrieve weather data from Visual Crossing, a program to view my electricity and gas consumption, and a recipe database with Italian recipes.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"Additionally, I used to participate in CoderDojo events for children at the Technisch Lab of LeusdenZet in the Netherlands. Due to COVID-19 and my age, I have stopped, but I still want to contribute by providing online course material.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"In this course, I will show you how to create programs that run on a Raspberry Pi, just like mine. My programs run in Docker containers. A Docker container is a kind of \"box\" in which we can run programs so that they do not affect each other.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"I also enjoy working with Node-RED. This is a program that allows us to build our programs graphically. It is similar to programs for the BBC Micro-bit. There are many instructional videos about Node-RED available on YouTube.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"I use various sensors to measure things, such as the DHT22 to measure temperature and humidity. The ESP8266 and ESP32 are microcontrollers, very small and cheap computers that can communicate with other computers via WiFi. For example, with an MQTT broker.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"An MQTT broker is a program that helps exchange information between other computers. This usually happens via a WiFi network.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"I use MicroPython as a computer program for the ESP's.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"Good luck with the course,","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"Rob Bontekoe","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"info: Info\nThe MIT license applies to this course:The MIT license is a kind of rule that says that people can use, copy, modify, and share a particular program on their computer or other device, as long as they clearly credit the creator and do not sell the program without permission. This is a convenient way to ensure that people can use the program to learn or create things without having to pay for it.","category":"page"},{"location":"index_en/#Who-is-this-course-for?","page":"Applications with the Raspberry Pi","title":"Who is this course for?","text":"","category":"section"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"This course is intended for children aged 8 to 14 years old.","category":"page"},{"location":"index_en/#What-is-a-Raspberry-Pi?","page":"Applications with the Raspberry Pi","title":"What is a Raspberry Pi?","text":"","category":"section"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"A Raspberry Pi is a small computer that you can use to do all sorts of fun things, such as creating your own website or playing a game. There are a few things that make Raspberry Pis attractive to use:","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"They are cheap: you can buy a Raspberry Pi for just a few tens of dollars. They are small: you can easily take a Raspberry Pi with you in your bag or pocket. They use little power: because they are small and not very powerful, they do not use as much power as regular computers. So, you can leave the Raspberry Pi on day and night without it costing a lot of power. They are good for learning about computers: a great way to learn how computers work without having to worry about breaking anything.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"(Image: Raspberry Pi 3B+)","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"Raspberry Pi 3B+","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"This course is designed to work on a Raspberry Pi 3B+. We have tested it to ensure that everything works well on that computer.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"<img src=\"https://seeklogo.com/images/R/raspberry-pi-logo-8240ABBDFE-seeklogo.com.png\" alt=\"Raspberry Pi logo\" width=\"100\">","category":"page"},{"location":"index_en/#What-is-Docker?","page":"Applications with the Raspberry Pi","title":"What is Docker?","text":"","category":"section"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"Docker is a program that helps to make software work on different computers. It uses containers, which are like small packages of software that contain everything needed to run a program. It's like a suitcase where you put all your things before going on vacation, so you have everything with you. That's how Docker works, only with software instead of stuff.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"There are two types of processors, or \"brains,\" that computers work with: ARM processors and X86 processors. A Raspberry Pi has an ARM processor. PCs usually have an X86 processor.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"A container must be adapted to the type of processor on which you want to use it. So if you've made a website that you want to run on a Raspberry Pi, you need a container that's adapted to the ARM processor of the Raspberry Pi. If you want to run that same website on a PC, you need a container that's adapted to the X86 processor of the PC.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"With Docker, the developer can ensure that the container is automatically adapted to the type of processor on which it's being run. So you don't have to worry about the program not working properly because Docker ensures that it does work properly.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"<img src=\"https://seeklogo.com/images/D/docker-logo-6D6F987702-seeklogo.com.png\" alt=\"Docker logo\" width=\"120\">","category":"page"},{"location":"index_en/#What-is-Portainer?","page":"Applications with the Raspberry Pi","title":"What is Portainer?","text":"","category":"section"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"Portainer is a program that you can use to manage Docker. When using Docker, you may have different containers that you want to start, stop, or remove. Portainer makes it easier to perform these tasks by providing a user-friendly graphical interface for managing the containers.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"Imagine you have a box of toys and you want to know which toys are inside. With Portainer, it's like you can open the box and see the toys, and you can also pick up the toys and put them back in the box if you want. This way, you can easily see which containers you have and what they do, and you can easily manage them.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"So Portainer is a kind of \"management program\" for Docker that makes it easier to use and manage Docker. If you have many containers or if you are new to Docker, Portainer can help you understand and use everything better.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"<img src=\"https://seeklogo.com/images/P/portainer-wordmark-logo-9C4DA30483-seeklogo.com.png\" alt=\"Portainer logo\" width=\"300\">","category":"page"},{"location":"index_en/#What-is-Node-RED?","page":"Applications with the Raspberry Pi","title":"What is Node-RED?","text":"","category":"section"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"Node-RED is a program that allows you to easily create small programs, or \"flows\". You can do this by dragging and dropping buttons and other elements onto a screen and connecting them with lines.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"Imagine you have a game where you have to complete various tasks. With Node-RED, it's like you can lay out the tasks in a row, and indicate what should happen when you complete a task with arrows. For example, you can specify that when you finish cleaning up, you can watch a movie.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"Node-RED is often used to automate things or to collect and process information from different sources. For example, you can use Node-RED to check for new emails or to measure the temperature in your home and turn on the heating when it gets too cold.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"<img src=\"https://seeklogo.com/images/N/node-red-logo-03ED3C7805-seeklogo.com.png\" alt=\"Node-RED logo\" width=\"100\">","category":"page"},{"location":"index_en/#What-is-an-MQTT-broker?","page":"Applications with the Raspberry Pi","title":"What is an MQTT broker?","text":"","category":"section"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"An MQTT broker) is a program used to send and receive information over Wi-Fi using a protocol called MQTT, which stands for \"Message Queuing Telemetry Transport.\"","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"All devices that want to communicate with the MQTT broker must first \"register.\" This means they sign up with the MQTT broker and let it know that they want to send or receive information.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"Node-RED is a program designed with special features to easily communicate with an MQTT broker over Wi-Fi.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"<img src=\"https://seeklogo.com/images/M/mqtt-logo-C92D58AA94-seeklogo.com.png\" alt=\"MQTT logo\" width=\"200\">","category":"page"},{"location":"index_en/#What-is-an-ESP8266-or-an-ESP32?","page":"Applications with the Raspberry Pi","title":"What is an ESP8266 or an ESP32?","text":"","category":"section"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"The ESP8266 and the ESP32 are microcontrollers, meaning they are small computers designed to perform simple tasks.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"<img src=\"https://elektronicavoorjou.nl/wp-content/uploads/2019/12/NodeMcu-Lua-WIFI-Board-ESP8266-CP2102-1.jpg\" alt=\"ESP8266\" width=\"300\">","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"ESP8266 from elektronicavoorjou.nl that I use to send the output of a DHT22 to my Raspberry Pi","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"They both have a Wi-Fi connection, which means they can communicate with other devices. This makes them useful for projects where you want the microcontroller to communicate via Wi-Fi. They are often used in electronic projects, for example, in combination with a DHT22 to measure the temperature in a room and send it to an MQTT broker.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"<img src=\"https://elektronicavoorjou.nl/wp-content/uploads/2021/01/DHT22-1.jpg\" alt=\"DHT22\" width=\"300\">","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"DHT22 from elektronicavoorjou.nl that measures temperature and humidity levels","category":"page"},{"location":"index_en/#What-is-a-sensor-and-ea-smart-meter?","page":"Applications with the Raspberry Pi","title":"What is a sensor and ea smart meter?","text":"","category":"section"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"A sensor is a device that can detect or measure information, such as temperature, light, or motion. Sensors are often used in electronic projects or devices to collect information about the environment.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"Imagine you want to create a device that indicates when a room is too cold or too hot. You can use a temperature sensor to measure the temperature and control the device to give a notification when it gets too cold or too hot. This way, you can easily see when to turn the heating on or off.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"A smart meter is a specific type of sensor used to measure energy consumption. Smart meters are connected to the internet, so you can see how much energy you are using and how much it costs remotely. This can be useful if you want to reduce your energy consumption or if you want to know how much money you are saving by being energy-efficient.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"Therefore, sensors and smart meters are devices that can detect or measure information. They can be used to collect all kinds of information, such as temperature or energy consumption, and can be used in electronic projects or devices to monitor the environment.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"<img src=\"https://www.sossolutions.nl/media/catalog/product/cache/5df5c040ed8cd3972c59a8e190e44350/1/_/1.8m_kabel.png\" alt=\"P1 kabel\" width=\"300\">","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"P1 cable from www.sossolutions.nl that I use to connect my Smart Meter to my Raspberry Pi","category":"page"},{"location":"index_en/#What-is-MicroPython?","page":"Applications with the Raspberry Pi","title":"What is MicroPython?","text":"","category":"section"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"MicroPython is a specific version of the Python programming language designed to run on small computers, such as microcontrollers. MicroPython is useful if you want your programs to run quickly and efficiently on a small computer, such as a microcontroller.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"Imagine you want to create a robot that can move and avoid obstacles. You can use MicroPython to program the robot, so it knows how to move and how to react to obstacles. This allows you to easily create a program that lets the robot move and navigate.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"MicroPython is often used in electronic projects where a small computer, such as a microcontroller, is used. It is a convenient way to write programs that run efficiently on a small computer and are easy to understand.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"During the course, we use the Thonny program to create MicroPython code.","category":"page"},{"location":"index_en/","page":"Applications with the Raspberry Pi","title":"Applications with the Raspberry Pi","text":"<img src=\"https://seeklogo.com/images/M/micropython-logo-6255D51390-seeklogo.com.png\" alt=\"MicroPython logo\" width=\"80\">","category":"page"},{"location":"chapter11/#Slimme-meter-aansluitengeïnstalleerd","page":"11 Slimme meter aansluiten","title":"Slimme meter aansluitengeïnstalleerd","text":"","category":"section"},{"location":"chapter11/","page":"11 Slimme meter aansluiten","title":"11 Slimme meter aansluiten","text":"We gaan een slimme meter aansluiten. Een slimme meter is een meter die we gebruiken om te meten hoeveel stroom en gas we verbruiken in huis. We gaan dit doen met behulp van een Domoticz container. We leren ook hoe we de gegevens als MQTT bericht naar de Node-red broker kunnen versturen.","category":"page"},{"location":"chapter11/#Inhoud","page":"11 Slimme meter aansluiten","title":"Inhoud","text":"","category":"section"},{"location":"chapter11/","page":"11 Slimme meter aansluiten","title":"11 Slimme meter aansluiten","text":"Pages = [\"chapter10.md\"]","category":"page"},{"location":"chapter11/#Wat-je-nodig-hebt","page":"11 Slimme meter aansluiten","title":"Wat je nodig hebt","text":"","category":"section"},{"location":"chapter11/","page":"11 Slimme meter aansluiten","title":"11 Slimme meter aansluiten","text":"Een Raspberry Pi 3B+ met het besturingssysteem Ubuntu Server 22.04.\nDocker, Portainer en Domoticz zijn geïnstalleerd.\nDe Raspberry Pi heeft verbinding met het Internet.\nP1 Slimme meter kabel.","category":"page"},{"location":"chapter11/","page":"11 Slimme meter aansluiten","title":"11 Slimme meter aansluiten","text":"info: Info\nControleer of je slimme meter die je thuis gebruikt in het lijstje staat van de kabel en wat de snelheid van de omzetting moet zijn (9600 of 115200). Zelf heb ik een Kaifa MC304 die met een snelheid van 115200 Baud seriele gegevens naar parallel omzet. De kabel heeft aan de ene kant een USB aansluiting en aan de andere kant een telefoonaansluiting (rj11-connector).","category":"page"},{"location":"chapter11/#Wat-je-gaat-doen","page":"11 Slimme meter aansluiten","title":"Wat je gaat doen","text":"","category":"section"},{"location":"chapter11/","page":"11 Slimme meter aansluiten","title":"11 Slimme meter aansluiten","text":"Stap 1 - USB van de kabel op de Raspberry Pi aansluiten.","category":"page"},{"location":"chapter11/","page":"11 Slimme meter aansluiten","title":"11 Slimme meter aansluiten","text":"Stap 2 - Voeding aanzetten van de Raspberry Pi.","category":"page"},{"location":"chapter11/","page":"11 Slimme meter aansluiten","title":"11 Slimme meter aansluiten","text":"Stap 3 - Ander gedeelte van de kabel aansluiten op je Slimme Meter.","category":"page"},{"location":"chapter11/","page":"11 Slimme meter aansluiten","title":"11 Slimme meter aansluiten","text":"Stap 4 - Maak een device aan voor power en voor gas.","category":"page"},{"location":"chapter11/","page":"11 Slimme meter aansluiten","title":"11 Slimme meter aansluiten","text":"De P1-kabel wordt gebruikt om de gegevens van de slimme meter naar de Raspberry Pi te verzenden, zodat je in Domoticz kunt zien hoeveel elektriciteit of gas je hebt verbruikt.","category":"page"},{"location":"chapter11/#Stap-1-USB-van-de-kabel-op-de-Raspberry-Pi-aansluiten","page":"11 Slimme meter aansluiten","title":"Stap 1 - USB van de kabel op de Raspberry Pi aansluiten","text":"","category":"section"},{"location":"chapter11/","page":"11 Slimme meter aansluiten","title":"11 Slimme meter aansluiten","text":"Sluit de P1 kabel aan op de Raspberry Pi.","category":"page"},{"location":"chapter11/","page":"11 Slimme meter aansluiten","title":"11 Slimme meter aansluiten","text":"info: Info\nWanneer je een USB P1-kabel aansluit op een Raspberry Pi 3B+, wordt de seriële poort (ook bekend als ttyUSB0) toegewezen aan de verbinding. Hier is een uitleg over hoe dit werkt:USB P1-kabel: Een USB P1-kabel is een specifiek type USB-kabel dat wordt gebruikt om verbinding te maken met slimme energiemeters, zoals de Nederlandse P1 Slimme Meter. Deze kabels hebben aan de ene kant een USB-connector en aan de andere kant een RJ11-connector die in de P1-poort van de energiemeter wordt gestoken.Raspberry Pi 3B+: De Raspberry Pi 3B+ is een populaire single-board computer die verschillende I/O-poorten en interfaces heeft, waaronder USB-poorten. Deze USB-poorten kunnen worden gebruikt om externe apparaten, zoals de USB P1-kabel, aan te sluiten.TTY: TTY staat voor \"teletypewriter\" en verwijst naar de seriële poorten op een computer of microcontroller. In Linux-systemen, zoals de Raspberry Pi, worden seriële poorten vaak weergegeven als /dev/ttyUSB0, /dev/ttyUSB1, enz., afhankelijk van het aantal aangesloten apparaten.Wanneer je de USB P1-kabel op een vrije USB-poort van de Raspberry Pi 3B+ aansluit, zal het besturingssysteem van de Raspberry Pi de kabel detecteren en automatisch een apparaatbestand toewijzen, zoals /dev/ttyUSB0. Dit bestand vertegenwoordigt de verbinding met de P1-poort van de slimme energiemeter.Je kunt dit apparaatbestand gebruiken om gegevens van de slimme energiemeter te lezen. Bijvoorbeeld, als je programma's of scripts schrijft, kun je de /dev/ttyUSB0-interface gebruiken om te communiceren met de slimme energiemeter en gegevens zoals energieverbruik, spanning of stroomsterkte uit te lezen.Het is belangrijk op te merken dat het toewijzen van de ttyUSB0-aanduiding niet uniek is voor de Raspberry Pi 3B+. Het hangt af van het besturingssysteem en de configuratie. Het kan variëren afhankelijk van het aantal aangesloten USB-apparaten en de volgorde waarin ze worden gedetecteerd. Dus als je meerdere USB-apparaten hebt aangesloten op je Raspberry Pi, kan het zijn dat de P1-kabel een andere ttyUSB-poort toegewezen krijgt, zoals ttyUSB1.","category":"page"},{"location":"chapter11/#Stap-2-Voeding-aanzetten-van-de-Raspberry-Pi","page":"11 Slimme meter aansluiten","title":"Stap 2 - Voeding aanzetten van de Raspberry Pi","text":"","category":"section"},{"location":"chapter11/","page":"11 Slimme meter aansluiten","title":"11 Slimme meter aansluiten","text":"Sluit de voeding aan op de Raspery Pi en steek de stekker van de voeding in het stopcontact. ","category":"page"},{"location":"chapter11/#Stap-3-Ander-gedeelte-van-de-kabel-aansluiten-op-je-Slimme-Meter","page":"11 Slimme meter aansluiten","title":"Stap 3 - Ander gedeelte van de kabel aansluiten op je Slimme Meter","text":"","category":"section"},{"location":"chapter11/","page":"11 Slimme meter aansluiten","title":"11 Slimme meter aansluiten","text":"Even wachten totdat de Raspberry Pi is opgestart en steek vervolgens de andere kant van de P1 kabel in de Slimme Meter.\nGa naar je internet browser en typ IP-adres_Raspberry_Pi:8081.\nKlik op het tabblad Setup en kies Hardware.\nMaak dan een P1 verbinding met de volgende informatie:","category":"page"},{"location":"chapter11/","page":"11 Slimme meter aansluiten","title":"11 Slimme meter aansluiten","text":"(Image: fig_11_1)","category":"page"},{"location":"chapter11/","page":"11 Slimme meter aansluiten","title":"11 Slimme meter aansluiten","text":"Enabled schakelaar: Aan (=groen)\nNaam: p1\nLog level/Info/Status/Error scakelaars: Aan\nType: Smart Meter P1\nSerial Port: /dev/ttyUSB0\nData Timeout: disabled\nBaudrate: 9600 of 115200\nCRC message validation schakelaar: Aan\nRate Limit: 0","category":"page"},{"location":"chapter11/","page":"11 Slimme meter aansluiten","title":"11 Slimme meter aansluiten","text":"Druk op de toets Add.","category":"page"},{"location":"chapter11/#Stap-4-Maak-een-device-aan-voor-power-en-voor-gas","page":"11 Slimme meter aansluiten","title":"Stap 4 - Maak een device aan voor power en voor gas","text":"","category":"section"},{"location":"chapter11/","page":"11 Slimme meter aansluiten","title":"11 Slimme meter aansluiten","text":"Kies op de Setup tab voor Devices. (Image: fig_11_1)\nActiveer Power en Gas door op het groene pijltje naar rechts te klikken.\nDe pijltjes worden vervolgens zwart en wijzen naar links als teken dat ze geactiveerd zijn.\nUitgebreide gegevens ziet je onder de tab Utility en Dashboard.\nOnder Utlity  verschijnen grafieken als je op de toets log klikt.","category":"page"},{"location":"chapter11/#Samenvatting","page":"11 Slimme meter aansluiten","title":"Samenvatting","text":"","category":"section"},{"location":"chapter11/","page":"11 Slimme meter aansluiten","title":"11 Slimme meter aansluiten","text":"We gaan een slimme meter aansluiten, die meet hoeveel stroom en gas we gebruiken in huis. Dit doen we met een Domoticz container en sturen de gegevens als MQTT bericht naar de Node-red broker. Om dit te doen hebben we een Raspberry Pi nodig die verbinding heeft met het internet en een P1 slimme meter kabel. Voordat we beginnen, moeten we controleren of onze slimme meter in de lijst van kabels staat en wat de snelheid van de omzetting moet zijn (9600 of 115200). We gebruiken een kabel met een USB-aansluiting aan de ene kant en een telefoonaansluiting (rj11-connector) aan de andere kant. Als we dit hebben, kunnen we beginnen met het installeren van Domoticz en het aansluiten van de slimme meter op de Raspberry Pi. Daarna kunnen we de gegevens naar de Node-red broker sturen en bekijken hoeveel stroom en gas we gebruiken in ons huis.","category":"page"},{"location":"chapter14/#Gegevens-opslaan-in-een-Influx-database-met-Node-RED","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Gegevens opslaan in een Influx database met Node-RED","text":"","category":"section"},{"location":"chapter14/","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Gegevens opslaan in een Influx database met Node-RED","text":"In dit hoofdstuk leer je hoe je gegevens kunt opslaan in een speciaal programma genaamd Influx database. Dit programma is gemaakt om gegevens te bewaren, zoals bijvoorbeeld temperaturen of vochtigheid. We gebruiken Node-RED om de gegevens naar de Influx database te sturen. Zo kunnen we de gegevens later gemakkelijk terugvinden en bekijken.","category":"page"},{"location":"chapter14/#Inhoud","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Inhoud","text":"","category":"section"},{"location":"chapter14/","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Gegevens opslaan in een Influx database met Node-RED","text":"Pages = [\"chapter14.md\"]","category":"page"},{"location":"chapter14/#Wat-je-nodig-hebt","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Wat je nodig hebt","text":"","category":"section"},{"location":"chapter14/","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Gegevens opslaan in een Influx database met Node-RED","text":"Een Raspberry Pi 3B+ met het besturingssysteem Ubuntu Server 22.04.\nDocker, Portainer, Node-RED, InfluxDB en Grafana zijn geïnstalleerd.\nNode-RED programma uit de les 9 Node-RED dashboard programma maken.\nDe Raspberry Pi heeft verbinding met het Internet.","category":"page"},{"location":"chapter14/#Wat-je-gaat-doen","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Wat je gaat doen","text":"","category":"section"},{"location":"chapter14/","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Gegevens opslaan in een Influx database met Node-RED","text":"Stap 1: InfluxDB module in Node-RED maken.","category":"page"},{"location":"chapter14/","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Gegevens opslaan in een Influx database met Node-RED","text":"Stap 2: Sensor_data database maken.","category":"page"},{"location":"chapter14/","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Gegevens opslaan in een Influx database met Node-RED","text":"Stap 3: Data naar database wegschrijven","category":"page"},{"location":"chapter14/#Stap-1-InfluxDB-module-in-Node-RED-maken","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Stap 1 - InfluxDB module in Node-RED maken","text":"","category":"section"},{"location":"chapter14/","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Gegevens opslaan in een Influx database met Node-RED","text":"Stap Actie\n1 Open de webinterface van Node-RED met IP_adres_Raspberry_Pi:1880.\n2 Kies uit het menu voor \"Manage palette\".\n3 Klik op de \"Install\" tab en zoek naar \"node-red-contrib-influxdb\". (Image: fig_14_4)\n4 Druk op de knop \"Install\".\n5 In het Node-RED menu vind je de drie knooppunten: (Image: fig_14_6)\n ","category":"page"},{"location":"chapter14/#Stap-2-Sensor_data-database-maken","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Stap 2 - Sensor_data database maken","text":"","category":"section"},{"location":"chapter14/","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Gegevens opslaan in een Influx database met Node-RED","text":"Stap Actie\n1 Ga naar de webinterface van Portainer en login: \"IPadresRaspberry_Pi:9000\".\n2 Klik op \">_\" symbool van de influxdb container. (Image: fig_14_7)\n3 Druk op de knop: \"Connect\". (Image: fig_14_8)\n4 Om de datum als \"jjjj-mm-dd\" weer te geven, typ: influx -precision 'rfc3339' en druk op Enter.\n5 Om de database \"sensor_data\" te maken, typ: create database sensor_data en druk op Enter.\n6 Verlaat de database interface met Ctrl-D.\n7 Verlaat de container interface met Ctrl_D.\n ","category":"page"},{"location":"chapter14/#Stap-3-Data-naar-database-wegschrijven","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Stap 3 - Data naar database wegschrijven","text":"","category":"section"},{"location":"chapter14/","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Gegevens opslaan in een Influx database met Node-RED","text":"Stap Actie\n1 Open Node-RED.\n2 Sleep een function en het influx out knooppunt naar je werkblad en verbind de knooppunten volgens het schema. (Image: fig_14_9)\n3 Open het function knooppunt en type de volgende code. (Image: fig_14_10)\n4 Druk op de toets \"Done\".\n5 Open het influx out knooppunt.\n6 Klik op het \"potloodje\". (Image: fig_14_11) In Node-RED: JSON object creeert de tabel \"test\", die staat gedefinieerd in het knooppunt \"influxdb out\" onder \"Measurments\". Aantal items bepaalt aantal kolommen, naast de eerste kolom die datum en tijd bevat:","category":"page"},{"location":"chapter14/","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Gegevens opslaan in een Influx database met Node-RED","text":"      {\n          temp: Number(myval),   // de meting\n          type: \"temp\",          // extra informatie\n          locatie: \"LR\"          // extra informatie\n      }","category":"page"},{"location":"chapter14/","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Gegevens opslaan in een Influx database met Node-RED","text":"Stap Actie\n7 Vul het ip adres van je Raspberry Pi in en geef als naam van de database sensor_data op. (Image: fig_14_12)\n8 Druk op de knop \"Update\".\n9 Druk op de knop \"Done\".\n10 Druk op de knop \"Deploy\".\n ","category":"page"},{"location":"chapter14/","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Gegevens opslaan in een Influx database met Node-RED","text":"Open de container interface en open de database interface met influx -precision 'rfc3339' # datum in yyyy-mm-dd formaat","category":"page"},{"location":"chapter14/","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Gegevens opslaan in een Influx database met Node-RED","text":"Open database en typ use sensor_data en daarna `select * from test. Je krijg het volgende te zien:","category":"page"},{"location":"chapter14/","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Gegevens opslaan in een Influx database met Node-RED","text":"2023-03-02T13:10:05.228259851Z buiten  10   temp\n2023-03-02T13:40:05.289277559Z buiten  10.1 temp\n2023-03-02T14:10:05.322618876Z buiten  10.1 temp","category":"page"},{"location":"chapter14/#Samenvatting","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Samenvatting","text":"","category":"section"},{"location":"chapter14/","page":"Gegevens opslaan in een Influx database met Node-RED","title":"Gegevens opslaan in een Influx database met Node-RED","text":"In deze les leer je hoe je gegevens zoals temperaturen en vochtigheid kunt opslaan in een Influx database met behulp van Node-RED. Om dit te doen heb je een Raspberry Pi 3B+ nodig met Docker, Portainer, Node-RED, InfluxDB en Grafana. Je moet ook het Node-RED dashboard programma hebben gemaakt en de Raspberry Pi moet verbinding hebben met het internet. Er zijn drie stappen om gegevens naar de Influx database te sturen: 1) een InfluxDB-module in Node-RED maken, 2) een sensordata database maken, en 3) de data naar de database wegschrijven. Om deze stappen uit te voeren moet je verschillende acties ondernemen, zoals het openen van de webinterface van Node-RED, het zoeken naar de node-red-contrib-influxdb en het maken van een database. Je moet ook een functie- en influx-out knooppunt slepen naar je werkblad en deze verbinden volgens het schema. Ten slotte moet je het IP-adres van je Raspberry Pi invoeren en de naam van de database sensordata opgeven, en daarna op de knop 'Deploy' drukken. Als je alles goed hebt gedaan, kun je later de gegevens gemakkelijk terugvinden en bekijken.","category":"page"},{"location":"chapter2/#Communiceren-met-de-Raspberry-Pi-en-achteraf-wifi-instellen","page":"2 Communiceren met de Raspberry Pi","title":"Communiceren met de Raspberry Pi en achteraf wifi instellen","text":"","category":"section"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"In dit hoofdstuk leer je hoe je de Raspberry Pi kan gebruiken. Het moet een verinding met het Internet hebben, zodat je nieuwe programma's kan downloaden. Je kan met de Raspberry Pi praten met een USB-toetsenbord en een monitor met een HDMI-aansluiting, bijvoorbeeld een TV. Maar je kan ook praten met de Raspberry Pi via je laptop. Ook kan je later je wifi instellen.","category":"page"},{"location":"chapter2/#Inhoud","page":"2 Communiceren met de Raspberry Pi","title":"Inhoud","text":"","category":"section"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Pages = [\"chapter2.md\"]","category":"page"},{"location":"chapter2/#Wat-heb-je-nodig","page":"2 Communiceren met de Raspberry Pi","title":"Wat heb je nodig","text":"","category":"section"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Om een Raspberry Pi te gebruiken, heb je het volgende nodig:","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Een Raspberry Pi 3B+ computer.\nEen klaargemaakt micro SD-kaartje voor de Raspberry Pi, dit is in het vorige hoofdstuk besproken.\nEen adapter om stroom aan de Raspberry Pi te geven.","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Als je later wifi wilt instellen dan heb je ook nodig:","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"De naam van je wifi-netwerk.\nHet wachtwoord van je wifi-netwerk.\nEen scherm met HDMI aansluiting, zoals een TV of de UCtronics 7 Inch touchscreen.\nEen USB-toetsenbord US met muis,","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"om te typen op de Raspberry Pi.","category":"page"},{"location":"chapter2/#Wat-ga-je-doen","page":"2 Communiceren met de Raspberry Pi","title":"Wat ga je doen","text":"","category":"section"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Stap 1: Stop het SD-kaartje in de Raspberry Pi.","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Stap 2: Sluit de adapter aan op de Raspberry Pi, zodat hij stroom krijgt.","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Stap 3: Gebruik een andere computer om verbinding te maken met de Raspberry Pi via SSH.","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Stap 4: Later wifi instellen.","category":"page"},{"location":"chapter2/#Stap-1:-Stop-het-SD-kaartje-in-de-Raspberry-Pi","page":"2 Communiceren met de Raspberry Pi","title":"Stap 1: Stop het SD-kaartje in de Raspberry Pi","text":"","category":"section"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"(Image: Raspberry Pi 3B+)","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Om een micro SD-kaartje te gebruiken in een Raspberry Pi 3B+, volg je deze stappen:","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Stap Actie\n1 Zoek de SD-kaartlezer op de Raspberry Pi. Dit is een kleine rechthoekige opening links in het midden van de Raspberry Pi.\n2 Neem het micro SD-kaartje en kijk naar beide kanten. Er zal op één kant tekst staan.\n3 Houd het kaartje met de kant met de tekst naar beneden gericht en stop het in de SD-kaartlezer.\n4 Duw het kaartje zachtjes in de kaartlezer totdat het op zijn plaats zit.\n5 Als je het kaartje wilt verwijderen, trek je het kaartje naar buiten.","category":"page"},{"location":"chapter2/#Stap-2-Sluit-de-adapter-aan-op-de-Raspberry-Pi,-zodat-hij-stroom-krijgt","page":"2 Communiceren met de Raspberry Pi","title":"Stap 2 - Sluit de adapter aan op de Raspberry Pi, zodat hij stroom krijgt","text":"","category":"section"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Om de Raspberry Pi 3B+ te laten werken, moet je eerst de stroomadapter aansluiten op de micro USB-aansluiting aan de linkerkant onderaan het bord. Vervolgens moet je de stekker van de adapter in het stopcontact steken.","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Als je een monitor en een toetsenbord hebt aangesloten dan zal je op het scherm zien dat de Raspberry Pi aan het opstarten is. Uiteindelijk zal het systeem je vragen om een gebruikersnaam in te voeren. Voer de gebruikersnaam \"ubuntu\" in en druk op de Enter-toets.","category":"page"},{"location":"chapter2/#Stap-3-Gebruik-een-andere-computer-om-verbinding-te-maken-met-de-Raspberry-Pi-via-SSH","page":"2 Communiceren met de Raspberry Pi","title":"Stap 3 - Gebruik een andere computer om verbinding te maken met de Raspberry Pi via SSH","text":"","category":"section"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Om verbinding te maken met een Raspberry Pi vanuit een andere computer met SSH, heb je eerst een aantal dingen nodig:","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"De Raspberry Pi moet aan het stroomnetwerk zijn aangesloten en aan staan.","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Je moet weten wat het IP-adres is van de Raspberry Pi. Dit is een uniek nummer dat aan elke computer en elk apparaat op het internet of wifi is toegewezen.","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Je moet ook weten wat het gebruikersnaam en wachtwoord zijn voor de Raspberry Pi. In het vorige hoofdstuk heb je 'ubuntu' als gebruikersnaam opgegeven met als wachtwoord dat je opgeschreven hebt tijdens het maken van het micro SD kaartje.","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Je moet op de andere computer een programma hebben geïnstalleerd dat SSH ondersteunt, zoals PuTTY (voor Windows) of Terminal (voor MacOS en Linux).","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Gebruik de volgende stappen volgen om een verbinding te maken met de Raspberry Pi vanuit een andere computer.","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"info: Info Fing\n(Image: Fing)Je hebt het ip-adres van de Raspberry Pi nodig om een SSH verbinding met de Raspberry Pi te maken. Het makkelijkste is om de app Fling op je smartphone te instaleren. Zoek 'ubuntu' op, de naam die je gegeven hebt aan de Raspberry Pi in het vorige hoofdstuk. Je ziet dan bijvoorbeeld staan:ubuntu\n192.168.2.49","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Stap Actie\n1 Open met Ctrl + Alt + T een terminal sessie voor de Mac of de laptop die je bij de CoderDojo wordt gebruikt.\n2 Voer het commando ssh ubuntu@IP_adres_Raspberry_Pi in in het programma. Bijvoorbeeld ssh ubuntu@192.168.2.49.\n3 Typ: yes. (Image: fig_4_?)\n4 Vul de naam en het wachtwoord in die je gebruikt voor je Raspberry Pi. Als alles goed is gegaan, dan moet je nu verbonden zijn met de Raspberry Pi vanaf een andere computer. Dan kan je opdrachten geven aan de Raspberry Pi en bestanden uitwisselen tussen de twee computers.\n5 Als je windows gebruikt, dan moet je een programma genaamd Putty installeren. Met dat programma kan je een verbinding maken.\n5 Met een Chromebook ga je naar Linux door op het volgende symbool te klikken: (Image: Linux)\n ","category":"page"},{"location":"chapter2/#Stap-4-Later-wifi-instellen","page":"2 Communiceren met de Raspberry Pi","title":"Stap 4 - Later wifi instellen","text":"","category":"section"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Als de Raspberry Pi nog niet aangesloten is op het internet, dan kan je er alleen mee werken als je een toetsenbord en een beeldscherm met een HDMI kabel hebt.","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"(Image: Raspberry Pi)","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"De USB-poorten zitten aan de rechterkant van het Raspberry Pi 3B+ bord. Daar sluit je het toetsenbord aan.\nDe HDMI-poort is de grote connector onderaan in het midden van het bord. Daar sluit je de monitor of TV aan.\nDe poort die helemaal links onderaan zit, is voor je adapter om stroom te geven.","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Het systeem zal je vragen om een gebruikersnaam. Typ \"ubuntu\" en druk op de knop Enter. Dan zal het systeem vragen of je het wachtwoord wilt veranderen. Typ eerst het oude wachtwoord \"ubuntu\" en daarna je nieuwe geheim woord. Druk op de knop Enter om te bevestigen dat je het geheim woord hebt veranderd. Noteer het wachtwoord op een papiertje.","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Om de Raspberry Pi opnieuw te laten beginnen, geef je het volgende opdracht:","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"sudo reboot","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Druk op de knop Enter om het opdracht te laten werken.","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"De plek waar je op werkt wordt de \"terminal\" genoemd.","category":"page"},{"location":"chapter2/#cloud-init.yaml","page":"2 Communiceren met de Raspberry Pi","title":"50-cloud-init.yaml","text":"","category":"section"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"# This file is generated from information provided by\n# the datasource.  Changes to it will not persist across an instance.\n# To disable cloud-init's network configuration capabilities, write a file\n# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:\n# network: {config: disabled}\nnetwork:\n    version: 2\n    ethernets:\n        eth0:\n            optional: true\n            dhcp4: true\n    # add wifi setup information here ...\n    wifis:\n        wlan0:\n            optional: true\n            access-points:\n                \"Je wifi netwerknaam (SSID)\":\n                    password: \"Je wifi wachtwoord\"\n            dhcp4: true","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Als je een .yml-bestand maakt, moet je ervoor zorgen dat je tekst er netjes uitziet. Je moet bijvoorbeeld goed opletten hoe je tekst begint en hoeveel spaties je gebruikt. Het is belangrijk om geen tab te gebruiken, maar in plaats daarvan spaties te gebruiken om de tekst te laten inspringen.","category":"page"},{"location":"chapter2/#Stap-5-Gebruik-speciale-bevelen-om-dingen-te-doen-met-de-Raspberry-Pi","page":"2 Communiceren met de Raspberry Pi","title":"Stap 5 - Gebruik speciale bevelen om dingen te doen met de Raspberry Pi","text":"","category":"section"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"De terminal is een programma op je computer waarmee je speciale opdrachten kunt geven aan de computer. Bijvoorbeeld als je een bestand wilt downloaden via wifi.","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Ubuntu is een speciaal computer programma dat helpt om met je computer te werken en om programma's te gebruiken. Soms komen er nieuwe versies van programma's of worden er fouten in programma's opgelost. Als je Ubuntu gebruikt, kan het handig zijn om deze nieuwe versies te installeren of om fouten te repareren. Je kan dit doen door een opdracht te geven aan Ubuntu met hulp van de terminal:","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"# nieuwste versies van alle programma's installeren of bijwerken\nsudo apt update && sudo apt full-upgrade\n\n# Raspberry Pi opnieuw opstarten met de nieuwste versies\nsudo reboot","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"sudo apt full-upgrade laat Ubuntu de nieuwste versies van alle programma's installeren of bijwerken. Dit is vergelijkbaar met sudo apt upgrade, maar apt full-upgrade is beter om te gebruiken als er afhankelijkheden zijn. Dit betekent dat als een nieuwe versie van een programma afhankelijk is van een ander programma, apt full-upgrade ervoor zorgt dat het andere programma ook geïnstalleerd of bijgewerkt wordt. Het kan ook programma's verwijderen die niet meer nodig zijn en nieuwe programma's toevoegen om aan de afhankelijkheden van de nieuwe programma's te voldoen.","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"We gebruiken vaak het programma \"Nano\" om bestanden te maken of te veranderen. Als je dit opdrachtje intypt in de terminal en op Enter drukt, dan kan je het bestand openen om aan te passen: sudo nano /etc/netplan/50-cloud-init.yaml.","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"sudo nano /etc/netplan/50-cloud-init.yaml","category":"page"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"Om wifi te laten werken, moet je de juiste informatie invullen in een bestand genaamd 50-cloud-init.yaml, zie hiervoor het voorbeeld in 50-cloud-init.yaml. Helaas moet je alles zelf typen. (later als je een verbinding maakt met de Raspberry Pi vanuit je eigen computer, kunnen je de \"kopieer-plak\" commando's gebruiken.) Let er wel op dat je niet de tab-toets gebruikt, maar in plaats daarvan twee of vier spaties intypt.","category":"page"},{"location":"chapter2/#Samenvatting","page":"2 Communiceren met de Raspberry Pi","title":"Samenvatting","text":"","category":"section"},{"location":"chapter2/","page":"2 Communiceren met de Raspberry Pi","title":"2 Communiceren met de Raspberry Pi","text":"In dit hoofdstuk wordt uitgelegd hoe je de Raspberry Pi kunt gebruiken en verbinden met het internet om nieuwe programma's te downloaden. Om de Raspberry Pi te gebruiken, heb je een USB-toetsenbord en een monitor met een HDMI-aansluiting of een laptop nodig. Ook leer je hoe je later de wifi op de Raspberry Pi kunt instellen. De stappen om de Raspberry Pi te gebruiken zijn als volgt: stop het micro SD-kaartje in de Raspberry Pi, sluit de adapter voor stroom aan op de Raspberry Pi en maak verbinding met de Raspberry Pi vanaf een andere computer via SSH. Om verbinding te maken met de Raspberry Pi vanaf een andere computer, moet je het IP-adres van de Raspberry Pi kennen en de gebruikersnaam en het wachtwoord dat je hebt opgegeven tijdens het maken van het micro SD-kaartje. Je hebt ook een programma nodig dat SSH ondersteunt, zoals PuTTY of Terminal. Door deze stappen te volgen, kun je de Raspberry Pi gebruiken en met andere computers verbinden.","category":"page"},{"location":"overview/#Overview-Linux-Terminal-commando's","page":"Overview Linux Terminal commando's","title":"Overview Linux Terminal commando's","text":"","category":"section"},{"location":"overview/#Overview-Node-RED","page":"Overview Linux Terminal commando's","title":"Overview Node-RED","text":"","category":"section"},{"location":"overview/#Overzicht-MicroPython","page":"Overview Linux Terminal commando's","title":"Overzicht MicroPython","text":"","category":"section"},{"location":"overview/#Summary","page":"Overview Linux Terminal commando's","title":"Summary","text":"","category":"section"},{"location":"overview/","page":"Overview Linux Terminal commando's","title":"Overview Linux Terminal commando's","text":"Top","category":"page"},{"location":"chapter5/#Node-RED-installeren","page":"5 Node-RED installeren","title":"Node-RED installeren","text":"","category":"section"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"In deze les gaan we leren hoe je Node-RED installeert in een container met behulp van Portainer op een Raspberry Pi. Portainer is een programma dat het makkelijker maakt om containers te beheren. Node-RED is een tool die je helpt bij het maken van slimme toepassingen door middel van eenvoudige programma's die we \"flows\" noemen.","category":"page"},{"location":"chapter5/#Inhoud","page":"5 Node-RED installeren","title":"Inhoud","text":"","category":"section"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"Pages = [\"chapter5.md\"]","category":"page"},{"location":"chapter5/#Wat-je-nodig-hebt","page":"5 Node-RED installeren","title":"Wat je nodig hebt","text":"","category":"section"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"Een Raspberry Pi 3B+ met het besturingssysteem Ubuntu Server 22.04.\nDocker en Portainer zijn geinstalleerd.\nEen SSH verbinding met de Raspberry Pi vanuit je laptop.","category":"page"},{"location":"chapter5/#Wat-je-gaat-doen","page":"5 Node-RED installeren","title":"Wat je gaat doen","text":"","category":"section"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"We gaan gebruikmaken van Portainer om Node-RED te installeren. Dat doen we door een stack te maken met een docker-compose.yml bestand. Een docker-compose.yml bestand bevat de instructies voor Docker om een container te maken. ","category":"page"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"Het voordeel van een docker-compose.yml bestand is dat je er gemakkelijk voorbeelden van kan vinden op het Internet.","category":"page"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"Stap 1: Inloggen op Portainer en naar Stacks gaan.","category":"page"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"Stap 2: De docker-compose.yml gegevens naar het klembord kopieren.","category":"page"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"Stap 3: De docker-compose.yml in de stack plakken.","category":"page"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"Stap 4: De container gegevens verversen en bekijken.","category":"page"},{"location":"chapter5/#docker-compose.yml","page":"5 Node-RED installeren","title":"docker-compose.yml","text":"","category":"section"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"################################################################################\n# https://nodered.org/docs/getting-started/docker\n################################################################################\nversion: \"3.7\"\n\nservices:\n  node-red:\n    image: nodered/node-red:latest\n    environment:\n      - TZ=Europe/Amsterdam\n    ports:\n      - \"1880:1880\"\n    networks:\n      - node-red-net\n    volumes:\n      - node-red-data:/data\n\nvolumes:\n  node-red-data:\n\nnetworks:\n  node-red-net:","category":"page"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"Dit is een bestand dat Docker gebruikt om een container met Node-RED te maken. Het haalt het image (nodered/node-red:latest) van het internet van Docker Hub. latest geeft aan dat we altijd de nieuwste versie gebruiken. De tijdzone (TZ=Europe/Amsterdam) staat op die van Amsterdam. We geven ook toegang tot het programma vanaf de Raspberry Pi via poort 1880. Ook maken we op de Raspberry Pi een plek node-red-data om gegevens op te slaan.","category":"page"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"Een computerpoort is net zoals een loket in het gemeentehuis. Als je iets wilt regelen bij de gemeente, ga je naar het loket. Dit is de plek waar je iets kunt aanvragen of afgeven, zoals een vergunning of een formulier.","category":"page"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"Net zoals elk loket in het gemeentehuis een specifieke functie heeft, hebben poorten op een computer een specifieke functie. Deze functies zijn vergelijkbaar met die van een specifiek programma in een container. Bijvoorbeeld poort 1880 op de Raspberry Pi die is toegewezen aan Node-RED kan worden gebruikt voor het verzenden en ontvangen van data tussen Node-RED en een andere computer.","category":"page"},{"location":"chapter5/#Stap-1:-Inloggen-op-Portainer-en-naar-Stacks-gaan","page":"5 Node-RED installeren","title":"Stap 1: Inloggen op Portainer en naar Stacks gaan","text":"","category":"section"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"Je gaat met behulp van Portainer een stack maken voor de Node-RED container. Een stack staat beschreven wat de container moet doen en heet meestal docker-compose.yml. Het beschrijft wat het image is dat gebruikt moet worden. Een image is te vergelijken met een template. Veel images met name van bekende programma's vind je op Docker Hub een soort algemene bibliotheek. ","category":"page"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"Stap Actie\n1 Typ IP-adresRaspberryPi:9000 in je browser, bijvoorbeeld: 192.168.2.49:9000. Dit zorgt dat je Portainer opent in je internetbrowser, zoals Chrome of Firefox.\n2 Klik op 'stacks' in Portainer. Dit zorgt dat een nieuw menu opent. (Image: fig_5_1)\n3 Klik in het menu op 'Stack'. Hierdoor zie je een lijst met verschillende stacks en wat ze doen. (Image: fig_5_2)\n ","category":"page"},{"location":"chapter5/#Stap-2:-De-docker-compose.yml-gegevens-naar-het-klembord-kopieren","page":"5 Node-RED installeren","title":"Stap 2: De docker-compose.yml gegevens naar het klembord kopieren","text":"","category":"section"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"Je gaat de tekst uit het bestand \"docker-compose.yml\" kopiëren naar het klembord..","category":"page"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"Stap Actie\n1 Klik op deze link: docker-compose.yml/ Daar staat de code die je moet hebben.\n2 Selecteer alle tekst met je muis. Regels die beginnen met \"#\" zijn notitieregels en hoef je niet te selecteren.\n3 Druk op Ctrl + C. Dit zet de tekst naar het klembord, zodat je het later gemakkelijk kunt plakken.\n ","category":"page"},{"location":"chapter5/#Stap-3:-De-docker-compose.yml-in-de-stack-plakken","page":"5 Node-RED installeren","title":"Stap 3: De docker-compose.yml in de stack plakken","text":"","category":"section"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"In deze stap ga je een pagina maken waarin je de gegevens van de stack vermeldt.","category":"page"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"Stap Actie\n1 Klik op de knop Add stack (Image: fig_5_3)\n2 Type nodered in het veld \"Name\". De naam van de stack.\n3 Klik op de eerste regel in het veld \"Web-editor\". Hier moet de tekst uit docker-compose.yml komen te staan.\n5 Druk op Ctrl + V. Hiermee plak je de tekst van het klembord in het veld. (Image: fig_5_4)\n6 Helemaal onderaan de pagina, klik op de knop \"Deploy the stack\". (Image: fig_5_5)\n ","category":"page"},{"location":"chapter5/#Samenvatting","page":"5 Node-RED installeren","title":"Samenvatting","text":"","category":"section"},{"location":"chapter5/","page":"5 Node-RED installeren","title":"5 Node-RED installeren","text":"In dit hoofdstuk leer je hoe je Node-RED installeert op een Raspberry Pi met behulp van Portainer. Node-RED is een tool die je helpt bij het maken van slimme toepassingen met behulp van eenvoudige programma's die we \"flows\" noemen. Om Node-RED te installeren, heb je een Raspberry Pi 3B+ nodig met het besturingssysteem Ubuntu Server 22.04, Docker en Portainer zijn geïnstalleerd en een SSH-verbinding met de Raspberry Pi vanaf je laptop. We maken gebruik van Portainer om Node-RED te installeren door een stack te maken met een docker-compose.yml bestand. Dit bestand bevat de instructies voor Docker om een container te maken. Je gaat een stack maken voor de Node-RED container en het docker-compose.yml bestand kopiëren en plakken in de stack. Vervolgens vernieuw je de containergegevens en bekijk je deze. Node-RED gebruikt poort 1880 om toegang te krijgen tot het programma op de Raspberry Pi. Een poort op een computer is vergelijkbaar met een loket in het gemeentehuis dat een specifieke functie heeft. Een image in Docker is te vergelijken met een template en veel images van bekende programma's vind je op Docker Hub.","category":"page"},{"location":"#Toepassingen-met-de-Raspberry-Pi","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"","category":"section"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"In deze cursus leer je werken met de Raspberry Pi en Docker containers.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"info: Info\nKijk in de Blog voor de laatste opmerkingen!","category":"page"},{"location":"#Inleiding","page":"Toepassingen met de Raspberry Pi","title":"Inleiding","text":"","category":"section"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Ik heb een Raspberry Pi 3B+ thuis waarop verschillende programma's draaien. Zoals een programma om de temperatuur in de verschillende kamers in mijn huis te meten, een programma om gegevens over het weer op te halen van Visual Crossing, een programma om het stroom- en gasverbruik te bekijken en een receptendatabase.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Daarnaast heb ik meegewerkt aan CoderDojo evenementen voor kinderen bij het Technisch Lab van LeusdenZet. Door Corona en mijn leeftijd ben ik hiermee gestopt, maar ik wil wel nog steeds graag een bijdrage leveren door middel van online cursusmateriaal.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"In deze cursus laat ik zien hoe je programma's kunt maken die draaien op een Raspberry Pi, net als die van mij. Mijn programma's draaien in Docker containers. Een Docker container is een soort 'doos' waarin we programma's kunnen draaien, zodat ze elkaar niet beïnvloeden.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Ook werk ik graag met Node-RED. Dit is een programma waarmee we grafisch onze programma's kunnen opbouwen. Het is vergelijkbaar met programma's voor de BBC Micro-bit. Op YouTube zijn heel veel instructie-videos te vinden over Node-RED.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Ik gebruik verschillende sensors om dingen te meten, zoals de DHT22 om de temperatuur en luchtvochtigheid te meten. De ESP8266 en ESP32 zijn microcontrollers, hele kleine en goedkope computertjes die kunnen communiceren met andere computers via WiFi. Bijvoorbeeld met een MQTT broker.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Een MQTT broker is een programma dat helpt bij het uitwisselen van informatie tussen computers. Dit gebeurt meestal via een WiFi-netwerk.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"MicroPython is een computerprogramma dat ik gebruik voor de ESP's.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Succes met de cursus,","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Rob Bontekoe","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"info: Op deze cursus is de MIT licentie van toepassing\nDe MIT-licentie is een soort regel die zegt dat mensen het mogen gebruiken, kopiëren, wijzigen en delen van een bepaald programma op hun computer of andere apparaat, zolang ze de maker ervan duidelijk vermelden en het programma niet verkopen zonder toestemming. Dit is een handige manier om ervoor te zorgen dat mensen het programma kunnen gebruiken om te leren of om er dingen mee te maken, zonder dat ze daar geld voor hoeven te betalen.","category":"page"},{"location":"#Voor-wie-is-deze-cursus-bestemd?","page":"Toepassingen met de Raspberry Pi","title":"Voor wie is deze cursus bestemd?","text":"","category":"section"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"De cursus is bestemd voor kinderen van 8 tot 14 jaar.","category":"page"},{"location":"#Wat-is-een-Raspberry-Pi?","page":"Toepassingen met de Raspberry Pi","title":"Wat is een Raspberry Pi?","text":"","category":"section"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Een Raspberry Pi is een kleine computer die je kunt gebruiken om allerlei leuke dingen mee te doen, zoals je eigen website maken of een spel spelen. Er zijn een paar dingen die Raspberry Pi's aantrekkelijk maken om te gebruiken:","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Ze zijn goedkoop: je kunt al een Raspberry Pi kopen voor een paar tientjes.\nZe zijn klein: je kunt een Raspberry Pi gemakkelijk meenemen in je tas of zak.\nZe gebruiken weinig stroom: omdat ze klein en niet zo krachtig zijn, gebruiken ze niet zoveel stroom als gewone computers. Je kunt de Raspberry Pi dus dag en nacht aan laten staan zonder dat het veel stroom kost.\nZe zijn goed voor het leren van computers: een goede manier om te leren hoe computers werken zonder dat je bang hoeft te zijn dat je iets kapot maakt.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"(Image: Raspberry Pi 3B+)","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Raspberry Pi 3B+","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Deze cursus is gemaakt om te werken op een Raspberry Pi 3B+. We hebben het getest om ervoor te zorgen dat alles goed werkt op die computer.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"<img src=\"https://seeklogo.com/images/R/raspberry-pi-logo-8240ABBDFE-seeklogo.com.png\" alt=\"Raspberry Pi logo\" width=\"100\">","category":"page"},{"location":"#Wat-is-Docker?","page":"Toepassingen met de Raspberry Pi","title":"Wat is Docker?","text":"","category":"section"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Docker is een programma dat helpt om software op verschillende computers te laten werken. Het maakt gebruik van containers, die zijn als kleine pakketjes software die alles bevatten wat nodig is om een programma te laten werken. Het is net zoals een koffer waarin je al je spullen in stopt voordat je op vakantie gaat, zodat je alles bij je hebt. Zo werkt het ook met Docker, alleen dan met software in plaats van spullen.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Er zijn twee soorten processoren, of \"hersenen\", waar computers mee werken: ARM-processoren en X86-processoren. Een Raspberry Pi heeft een ARM-processor. PC's hebben meestal een X86-processor.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Een container moet aangepast zijn aan het type processor waarop je het wilt gebruiken. Dus als je bijvoorbeeld een website hebt gemaakt die je op een Raspberry Pi wilt laten werken, moet je een container hebben die is aangepast aan de ARM-processor van de Raspberry Pi. Als je diezelfde website op een PC wilt laten werken, moet je een container hebben die aangepast is aan de X86-processor van de PC.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Met Docker kan de ontwikkelaar ervoor zorgen dat de container automatisch wordt aangepast aan het type processor waarop het wordt uitgevoerd. Zo hoef je geen zorgen te maken dat het programma niet goed werkt, omdat Docker ervoor zorgt dat het wél goed werkt.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"<img src=\"https://seeklogo.com/images/D/docker-logo-6D6F987702-seeklogo.com.png\" alt=\"Docker logo\" width=\"120\">","category":"page"},{"location":"#Wat-is-Portainer?","page":"Toepassingen met de Raspberry Pi","title":"Wat is Portainer?","text":"","category":"section"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Portainer is een programma dat je kunt gebruiken om Docker te beheren. Als je Docker gebruikt, heb je misschien verschillende containers die je wilt starten, stoppen of verwijderen. Portainer maakt het makkelijker om deze taken uit te voeren door een gebruiksvriendelijke grafische interface te bieden waarmee je de containers kunt beheren.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Stel je voor dat je een doos met speelgoed hebt, en je wilt weten welke speelgoedjes erin zitten. Met Portainer is het net alsof je de doos kunt openen en de speelgoedjes kunt zien, en je kunt ook de speelgoedjes pakken en weer terugleggen in de doos als je wilt. Zo kun je gemakkelijk zien welke containers je hebt en wat ze doen, en kun je ze gemakkelijk beheren.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Portainer is dus een soort \"beheerprogramma\" voor Docker, dat ervoor zorgt dat het makkelijker is om Docker te gebruiken en te beheren. Als je veel containers hebt of als je nieuw bent met Docker, kan Portainer je helpen om alles beter te begrijpen en te gebruiken.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"<img src=\"https://seeklogo.com/images/P/portainer-wordmark-logo-9C4DA30483-seeklogo.com.png\" alt=\"Portainer logo\" width=\"300\">","category":"page"},{"location":"#Wat-is-Node-RED?","page":"Toepassingen met de Raspberry Pi","title":"Wat is Node-RED?","text":"","category":"section"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Node-RED is een programma dat je kunt gebruiken om eenvoudig kleine programma's, of \"flows\", te maken. Dit kun je doen door knoppen en andere elementen op een scherm te slepen en te plakken, en door ze met elkaar te verbinden met lijnen.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Stel je voor dat je een spel hebt waarbij je allerlei opdrachten moet doen. Met Node-RED is het net alsof je de opdrachten op een rijtje kunt leggen, en door middel van pijlen kunt aangeven wat er moet gebeuren als je een opdracht hebt voltooid. Zo kun je bijvoorbeeld aangeven dat als je klaar bent met opruimen, je een film mag kijken.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Node-RED wordt vaak gebruikt om dingen te automatiseren of om informatie van verschillende bronnen te verzamelen en te verwerken. Bijvoorbeeld, je kunt Node-RED gebruiken om te controleren of er nieuwe e-mails zijn, of om de temperatuur in huis te meten en de verwarming aan te zetten als het te koud wordt.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"<img src=\"https://seeklogo.com/images/N/node-red-logo-03ED3C7805-seeklogo.com.png\" alt=\"Node-RED logo\" width=\"100\">","category":"page"},{"location":"#Wat-is-een-MQTT-broker?","page":"Toepassingen met de Raspberry Pi","title":"Wat is een MQTT-broker?","text":"","category":"section"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"MQTT-broker is een programma dat gebruikt wordt om informatie te versturen en ontvangen via wifi. Het gebeurt via een protocol dat MQTT heet, dat staat voor \"Message Queuing Telemetry Transport\".","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Alle apparaten die willen communiceren met de MQTT-broker moeten zich eerst \"registreren\". Dit betekent dat ze zich aanmelden bij de MQTT-broker en laten weten dat ze informatie willen verzenden of ontvangen.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Node-RED is een programma dat makkelijk te gebruiken is om te communiceren met een MQTT-broker via wifi. Het heeft speciaal ontworpen voorzieningen om dit te doen.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"<img src=\"https://seeklogo.com/images/M/mqtt-logo-C92D58AA94-seeklogo.com.png\" alt=\"MQTT logo\" width=\"200\">","category":"page"},{"location":"#Wat-is-een-ESP8266-of-een-ESP32?","page":"Toepassingen met de Raspberry Pi","title":"Wat is een ESP8266 of een ESP32?","text":"","category":"section"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"De ESP8266 en de ESP32 zijn microcontrollers, wat betekent dat het kleine computers zijn die zijn ontworpen om simpele taken uit te voeren.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"<img src=\"https://elektronicavoorjou.nl/wp-content/uploads/2019/12/NodeMcu-Lua-WIFI-Board-ESP8266-CP2102-1.jpg\" alt=\"ESP8266\" width=\"300\">","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"ESP8266 van elektronicavoorjou.nl die ik gebruik om de output van een DHT22 naar mijn Raspberry Pi te sturen","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Ze hebben beide een wifi-verbinding, wat betekent dat ze kunnen communiceren met andere apparaten. Dit maakt ze handig voor projecten waarbij je wilt dat de microcontroller via wifi kan communiceren. Ze worden vaak gebruikt in elektronische projecten bijvoorbeeld in combinatie met een DHT22, om de temperatuur in een ruimte te meten en door te geven aan een MQTT-broker.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"<img src=\"https://elektronicavoorjou.nl/wp-content/uploads/2021/01/DHT22-1.jpg\" alt=\"DHT22\" width=\"300\">","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"DHT22 van elektronicavoorjou.nl die de temperatuur en de luchtvochtigheidsgad meet","category":"page"},{"location":"#Wat-is-een-sensor-en-een-slimme-meter?","page":"Toepassingen met de Raspberry Pi","title":"Wat is een sensor en een slimme meter?","text":"","category":"section"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Een sensor is een apparaat dat informatie kan detecteren of meten, zoals temperatuur, licht of beweging. Sensoren worden vaak gebruikt in elektronische projecten of apparaten om informatie te verzamelen over de omgeving.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Stel je voor dat je een apparaat wilt maken dat aangeeft wanneer het te koud of te warm wordt in een kamer. Je kunt dan een temperatuursensor gebruiken om de temperatuur te meten en het apparaat aan te sturen om een melding te geven als het te koud of te warm wordt. Zo kun je gemakkelijk zien wanneer je de verwarming aan of uit moet zetten.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Een slimme meter is een specifiek soort sensor die wordt gebruikt om energieverbruik te meten. Slimme meters zijn verbonden met het internet, zodat je op afstand kunt zien hoeveel energie je verbruikt en hoeveel dit kost. Dit kan handig zijn als je wilt weten hoe je energieverbruik verminderen of als je wilt weten hoeveel geld je bespaart door energiezuinig te zijn.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Sensoren en slimme meters zijn dus apparaten die informatie kunnen detecteren of meten. Ze kunnen worden gebruikt om allerlei soorten informatie te verzamelen, zoals temperatuur of energieverbruik, en kunnen worden gebruikt in elektronische projecten of apparaten om de omgeving te monitoren.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"<img src=\"https://www.sossolutions.nl/media/catalog/product/cache/5df5c040ed8cd3972c59a8e190e44350/1/_/1.8m_kabel.png\" alt=\"P1 kabel\" width=\"300\">","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"P1 Kabel van www.sossolutions.nl die ik gebruik om mijn Slimme Meter met mijn Raspberry Pi te koppelen","category":"page"},{"location":"#Wat-is-MicroPython?","page":"Toepassingen met de Raspberry Pi","title":"Wat is MicroPython?","text":"","category":"section"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"MicroPython is een specifieke versie van de programmeertaal Python die is ontworpen om te draaien op kleine computers, zoals microcontrollers. MicroPython is handig als je wilt dat je programma's snel en efficiënt werken op een kleine computer, zoals een microcontroller.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Stel je voor dat je een robot wilt maken die zichzelf kan bewegen en obstakels kan ontwijken. Je kunt MicroPython gebruiken om de robot te programmeren, zodat hij weet hoe hij moet bewegen en hoe hij op obstakels moet reageren. Zo kun je gemakkelijk een programma maken dat de robot laat bewegen en navigeren.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"MicroPython wordt vaak gebruikt in elektronische projecten waarbij een kleine computer, zoals een microcontroller, wordt gebruikt. Het is een handige manier om programma's te schrijven die efficiënt werken op een kleine computer en die gemakkelijk te begrijpen zijn.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"Tijdens de cursus gebruiken we het programma Thonny om MicroPython code te maken.","category":"page"},{"location":"","page":"Toepassingen met de Raspberry Pi","title":"Toepassingen met de Raspberry Pi","text":"<img src=\"https://seeklogo.com/images/M/micropython-logo-6255D51390-seeklogo.com.png\" alt=\"MicroPython logo\" width=\"80\">","category":"page"}]
}
