<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>MQTT broker installeren · RASPIKIDS</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="RASPIKIDS logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">RASPIKIDS</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Toepassingen met de Raspberry Pi</a></li><li><a class="tocitem" href="../blog/">Blog</a></li><li><span class="tocitem">Sectie 1 - Basis installaties</span><ul><li><a class="tocitem" href="../chapter1/">Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+</a></li><li><a class="tocitem" href="../chapter2/">Communiceren met de Raspberry Pi</a></li><li><a class="tocitem" href="../chapter3/">Docker installeren</a></li><li><a class="tocitem" href="../chapter4/">Portainer installeren</a></li><li><a class="tocitem" href="../chapter5/">Node-RED installeren</a></li></ul></li><li><span class="tocitem">Sectie 2 - Algemene Node-RED toepassingen</span><ul><li><a class="tocitem" href="../chapter6/">Website bouwen met Node-RED</a></li></ul></li><li><span class="tocitem">Sectie 3 - Sensoren</span><ul><li class="is-active"><a class="tocitem" href>MQTT broker installeren</a><ul class="internal"><li><a class="tocitem" href="#Wat-je-nodig-hebt"><span>Wat je nodig hebt</span></a></li><li><a class="tocitem" href="#Wat-je-gaat-doen"><span>Wat je gaat doen</span></a></li><li><a class="tocitem" href="#Stap-1-ChatGPT-om-docker-compose.yml-bestand-vragen"><span>Stap 1 - ChatGPT om docker-compose.yml bestand vragen</span></a></li><li><a class="tocitem" href="#Stap-2-Installeren-Mosquittto"><span>Stap 2 - Installeren Mosquittto</span></a></li><li><a class="tocitem" href="#Samenvatting"><span>Samenvatting</span></a></li></ul></li><li><a class="tocitem" href="../chapter8/">Temperatuur meten</a></li><li><a class="tocitem" href="../chapter9/">Node-RED dashboard programma maken</a></li></ul></li><li><span class="tocitem">Sectie 4 - Slimme meter</span><ul><li><a class="tocitem" href="../chapter10/">Domoticz installeren</a></li><li><a class="tocitem" href="../chapter11/">Slimme meter aansluiten</a></li><li><a class="tocitem" href="../chapter12/">Stroom- en gasverbruik op het dashboard weergeven</a></li></ul></li><li><span class="tocitem">Sectie 5 - InfluxDB en Grafana</span><ul><li><a class="tocitem" href="../chapter13/">Grafana en InfluxDB installeren</a></li><li><a class="tocitem" href="../chapter14/">Gegevens opslaan in Influx met Node-RED</a></li><li><a class="tocitem" href="../chapter15/">Gegevens grafisch weergeven met Grafana</a></li></ul></li><li><a class="tocitem" href="../appendix/">Bijlage</a></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Sectie 3 - Sensoren</a></li><li class="is-active"><a href>MQTT broker installeren</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>MQTT broker installeren</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/rbontekoe/RASPIKIDS/blob/master/docs/src/chapter7.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="MQTT-broker-installeren"><a class="docs-heading-anchor" href="#MQTT-broker-installeren">MQTT broker installeren</a><a id="MQTT-broker-installeren-1"></a><a class="docs-heading-anchor-permalink" href="#MQTT-broker-installeren" title="Permalink"></a></h1><p><em>Een MQTT broker is een programma waarmee we gegevens kunnen uitwisselen tussen verschillende computers of sensoren.</em></p><h3 id="Inhoud"><a class="docs-heading-anchor" href="#Inhoud">Inhoud</a><a id="Inhoud-1"></a><a class="docs-heading-anchor-permalink" href="#Inhoud" title="Permalink"></a></h3><ul><li><a href="#MQTT-broker-installeren">MQTT broker installeren</a></li><li class="no-marker"><ul><li><a href="#Wat-je-nodig-hebt">Wat je nodig hebt</a></li><li><a href="#Wat-je-gaat-doen">Wat je gaat doen</a></li><li><a href="#Stap-1-ChatGPT-om-docker-compose.yml-bestand-vragen">Stap 1 - ChatGPT om docker-compose.yml bestand vragen</a></li><li><a href="#Stap-2-Installeren-Mosquittto">Stap 2 - Installeren Mosquittto</a></li><li><a href="#Samenvatting">Samenvatting</a></li></ul></li></ul><h2 id="Wat-je-nodig-hebt"><a class="docs-heading-anchor" href="#Wat-je-nodig-hebt">Wat je nodig hebt</a><a id="Wat-je-nodig-hebt-1"></a><a class="docs-heading-anchor-permalink" href="#Wat-je-nodig-hebt" title="Permalink"></a></h2><ul><li>Een Raspberry Pi 3B+ met het besturingssysteem Ubuntu Server 22.04.</li><li>Docker, Portainer en Node-RED zijn geinstalleerd.</li></ul><h2 id="Wat-je-gaat-doen"><a class="docs-heading-anchor" href="#Wat-je-gaat-doen">Wat je gaat doen</a><a id="Wat-je-gaat-doen-1"></a><a class="docs-heading-anchor-permalink" href="#Wat-je-gaat-doen" title="Permalink"></a></h2><p>Stap 1: ChatGPT om docker-compose.yml bestand vragen.</p><p>Stap 2: Installeren Mosquittto.</p><h2 id="Stap-1-ChatGPT-om-docker-compose.yml-bestand-vragen"><a class="docs-heading-anchor" href="#Stap-1-ChatGPT-om-docker-compose.yml-bestand-vragen">Stap 1 - ChatGPT om docker-compose.yml bestand vragen</a><a id="Stap-1-ChatGPT-om-docker-compose.yml-bestand-vragen-1"></a><a class="docs-heading-anchor-permalink" href="#Stap-1-ChatGPT-om-docker-compose.yml-bestand-vragen" title="Permalink"></a></h2><p>Stel de volgende vraag aan chatGPT: maak een docker-compose.yml bestand voor mosquitto.</p><p>Ik kreeg als antwoord:</p><h3 id="docker-compose.yml"><a class="docs-heading-anchor" href="#docker-compose.yml">docker-compose.yml</a><a id="docker-compose.yml-1"></a><a class="docs-heading-anchor-permalink" href="#docker-compose.yml" title="Permalink"></a></h3><pre><code class="nohighlight hljs">version: &#39;3&#39;
services:
  mosquitto:
    image: eclipse-mosquitto
    ports:
      - &quot;1883:1883&quot;
    volumes:
      - mosquitto-data:/mosquitto/data
      - mosquitto-config:/mosquitto/config
    restart: unless-stopped

volumes:
  mosquitto-data:
  mosquitto-config:</code></pre><p>Deze configuratie maakt gebruik van de officiële Eclipse Mosquitto Docker-afbeelding (image) en maakt verbinding op poort 1883. Het configureert ook twee Docker-volumes voor de gegevens en configuratie van Mosquitto, zodat deze na het verwijderen van de container behouden blijven.</p><h2 id="Stap-2-Installeren-Mosquittto"><a class="docs-heading-anchor" href="#Stap-2-Installeren-Mosquittto">Stap 2 - Installeren Mosquittto</a><a id="Stap-2-Installeren-Mosquittto-1"></a><a class="docs-heading-anchor-permalink" href="#Stap-2-Installeren-Mosquittto" title="Permalink"></a></h2><table><tr><th style="text-align: left">Stap</th><th style="text-align: left">Actie</th></tr><tr><td style="text-align: left">1</td><td style="text-align: left">Kopieeer de gegevens uit <a href="#docker-compose.yml">docker-compose.yml</a> naar het klembord.</td></tr><tr><td style="text-align: left">2</td><td style="text-align: left">Open de browser en type in de adresbalk: <code>IP-adres_Raspberry_Pi:9000</code>. Dit zorgt dat je Portainer in je browser opent.</td></tr><tr><td style="text-align: left">3</td><td style="text-align: left">Zoek in de browser naar &quot;stacks&quot; en klik erop. Hierdoor opent het menu. <span>$\\$</span><img src="../assets/fig_7_1.png" alt="fig_7_1"/></td></tr><tr><td style="text-align: left">4</td><td style="text-align: left">Klik in het menu op &quot;Stacks&quot; om een overzicht te zien. <span>$\\$</span><img src="../assets/fig_7_2.png" alt="fig_7_2"/></td></tr><tr><td style="text-align: left">5</td><td style="text-align: left">Klik op de knop &quot;Add Stack&quot;.</td></tr><tr><td style="text-align: left">6</td><td style="text-align: left">Geef de Stack een naam door <code>mosquitto</code> in het veld &quot;Name&quot; te typen.</td></tr><tr><td style="text-align: left">7</td><td style="text-align: left">Klik op de eerste regel in het veld &quot;Web-editor&quot; en plak de tekst van het klembord door Ctrl + V te drukken. <span>$\\$</span><img src="../assets/fig_7_3.png" alt="fig_7_3"/></td></tr><tr><td style="text-align: left">8</td><td style="text-align: left">Klik op de knop &quot;Deploy the stack&quot; die onderaan de pagina staat.<span>$\\$</span><img src="../assets/fig_7_4.png" alt="fig_7_4"/></td></tr><tr><td style="text-align: left">9</td><td style="text-align: left">Ga naar het menu &quot;containers&quot; en kijk of de container begint .</td></tr><tr><td style="text-align: left"></td><td style="text-align: left"></td></tr></table><p>En dat is het! Je zou nu een werkende Mosquitto MQTT-broker moeten hebben binnen een Docker stack die beheerd wordt door Portainer. </p><h2 id="Samenvatting"><a class="docs-heading-anchor" href="#Samenvatting">Samenvatting</a><a id="Samenvatting-1"></a><a class="docs-heading-anchor-permalink" href="#Samenvatting" title="Permalink"></a></h2><p>Dit hoofdstuk gaat over het installeren van een programma genaamd MQTT broker, waarmee je gegevens kan uitwisselen tussen verschillende computers of sensoren. Om dit te doen heb je een Raspberry Pi 3B+ nodig met het besturingssysteem Ubuntu Server 22.04 en moet je Docker, Portainer en Node-RED geïnstalleerd hebben. Stap 1 is om ChatGPT te vragen om een docker-compose.yml bestand voor Mosquitto, de MQTT broker. Stap 2 is om de gegevens uit docker-compose.yml te kopiëren, Portainer te openen en een nieuwe stack aan te maken met de naam Mosquitto. Vervolgens plak je de gekopieerde tekst in het veld &quot;Web-editor&quot; en klik je op &quot;Deploy the stack&quot;. Als alles goed gaat, zou je nu een werkende Mosquitto MQTT-broker moeten hebben binnen een Docker stack die beheerd wordt door Portainer.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../chapter6/">« Website bouwen met Node-RED</a><a class="docs-footer-nextpage" href="../chapter8/">Temperatuur meten »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Friday 21 April 2023 12:18">Friday 21 April 2023</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
