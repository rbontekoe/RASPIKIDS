<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Gegevens opslaan in Influx met Node-RED · RASPIKIDS</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="RASPIKIDS logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">RASPIKIDS</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Toepassingen met de Raspberry Pi</a></li><li><a class="tocitem" href="../blog/">Blog</a></li><li><span class="tocitem">Sectie 1 - Basis installaties</span><ul><li><a class="tocitem" href="../chapter1/">Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+</a></li><li><a class="tocitem" href="../chapter2/">Communiceren met de Raspberry Pi</a></li><li><a class="tocitem" href="../chapter3/">Docker installeren</a></li><li><a class="tocitem" href="../chapter4/">Portainer installeren</a></li><li><a class="tocitem" href="../chapter5/">Node-RED installeren</a></li></ul></li><li><span class="tocitem">Sectie 2 - Algemene Node-RED toepassingen</span><ul><li><a class="tocitem" href="../chapter6/">Website bouwen met Node-RED</a></li></ul></li><li><span class="tocitem">Sectie 3 - Sensoren</span><ul><li><a class="tocitem" href="../chapter7/">MQTT broker installeren</a></li><li><a class="tocitem" href="../chapter8/">Temperatuur meten</a></li><li><a class="tocitem" href="../chapter9/">Node-RED dashboard programma maken</a></li></ul></li><li><span class="tocitem">Sectie 4 - Slimme meter</span><ul><li><a class="tocitem" href="../chapter10/">Domoticz installeren</a></li><li><a class="tocitem" href="../chapter11/">Slimme meter aansluiten</a></li><li><a class="tocitem" href="../chapter12/">Stroom- en gasverbruik op het dashboard weergeven</a></li></ul></li><li><span class="tocitem">Sectie 5 - InfluxDB en Grafana</span><ul><li><a class="tocitem" href="../chapter13/">Grafana en InfluxDB installeren</a></li><li class="is-active"><a class="tocitem" href>Gegevens opslaan in Influx met Node-RED</a><ul class="internal"><li><a class="tocitem" href="#Wat-je-nodig-hebt"><span>Wat je nodig hebt</span></a></li><li><a class="tocitem" href="#Wat-je-gaat-doen"><span>Wat je gaat doen</span></a></li><li><a class="tocitem" href="#Stap-1-InfluxDB-module-in-Node-RED-maken"><span>Stap 1 - InfluxDB module in Node-RED maken</span></a></li><li><a class="tocitem" href="#Stap-2-Sensor_data-database-maken"><span>Stap 2 - Sensor_data database maken</span></a></li><li><a class="tocitem" href="#Stap-3-Data-naar-database-wegschrijven"><span>Stap 3 - Data naar database wegschrijven</span></a></li><li><a class="tocitem" href="#Samenvatting"><span>Samenvatting</span></a></li></ul></li><li><a class="tocitem" href="../chapter15/">Gegevens grafisch weergeven met Grafana</a></li></ul></li><li><a class="tocitem" href="../appendix/">Bijlage</a></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Sectie 5 - InfluxDB en Grafana</a></li><li class="is-active"><a href>Gegevens opslaan in Influx met Node-RED</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Gegevens opslaan in Influx met Node-RED</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/rbontekoe/RASPIKIDS/blob/master/docs/src/chapter14.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Gegevens-opslaan-in-een-Influx-database-met-Node-RED"><a class="docs-heading-anchor" href="#Gegevens-opslaan-in-een-Influx-database-met-Node-RED">Gegevens opslaan in een Influx database met Node-RED</a><a id="Gegevens-opslaan-in-een-Influx-database-met-Node-RED-1"></a><a class="docs-heading-anchor-permalink" href="#Gegevens-opslaan-in-een-Influx-database-met-Node-RED" title="Permalink"></a></h1><p><em>In dit hoofdstuk leer je hoe je gegevens kunt opslaan in een speciaal programma genaamd Influx database. Dit programma is gemaakt om gegevens te bewaren, zoals bijvoorbeeld temperaturen of vochtigheid. We gebruiken Node-RED om de gegevens naar de Influx database te sturen. Zo kunnen we de gegevens later gemakkelijk terugvinden en bekijken.</em></p><h3 id="Inhoud"><a class="docs-heading-anchor" href="#Inhoud">Inhoud</a><a id="Inhoud-1"></a><a class="docs-heading-anchor-permalink" href="#Inhoud" title="Permalink"></a></h3><ul><li><a href="#Gegevens-opslaan-in-een-Influx-database-met-Node-RED">Gegevens opslaan in een Influx database met Node-RED</a></li><li class="no-marker"><ul><li><a href="#Wat-je-nodig-hebt">Wat je nodig hebt</a></li><li><a href="#Wat-je-gaat-doen">Wat je gaat doen</a></li><li><a href="#Stap-1-InfluxDB-module-in-Node-RED-maken">Stap 1 - InfluxDB module in Node-RED maken</a></li><li><a href="#Stap-2-Sensor_data-database-maken">Stap 2 - Sensor_data database maken</a></li><li><a href="#Stap-3-Data-naar-database-wegschrijven">Stap 3 - Data naar database wegschrijven</a></li><li><a href="#Samenvatting">Samenvatting</a></li></ul></li></ul><h2 id="Wat-je-nodig-hebt"><a class="docs-heading-anchor" href="#Wat-je-nodig-hebt">Wat je nodig hebt</a><a id="Wat-je-nodig-hebt-1"></a><a class="docs-heading-anchor-permalink" href="#Wat-je-nodig-hebt" title="Permalink"></a></h2><ul><li>Een Raspberry Pi 3B+ met het besturingssysteem Ubuntu Server 22.04.</li><li>Docker, Portainer, Node-RED, InfluxDB en Grafana zijn geinstalleerd.</li><li>Node-RED programma uit de les 9 <a href="../chapter9/index.html">Node-RED dashboard programma maken</a>.</li><li>De Raspberry Pi heeft verbinding met het Internet.</li></ul><h2 id="Wat-je-gaat-doen"><a class="docs-heading-anchor" href="#Wat-je-gaat-doen">Wat je gaat doen</a><a id="Wat-je-gaat-doen-1"></a><a class="docs-heading-anchor-permalink" href="#Wat-je-gaat-doen" title="Permalink"></a></h2><p>Stap 1: InfluxDB module in Node-RED maken.</p><p>Stap 2: Sensor_data database maken.</p><p>Stap 3: Data naar database wegschrijven</p><h2 id="Stap-1-InfluxDB-module-in-Node-RED-maken"><a class="docs-heading-anchor" href="#Stap-1-InfluxDB-module-in-Node-RED-maken">Stap 1 - InfluxDB module in Node-RED maken</a><a id="Stap-1-InfluxDB-module-in-Node-RED-maken-1"></a><a class="docs-heading-anchor-permalink" href="#Stap-1-InfluxDB-module-in-Node-RED-maken" title="Permalink"></a></h2><p><img src="../assets/fig_13_5.png" alt="fig_13_4"/></p><h2 id="Stap-2-Sensor_data-database-maken"><a class="docs-heading-anchor" href="#Stap-2-Sensor_data-database-maken">Stap 2 - Sensor_data database maken</a><a id="Stap-2-Sensor_data-database-maken-1"></a><a class="docs-heading-anchor-permalink" href="#Stap-2-Sensor_data-database-maken" title="Permalink"></a></h2><p>CREATE DATABASE sensor_data</p><h2 id="Stap-3-Data-naar-database-wegschrijven"><a class="docs-heading-anchor" href="#Stap-3-Data-naar-database-wegschrijven">Stap 3 - Data naar database wegschrijven</a><a id="Stap-3-Data-naar-database-wegschrijven-1"></a><a class="docs-heading-anchor-permalink" href="#Stap-3-Data-naar-database-wegschrijven" title="Permalink"></a></h2><p>USE sensor_data</p><p>influx -precision &#39;rfc3339&#39; # datum in yyyy-mm-dd formaat</p><p>In Node-RED: JSON object creeert de tabel &quot;test&quot;, die staat gedefinieerd in de node &quot;influxdb out&quot; onder measurments. Aantal items bepaalt aantal kolommen, naast de eerste kolom die datum en tijd bevat. {     temp: Number(myval),   # de meting     type: &quot;temp&quot; ,         # additionele informatie     locatie: &quot;LR&quot;          # additionele infromatie }</p><p>select * from test =&gt;</p><p>2023-02-23T14:10:11.630083951Z LR      17.9 temp 2023-02-23T14:10:17.685277494Z LR      18   temp 2023-02-23T14:10:23.700484434Z LR      17.9 temp</p><h2 id="Samenvatting"><a class="docs-heading-anchor" href="#Samenvatting">Samenvatting</a><a id="Samenvatting-1"></a><a class="docs-heading-anchor-permalink" href="#Samenvatting" title="Permalink"></a></h2></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../chapter13/">« Grafana en InfluxDB installeren</a><a class="docs-footer-nextpage" href="../chapter15/">Gegevens grafisch weergeven met Grafana »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Tuesday 28 February 2023 13:02">Tuesday 28 February 2023</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
