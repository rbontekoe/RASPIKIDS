<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>11 Slimme meter aansluiten · RASPIKIDS</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="RASPIKIDS logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">RASPIKIDS</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Toepassingen met de Raspberry Pi</a></li><li><a class="tocitem" href="../blog/">Blog</a></li><li><span class="tocitem">Sectie 1 - Basis installaties</span><ul><li><a class="tocitem" href="../chapter1/">1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+</a></li><li><a class="tocitem" href="../chapter2/">2 Communiceren met de Raspberry Pi</a></li><li><a class="tocitem" href="../chapter3/">3 Docker installeren</a></li><li><a class="tocitem" href="../chapter4/">4 Portainer installeren</a></li><li><a class="tocitem" href="../chapter5/">5 Node-RED installeren</a></li></ul></li><li><span class="tocitem">Sectie 2 - Algemene Node-RED toepassingen</span><ul><li><a class="tocitem" href="../chapter6/">6 Website bouwen met Node-RED</a></li></ul></li><li><span class="tocitem">Sectie 3 - Sensoren</span><ul><li><a class="tocitem" href="../chapter7/">7 MQTT broker installeren</a></li><li><a class="tocitem" href="../chapter8/">8 Temperatuur meten</a></li><li><a class="tocitem" href="../chapter9/">9 Node-RED dashboard programma maken</a></li></ul></li><li><span class="tocitem">Sectie 4 - Slimme meter</span><ul><li><a class="tocitem" href="../chapter10/">10 Domoticz installeren</a></li><li class="is-active"><a class="tocitem" href>11 Slimme meter aansluiten</a><ul class="internal"><li><a class="tocitem" href="#Wat-je-nodig-hebt"><span>Wat je nodig hebt</span></a></li><li><a class="tocitem" href="#Wat-je-gaat-doen"><span>Wat je gaat doen</span></a></li><li><a class="tocitem" href="#Samenvatting"><span>Samenvatting</span></a></li></ul></li><li><a class="tocitem" href="../chapter12/">12 Stroom- en gasverbruik op het dashboard weergeven</a></li></ul></li><li><a class="tocitem" href="../appendix/">Bijlage</a></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Sectie 4 - Slimme meter</a></li><li class="is-active"><a href>11 Slimme meter aansluiten</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>11 Slimme meter aansluiten</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/rbontekoe/RASPIKIDS/blob/master/docs/src/chapter11.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Slimme-meter-aansluitengeïnstalleerd"><a class="docs-heading-anchor" href="#Slimme-meter-aansluitengeïnstalleerd">Slimme meter aansluitengeïnstalleerd</a><a id="Slimme-meter-aansluitengeïnstalleerd-1"></a><a class="docs-heading-anchor-permalink" href="#Slimme-meter-aansluitengeïnstalleerd" title="Permalink"></a></h1><p><em>We gaan een slimme meter aansluiten. Een slimme meter is een meter die we gebruiken om te meten hoeveel stroom en gas we verbruiken in huis. We gaan dit doen met behulp van een Domoticz container. We leren ook hoe we de gegevens als MQTT bericht naar de Node-red broker kunnen versturen.</em></p><h3 id="Inhoud"><a class="docs-heading-anchor" href="#Inhoud">Inhoud</a><a id="Inhoud-1"></a><a class="docs-heading-anchor-permalink" href="#Inhoud" title="Permalink"></a></h3><ul><li><a href="../chapter10/#Domoticz-installeren">Domoticz installeren</a></li><li class="no-marker"><ul><li><a href="../chapter10/#Wat-je-nodig-hebt">Wat je nodig hebt</a></li><li><a href="../chapter10/#Wat-je-gaat-doen">Wat je gaat doen</a></li><li><a href="../chapter10/#Samenvatting">Samenvatting</a></li></ul></li></ul><h2 id="Wat-je-nodig-hebt"><a class="docs-heading-anchor" href="#Wat-je-nodig-hebt">Wat je nodig hebt</a><a id="Wat-je-nodig-hebt-1"></a><a class="docs-heading-anchor-permalink" href="#Wat-je-nodig-hebt" title="Permalink"></a></h2><ul><li>Een Raspberry Pi 3B+ met het besturingssysteem Ubuntu Server 22.04.</li><li>Docker, Portainer en Domoticz zijn geïnstalleerd.</li><li>De Raspberry Pi heeft verbinding met het Internet.</li><li><a href="https://www.sossolutions.nl/slimme-meter-kabel">P1 Slimme meter kabel</a>.</li></ul><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>Controleer of je slimme meter die je thuis gebruikt in het lijstje staat van de kabel en wat de snelheid van de omzetting moet zijn (9600 of 115200). Zelf heb ik een Kaifa MC304 die met een snelheid van 115200 Baud seriele gegevens naar parallel omzet. De kabel heeft aan de ene kant een USB aansluiting en aan de andere kant een telefoonaansluiting (rj11-connector).</p></div></div><h2 id="Wat-je-gaat-doen"><a class="docs-heading-anchor" href="#Wat-je-gaat-doen">Wat je gaat doen</a><a id="Wat-je-gaat-doen-1"></a><a class="docs-heading-anchor-permalink" href="#Wat-je-gaat-doen" title="Permalink"></a></h2><p>Stap 1 - USB van de kabel op de Raspberry Pi aansluiten.</p><p>Stap 2 - Voeding aanzetten van de Raspberry Pi.</p><p>Stap 3 - Ander gedeelte van de kabel aansluiten op je Slimme Meter.</p><p>Stap 4 - Maak een device aan voor power en voor gas.</p><p>De P1-kabel wordt gebruikt om de gegevens van de slimme meter naar de Raspberry Pi te verzenden, zodat je in Domoticz kunt zien hoeveel elektriciteit of gas je hebt verbruikt.</p><h3 id="Stap-1-USB-van-de-kabel-op-de-Raspberry-Pi-aansluiten"><a class="docs-heading-anchor" href="#Stap-1-USB-van-de-kabel-op-de-Raspberry-Pi-aansluiten">Stap 1 - USB van de kabel op de Raspberry Pi aansluiten</a><a id="Stap-1-USB-van-de-kabel-op-de-Raspberry-Pi-aansluiten-1"></a><a class="docs-heading-anchor-permalink" href="#Stap-1-USB-van-de-kabel-op-de-Raspberry-Pi-aansluiten" title="Permalink"></a></h3><p>Sluit de P1 kabel aan op de Raspberry Pi.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>Wanneer je een USB P1-kabel aansluit op een Raspberry Pi 3B+, wordt de seriële poort (ook bekend als ttyUSB0) toegewezen aan de verbinding. Hier is een uitleg over hoe dit werkt:</p><p>USB P1-kabel: Een USB P1-kabel is een specifiek type USB-kabel dat wordt gebruikt om verbinding te maken met slimme energiemeters, zoals de Nederlandse P1 Slimme Meter. Deze kabels hebben aan de ene kant een USB-connector en aan de andere kant een RJ11-connector die in de P1-poort van de energiemeter wordt gestoken.</p><p>Raspberry Pi 3B+: De Raspberry Pi 3B+ is een populaire single-board computer die verschillende I/O-poorten en interfaces heeft, waaronder USB-poorten. Deze USB-poorten kunnen worden gebruikt om externe apparaten, zoals de USB P1-kabel, aan te sluiten.</p><p>TTY: TTY staat voor &quot;teletypewriter&quot; en verwijst naar de seriële poorten op een computer of microcontroller. In Linux-systemen, zoals de Raspberry Pi, worden seriële poorten vaak weergegeven als /dev/ttyUSB0, /dev/ttyUSB1, enz., afhankelijk van het aantal aangesloten apparaten.</p><p>Wanneer je de USB P1-kabel op een vrije USB-poort van de Raspberry Pi 3B+ aansluit, zal het besturingssysteem van de Raspberry Pi de kabel detecteren en automatisch een apparaatbestand toewijzen, zoals /dev/ttyUSB0. Dit bestand vertegenwoordigt de verbinding met de P1-poort van de slimme energiemeter.</p><p>Je kunt dit apparaatbestand gebruiken om gegevens van de slimme energiemeter te lezen. Bijvoorbeeld, als je programma&#39;s of scripts schrijft, kun je de /dev/ttyUSB0-interface gebruiken om te communiceren met de slimme energiemeter en gegevens zoals energieverbruik, spanning of stroomsterkte uit te lezen.</p><p>Het is belangrijk op te merken dat het toewijzen van de ttyUSB0-aanduiding niet uniek is voor de Raspberry Pi 3B+. Het hangt af van het besturingssysteem en de configuratie. Het kan variëren afhankelijk van het aantal aangesloten USB-apparaten en de volgorde waarin ze worden gedetecteerd. Dus als je meerdere USB-apparaten hebt aangesloten op je Raspberry Pi, kan het zijn dat de P1-kabel een andere ttyUSB-poort toegewezen krijgt, zoals ttyUSB1.</p></div></div><h3 id="Stap-2-Voeding-aanzetten-van-de-Raspberry-Pi"><a class="docs-heading-anchor" href="#Stap-2-Voeding-aanzetten-van-de-Raspberry-Pi">Stap 2 - Voeding aanzetten van de Raspberry Pi</a><a id="Stap-2-Voeding-aanzetten-van-de-Raspberry-Pi-1"></a><a class="docs-heading-anchor-permalink" href="#Stap-2-Voeding-aanzetten-van-de-Raspberry-Pi" title="Permalink"></a></h3><p>Sluit de voeding aan op de Raspery Pi en steek de stekker van de voeding in het stopcontact. </p><h3 id="Stap-3-Ander-gedeelte-van-de-kabel-aansluiten-op-je-Slimme-Meter"><a class="docs-heading-anchor" href="#Stap-3-Ander-gedeelte-van-de-kabel-aansluiten-op-je-Slimme-Meter">Stap 3 - Ander gedeelte van de kabel aansluiten op je Slimme Meter</a><a id="Stap-3-Ander-gedeelte-van-de-kabel-aansluiten-op-je-Slimme-Meter-1"></a><a class="docs-heading-anchor-permalink" href="#Stap-3-Ander-gedeelte-van-de-kabel-aansluiten-op-je-Slimme-Meter" title="Permalink"></a></h3><ol><li><p>Even wachten totdat de Raspberry Pi is opgestart en steek vervolgens de andere kant van de P1 kabel in de Slimme Meter.</p></li><li><p>Ga naar je internet browser en typ <code>IP-adres_Raspberry_Pi:8081</code>.</p></li><li><p>Klik op het tabblad <strong>Setup</strong> en kies <strong>Hardware</strong>.</p></li><li><p>Maak dan een P1 verbinding met de volgende informatie:</p></li></ol><p><img src="../assets/fig_11_1.png" alt="fig_11_1"/></p><ul><li>Enabled schakelaar: Aan (=groen)</li><li>Naam: p1</li><li>Log level/Info/Status/Error scakelaars: Aan</li><li>Type: Smart Meter P1</li><li>Serial Port: /dev/ttyUSB0</li><li>Data Timeout: disabled</li><li>Baudrate: 9600 of 115200</li><li>CRC message validation schakelaar: Aan</li><li>Rate Limit: 0</li></ul><p>Druk op de toets <strong>Add</strong>.</p><h3 id="Stap-4-Maak-een-device-aan-voor-power-en-voor-gas"><a class="docs-heading-anchor" href="#Stap-4-Maak-een-device-aan-voor-power-en-voor-gas">Stap 4 - Maak een device aan voor power en voor gas</a><a id="Stap-4-Maak-een-device-aan-voor-power-en-voor-gas-1"></a><a class="docs-heading-anchor-permalink" href="#Stap-4-Maak-een-device-aan-voor-power-en-voor-gas" title="Permalink"></a></h3><ol><li><p>Kies op de <strong>Setup</strong> tab voor <strong>Devices</strong>. <span>$\\$</span><img src="../assets/fig_11_2.png" alt="fig_11_1"/></p></li><li><p>Activeer <strong>Power</strong> en <strong>Gas</strong> door op het groene pijltje naar rechts te klikken.</p></li><li><p>De pijltjes worden vervolgens zwart en wijzen naar links als teken dat ze geactiveerd zijn.</p></li><li><p>Uitgebreide gegevens ziet je onder de tab <strong>Utility</strong> en <strong>Dashboard</strong>.</p></li><li><p>Onder <strong>Utlity</strong>  verschijnen grafieken als je op de toets <strong>log</strong> klikt.</p></li></ol><h2 id="Samenvatting"><a class="docs-heading-anchor" href="#Samenvatting">Samenvatting</a><a id="Samenvatting-1"></a><a class="docs-heading-anchor-permalink" href="#Samenvatting" title="Permalink"></a></h2><p>We gaan een slimme meter aansluiten, die meet hoeveel stroom en gas we gebruiken in huis. Dit doen we met een Domoticz container en sturen de gegevens als MQTT bericht naar de Node-red broker. Om dit te doen hebben we een Raspberry Pi nodig die verbinding heeft met het internet en een P1 slimme meter kabel. Voordat we beginnen, moeten we controleren of onze slimme meter in de lijst van kabels staat en wat de snelheid van de omzetting moet zijn (9600 of 115200). We gebruiken een kabel met een USB-aansluiting aan de ene kant en een telefoonaansluiting (rj11-connector) aan de andere kant. Als we dit hebben, kunnen we beginnen met het installeren van Domoticz en het aansluiten van de slimme meter op de Raspberry Pi. Daarna kunnen we de gegevens naar de Node-red broker sturen en bekijken hoeveel stroom en gas we gebruiken in ons huis.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../chapter10/">« 10 Domoticz installeren</a><a class="docs-footer-nextpage" href="../chapter12/">12 Stroom- en gasverbruik op het dashboard weergeven »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Thursday 6 July 2023 16:09">Thursday 6 July 2023</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
