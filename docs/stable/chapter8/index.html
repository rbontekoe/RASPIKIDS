<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Temperatuur meten · RASPIKIDS</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="RASPIKIDS logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">RASPIKIDS</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Toepassingen met de Raspberry Pi</a></li><li><a class="tocitem" href="../blog/">Blog</a></li><li><span class="tocitem">Sectie 1 - Basis installaties</span><ul><li><a class="tocitem" href="../chapter1/">Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+</a></li><li><a class="tocitem" href="../chapter2/">Communiceren met de Raspberry Pi</a></li><li><a class="tocitem" href="../chapter3/">Docker installeren</a></li><li><a class="tocitem" href="../chapter4/">Portainer installeren</a></li><li><a class="tocitem" href="../chapter5/">Node-RED installeren</a></li></ul></li><li><span class="tocitem">Sectie 2 - Algemene Node-RED toepassingen</span><ul><li><a class="tocitem" href="../chapter6/">Website bouwen met Node-RED</a></li></ul></li><li><span class="tocitem">Sectie 3 - Sensoren</span><ul><li><a class="tocitem" href="../chapter7/">MQTT broker installeren</a></li><li class="is-active"><a class="tocitem" href>Temperatuur meten</a><ul class="internal"><li><a class="tocitem" href="#Wat-je-nodig-hebt"><span>Wat je nodig hebt</span></a></li><li><a class="tocitem" href="#Wat-je-gaat-doen"><span>Wat je gaat doen</span></a></li><li><a class="tocitem" href="#Stap-1-Installeren-Thonny"><span>Stap 1 - Installeren Thonny</span></a></li><li><a class="tocitem" href="#Stap-2-Thonny-instellen-voor-de-ESP8266"><span>Stap 2 - Thonny instellen voor de ESP8266</span></a></li><li><a class="tocitem" href="#Stap-3-Software-op-ESP8266-zetten"><span>Stap 3 - Software op ESP8266 zetten</span></a></li><li class="toplevel"><a class="tocitem" href="#main.py-read-sensor-DHT22"><span>main.py - read sensor DHT22</span></a></li><li class="toplevel"><a class="tocitem" href="#mqtt-client-setup"><span>mqtt client setup</span></a></li><li><a class="tocitem" href="#Samenvatting"><span>Samenvatting</span></a></li></ul></li><li><a class="tocitem" href="../chapter9/">Node-RED dashboard programma maken</a></li></ul></li><li><span class="tocitem">Sectie 4 - Slimme meter</span><ul><li><a class="tocitem" href="../chapter10/">Domoticz installeren</a></li><li><a class="tocitem" href="../chapter11/">Slimme meter aansluiten</a></li><li><a class="tocitem" href="../chapter12/">Stroom- en gasverbruik op het dashboard weergeven</a></li></ul></li><li><span class="tocitem">Sectie 5 - InfluxDB en Grafana</span><ul><li><a class="tocitem" href="../chapter12/">Grafana en InfluxDB installeren</a></li><li><a class="tocitem" href="../chapter13/">Gegevens opslaan in Influx met Node-RED</a></li><li><a class="tocitem" href="../chapter14/">Gegevens grafisch weergeven met Grafana</a></li></ul></li><li><a class="tocitem" href="../appendix/">Bijlage</a></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Sectie 3 - Sensoren</a></li><li class="is-active"><a href>Temperatuur meten</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Temperatuur meten</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/rbontekoe/RASPIKIDS/blob/master/docs/src/chapter8.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Temperatuur-meten"><a class="docs-heading-anchor" href="#Temperatuur-meten">Temperatuur meten</a><a id="Temperatuur-meten-1"></a><a class="docs-heading-anchor-permalink" href="#Temperatuur-meten" title="Permalink"></a></h1><p><em>We gaan de temperatuur meten met een ESP8266 en een DHT22. De ESP8266 is een klein computerboardje waarmee we gegevens kunnen versturen en ontvangen via WiFi. De DHT22 is een sensor die we kunnen gebruiken om de temperatuur en luchtvochtigheid te meten.</em></p><h3 id="Contents"><a class="docs-heading-anchor" href="#Contents">Contents</a><a id="Contents-1"></a><a class="docs-heading-anchor-permalink" href="#Contents" title="Permalink"></a></h3><ul><li><a href="#Temperatuur-meten">Temperatuur meten</a></li><li class="no-marker"><ul><li><a href="#Wat-je-nodig-hebt">Wat je nodig hebt</a></li><li><a href="#Wat-je-gaat-doen">Wat je gaat doen</a></li><li><a href="#Stap-1-Installeren-Thonny">Stap 1 - Installeren Thonny</a></li><li><a href="#Stap-2-Thonny-instellen-voor-de-ESP8266">Stap 2 - Thonny instellen voor de ESP8266</a></li><li><a href="#Stap-3-Software-op-ESP8266-zetten">Stap 3 - Software op ESP8266 zetten</a></li></ul></li><li><a href="#main.py-read-sensor-DHT22">main.py - read sensor DHT22</a></li><li><a href="#mqtt-client-setup">mqtt client setup</a></li><li class="no-marker"><ul><li><a href="#Samenvatting">Samenvatting</a></li></ul></li></ul><h2 id="Wat-je-nodig-hebt"><a class="docs-heading-anchor" href="#Wat-je-nodig-hebt">Wat je nodig hebt</a><a id="Wat-je-nodig-hebt-1"></a><a class="docs-heading-anchor-permalink" href="#Wat-je-nodig-hebt" title="Permalink"></a></h2><ul><li><a href="https://elektronicavoorjou.nl/product/nodemcu-esp8266-wifi-board/">ESP8266</a></li><li><a href="https://elektronicavoorjou.nl/product/dht22-temp-vocht-sensor/">DHT22</a></li><li><a href="https://elektronicavoorjou.nl/product/micro-usb-kabel-1m/">USB A naar Micro USB kabel</a></li><li><a href="https://thonny.org/">Thonny</a></li></ul><p>Thonny is een softwareprogramma speciaal gemaakt voor kinderen en beginners om te programmeren. Het is eenvoudig te gebruiken en biedt hulpmiddelen die het makkelijker maken om te leren programmeren. Het is bedoeld om jou te helpen leren hoe je computers kunt laten doen wat jij wilt door het schrijven van code.</p><h2 id="Wat-je-gaat-doen"><a class="docs-heading-anchor" href="#Wat-je-gaat-doen">Wat je gaat doen</a><a id="Wat-je-gaat-doen-1"></a><a class="docs-heading-anchor-permalink" href="#Wat-je-gaat-doen" title="Permalink"></a></h2><ul><li>Stap 1: Installeren Thonny.</li><li>Stap 2: Thonny instellen voor de ESP8266.</li><li>Stap 3: Software op ESP8266 zetten.</li></ul><h2 id="Stap-1-Installeren-Thonny"><a class="docs-heading-anchor" href="#Stap-1-Installeren-Thonny">Stap 1 - Installeren Thonny</a><a id="Stap-1-Installeren-Thonny-1"></a><a class="docs-heading-anchor-permalink" href="#Stap-1-Installeren-Thonny" title="Permalink"></a></h2><p>Om Thonny te installeren, moet je de volgende stappen volgen:</p><ol><li>Open een webbrowser en zoek naar de <a href="https://thonny.org/">Thonny-website</a>.</li><li>Klik op de knop &quot;Download&quot; om het installatiebestand te downloaden.</li><li>Ga naar de map waarin het installatiebestand is gedownload en dubbelklik op het bestand.</li><li>Volg de stappen in de installatie-wizard om Thonny te installeren op je computer.</li><li>Nadat de installatie is voltooid, kun je Thonny openen door op het icoon te klikken dat is gemaakt op je bureaublad of door het te vinden via het startmenu.</li><li>En daar heb je het! Nu kun je Thonny gebruiken om te programmeren en te leren hoe computers werken. Veel plezier!</li></ol><p>Stap 3, het installeren van de ESP8266-driver, is belangrijk om verbinding te maken tussen de ESP8266 en je computer via de USB-kabel. Hier is een gedetailleerde uitleg:</p><p>Ga naar de Thonny-website: Ga naar de Thonny-website en klik op de knop &quot;Download&quot;.</p><p>Download de ESP8266-driver: Klik op de link naar de downloadpagina voor de ESP8266-driver en download het bestand.</p><p>Installeer de driver: Dubbelklik op het gedownloade bestand en volg de stappen in de installatiewizard om de ESP8266-driver te installeren. Het is belangrijk dat je de wizard tot het einde doorloopt om ervoor te zorgen dat de driver correct geïnstalleerd is.</p><p>Controleer of de driver geïnstalleerd is: Ga naar &quot;Apparaatbeheer&quot; op je computer en controleer of de ESP8266 in de lijst staat met &quot;USB-apparaten&quot;. Als je de driver correct hebt geïnstalleerd, moet het apparaat worden herkend door je computer.</p><p>Dit zijn de stappen om de ESP8266-driver te installeren en te controleren of deze correct is geïnstalleerd. Na het installeren van de driver kun je verder gaan met de volgende stappen in Thonny.</p><h2 id="Stap-2-Thonny-instellen-voor-de-ESP8266"><a class="docs-heading-anchor" href="#Stap-2-Thonny-instellen-voor-de-ESP8266">Stap 2 - Thonny instellen voor de ESP8266</a><a id="Stap-2-Thonny-instellen-voor-de-ESP8266-1"></a><a class="docs-heading-anchor-permalink" href="#Stap-2-Thonny-instellen-voor-de-ESP8266" title="Permalink"></a></h2><h2 id="Stap-3-Software-op-ESP8266-zetten"><a class="docs-heading-anchor" href="#Stap-3-Software-op-ESP8266-zetten">Stap 3 - Software op ESP8266 zetten</a><a id="Stap-3-Software-op-ESP8266-zetten-1"></a><a class="docs-heading-anchor-permalink" href="#Stap-3-Software-op-ESP8266-zetten" title="Permalink"></a></h2><pre><code class="nohighlight hljs"># boot.py - connect to WiFi
def connect():
    import network
    station = network.WLAN(network.STA_IF)
    if not station.isconnected():
        station.active(True)
        station.connect(&#39;Naam_wifi_netwerk&#39;, &#39;Wachtwoord_wifi_netwerk&#39;)
        while not station.isconnected():
            pass # wait till connection
    print(&#39;network config:&#39;, station.ifconfig())
    
connect()</code></pre><p>This code helps you connect your device to a WiFi network. It uses the &quot;network&quot; library to find the WiFi station and turn it on. Then it tries to connect to a network with a name &#39;Naam<em>wifi</em>netwerk and password &#39;Wachtwoord<em>wifi</em>netwerk&#39;. The code will wait until it is successfully connected to the network and then print the connection information.</p><p>```</p><h1 id="main.py-read-sensor-DHT22"><a class="docs-heading-anchor" href="#main.py-read-sensor-DHT22">main.py - read sensor DHT22</a><a id="main.py-read-sensor-DHT22-1"></a><a class="docs-heading-anchor-permalink" href="#main.py-read-sensor-DHT22" title="Permalink"></a></h1><p>from umqtt.simple import MQTTClient import ubinascii import dht import machine from machine import Pin import time</p><h1 id="mqtt-client-setup"><a class="docs-heading-anchor" href="#mqtt-client-setup">mqtt client setup</a><a id="mqtt-client-setup-1"></a><a class="docs-heading-anchor-permalink" href="#mqtt-client-setup" title="Permalink"></a></h1><p>client<em>id = ubinascii.hexlify(machine.unique</em>id()) mqtt<em>server = &#39;IP</em>adres<em>Raspberry</em>Pi&#39;</p><p>last<em>message = 0 message</em>interval = 5</p><p>topic<em>pub</em>temp = b&#39;temperature<em>huiskamer&#39; topic</em>pub<em>hum = b&#39;humidity</em>huiskamer&#39;</p><p>sensor = dht.DHT22(Pin(14))</p><p>def connect<em>mqtt():   global client</em>id, mqtt<em>server   mqttc = MQTTClient(client</em>id, mqtt_server, keepalive=60)   mqttc.connect()   return mqttc</p><p>def restart<em>and</em>reconnect():   print(&#39;Failed to connect to MQTT broker. Reconnecting...&#39;)   time.sleep(10)   machine.reset()</p><p>def read_sensor():   try:     sensor.measure()     temp = sensor.temperature()     hum = sensor.humidity()     if (isinstance(temp, float) and isinstance(hum, float)) or (isinstance(temp, int) and isinstance(hum, int)):       temp = (b&#39;{0:3.1f},&#39;.format(temp))       hum =  (b&#39;{0:3.1f},&#39;.format(hum))       return temp, hum     else:       return(&#39;Invalid sensor readings.&#39;)   except OSError as e:     return(&#39;Failed to read sensor.&#39;)</p><p>try:   client = connect<em>mqtt() except OSError as e:   restart</em>and_reconnect()</p><p>while True:   try:     if (time.time() - last<em>message) &gt; message</em>interval:       temp, hum = read<em>sensor()       print(temp)       print(hum)       client.publish(topic</em>pub<em>temp, temp[:-1])       client.publish(topic</em>pub<em>hum, hum[:-1])       last</em>message = time.time()   except OSError as e:     restart<em>and</em>reconnect() ````</p><p>This code helps you read the data from a special type of sensor called DHT22. The sensor measures temperature and humidity. The code then sends the temperature and humidity readings to a computer or device at a specific address (the MQTT server) using a protocol called MQTT. The code keeps trying to send the readings every 5 seconds. If the code fails to send the readings, it will wait for 10 seconds and then try to connect to the MQTT server again.</p><h2 id="Samenvatting"><a class="docs-heading-anchor" href="#Samenvatting">Samenvatting</a><a id="Samenvatting-1"></a><a class="docs-heading-anchor-permalink" href="#Samenvatting" title="Permalink"></a></h2></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../chapter7/">« MQTT broker installeren</a><a class="docs-footer-nextpage" href="../chapter9/">Node-RED dashboard programma maken »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Monday 6 February 2023 13:59">Monday 6 February 2023</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
