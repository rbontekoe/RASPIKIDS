<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>10 Domoticz installeren · RASPIKIDS</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="RASPIKIDS logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">RASPIKIDS</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Toepassingen met de Raspberry Pi</a></li><li><a class="tocitem" href="../blog/">Blog</a></li><li><span class="tocitem">Sectie 1 - Basis installaties</span><ul><li><a class="tocitem" href="../chapter1/">1 Micro SD-kaartje klaarmaken voor de Raspberry Pi 3B+</a></li><li><a class="tocitem" href="../chapter2/">2 Communiceren met de Raspberry Pi</a></li><li><a class="tocitem" href="../chapter3/">3 Docker installeren</a></li><li><a class="tocitem" href="../chapter4/">4 Portainer installeren</a></li><li><a class="tocitem" href="../chapter5/">5 Node-RED installeren</a></li></ul></li><li><span class="tocitem">Sectie 2 - Algemene Node-RED toepassingen</span><ul><li><a class="tocitem" href="../chapter6/">6 Website bouwen met Node-RED</a></li></ul></li><li><span class="tocitem">Sectie 3 - Sensoren</span><ul><li><a class="tocitem" href="../chapter7/">7 MQTT broker installeren</a></li><li><a class="tocitem" href="../chapter8/">8 Temperatuur meten</a></li><li><a class="tocitem" href="../chapter9/">9 Node-RED dashboard programma maken</a></li></ul></li><li><span class="tocitem">Sectie 4 - Slimme meter</span><ul><li class="is-active"><a class="tocitem" href>10 Domoticz installeren</a><ul class="internal"><li><a class="tocitem" href="#Wat-je-nodig-hebt"><span>Wat je nodig hebt</span></a></li><li><a class="tocitem" href="#Wat-je-gaat-doen"><span>Wat je gaat doen</span></a></li><li><a class="tocitem" href="#Samenvatting"><span>Samenvatting</span></a></li></ul></li><li><a class="tocitem" href="../chapter11/">11 Slimme meter aansluiten</a></li><li><a class="tocitem" href="../chapter12/">12 Stroom- en gasverbruik op het dashboard weergeven</a></li></ul></li><li><a class="tocitem" href="../appendix/">Bijlage</a></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Sectie 4 - Slimme meter</a></li><li class="is-active"><a href>10 Domoticz installeren</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>10 Domoticz installeren</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/rbontekoe/RASPIKIDS/blob/master/docs/src/chapter10.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Domoticz-installeren"><a class="docs-heading-anchor" href="#Domoticz-installeren">Domoticz installeren</a><a id="Domoticz-installeren-1"></a><a class="docs-heading-anchor-permalink" href="#Domoticz-installeren" title="Permalink"></a></h1><p><em>Domoticz is een programma dat je kunt gebruiken om het &quot;slimme&quot; huis te beheren. Als je een slimme meter hebt, is het handig om Domoticz te gebruiken om het energieverbruik in huis te bekijken en om op afstand het energieverbruik te controleren.</em></p><p><img src="../assets/fig_10_1.png" alt="fig_10_1"/></p><h3 id="Inhoud"><a class="docs-heading-anchor" href="#Inhoud">Inhoud</a><a id="Inhoud-1"></a><a class="docs-heading-anchor-permalink" href="#Inhoud" title="Permalink"></a></h3><ul><li><a href="#Domoticz-installeren">Domoticz installeren</a></li><li class="no-marker"><ul><li><a href="#Wat-je-nodig-hebt">Wat je nodig hebt</a></li><li><a href="#Wat-je-gaat-doen">Wat je gaat doen</a></li><li><a href="#Samenvatting">Samenvatting</a></li></ul></li></ul><h2 id="Wat-je-nodig-hebt"><a class="docs-heading-anchor" href="#Wat-je-nodig-hebt">Wat je nodig hebt</a><a id="Wat-je-nodig-hebt-1"></a><a class="docs-heading-anchor-permalink" href="#Wat-je-nodig-hebt" title="Permalink"></a></h2><ul><li>Een Raspberry Pi 3B+ met het besturingssysteem Ubuntu Server 22.04.</li><li>Docker en Portainer zijn geïnstalleerd.</li><li>De Raspberry Pi heeft verbinding met het Internet.</li><li>Een PC die een SSH verbinding heeft met de Raspberry Pi.</li></ul><h2 id="Wat-je-gaat-doen"><a class="docs-heading-anchor" href="#Wat-je-gaat-doen">Wat je gaat doen</a><a id="Wat-je-gaat-doen-1"></a><a class="docs-heading-anchor-permalink" href="#Wat-je-gaat-doen" title="Permalink"></a></h2><p>Stap 1: Verbind je computer via SSH verbinden met de Raspberry Pi.</p><p>Stap 2: Container starten met &quot;docker compose&quot;.</p><p>Stap 3: Domoticz benaderen met een browser.</p><h3 id="Stap-1-Verbind-je-computer-via-SSH-verbinden-met-de-Raspberry-Pi"><a class="docs-heading-anchor" href="#Stap-1-Verbind-je-computer-via-SSH-verbinden-met-de-Raspberry-Pi">Stap 1 - Verbind je computer via SSH verbinden met de Raspberry Pi</a><a id="Stap-1-Verbind-je-computer-via-SSH-verbinden-met-de-Raspberry-Pi-1"></a><a class="docs-heading-anchor-permalink" href="#Stap-1-Verbind-je-computer-via-SSH-verbinden-met-de-Raspberry-Pi" title="Permalink"></a></h3><p>Verbind je computer met de Raspberry Pi en log in.</p><pre><code class="nohighlight hljs">ssh ubuntu@IP_adres_Raspberry_Pi</code></pre><h3 id="docker-compose.yml"><a class="docs-heading-anchor" href="#docker-compose.yml">docker-compose.yml</a><a id="docker-compose.yml-1"></a><a class="docs-heading-anchor-permalink" href="#docker-compose.yml" title="Permalink"></a></h3><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>In het vakje hieronder staat een stukje code. Bovenaan rechts zie je een symbool dat lijkt op twee bladen papier. Als je daarop klikt, kopieer je alle code in het vakje naar het klembord. Dat is heel handig! Het betekent dat je de code ergens anders kunt plakken en het niet opnieuw hoeft te typen.</p></div></div><pre><code class="nohighlight hljs">version: &#39;3.3&#39;

services:
  domoticz:
    image: domoticz/domoticz
    container_name: domoticz
    restart: unless-stopped
    # Pass devices to container
    devices:
      - &quot;/dev/ttyUSB0:/dev/ttyUSB0&quot;
    ports:
      - &quot;8081:8080&quot;
    volumes:
      - ./config:/opt/domoticz/userdata
    environment:
      - TZ=Europe/Amsterdam
      #- LOG_PATH=/opt/domoticz/userdata/domoticz.log</code></pre><p>Stel je voor dat je een computerprogramma hebt dat je helpt bij het besturen van alle slimme apparaten in huis, zoals slimme lampen en thermostaten. Het programma dat we gaan gebruiken heet Domoticz, en we gaan het installeren met behulp van een bestand dat docker-compose.yml heet.</p><p>Docker-compose.yml is een bestand dat ons vertelt welke software we willen installeren en hoe we die software willen gebruiken. In dit geval willen we Domoticz installeren en we willen ervoor zorgen dat het altijd blijft draaien, tenzij we het expliciet stoppen.</p><p>We willen dat Domoticz toegang heeft tot een specifiek apparaat, namelijk een apparaat dat is aangesloten op de USB-poort van onze computer. We vertellen dit aan Docker door de regel &quot;devices&quot; toe te voegen en de locatie van het apparaat op te geven.</p><p>We willen ook dat Domoticz toegankelijk is via onze webbrowser, dus we vertellen Docker om de poort 8081 op onze computer door te sturen naar de poort 8080 waar Domoticz op draait.</p><p>We slaan ook een aantal belangrijke instellingen op, zoals onze tijdzone en de locatie waar we gegevens willen opslaan.</p><p>Als we alles hebben ingesteld in het docker-compose.yml-bestand, kunnen we de opdracht geven om het programma te starten en Domoticz zal worden geïnstalleerd en geconfigureerd zoals we hebben aangegeven in het bestand.</p><h3 id="Stap-2-Container-starten-met-&quot;docker-compose&quot;"><a class="docs-heading-anchor" href="#Stap-2-Container-starten-met-&quot;docker-compose&quot;">Stap 2 - Container starten met &quot;docker compose&quot;</a><a id="Stap-2-Container-starten-met-&quot;docker-compose&quot;-1"></a><a class="docs-heading-anchor-permalink" href="#Stap-2-Container-starten-met-&quot;docker-compose&quot;" title="Permalink"></a></h3><p>Maak een map &quot;projects&quot; op je computer en maak vervolgens een andere map binnen die map die &quot;domoticz&quot; heet.</p><pre><code class="nohighlight hljs">mkdir projects
cd projects
mkdir domoticz
cd domoticz</code></pre><p>Maak een leeg bestand &quot;docker-compose.yml&quot; en open het met de nano editor.</p><pre><code class="nohighlight hljs"># Maak docker-compose.yml
nano docker-compose.yml</code></pre><p>Ga naar de docker-compose.yml sectie <a href="#docker-compose.yml">hierboven</a>. Kopieer de code naar het klembord en plak het in de editor met Ctrl + Shift + V. Bewaar het bestand vervolgens met Ctrl + O en verlaat de editor met Ctr + X.</p><p>Maak dan de Domoticz container met:</p><pre><code class="nohighlight hljs"># Maak Domoticz container
docker compose up</code></pre><h3 id="Stap-3-Domoticz-via-een-browser"><a class="docs-heading-anchor" href="#Stap-3-Domoticz-via-een-browser">Stap 3 - Domoticz via een browser</a><a id="Stap-3-Domoticz-via-een-browser-1"></a><a class="docs-heading-anchor-permalink" href="#Stap-3-Domoticz-via-een-browser" title="Permalink"></a></h3><p>Type in de adresbalk van je browser <code>IP_adres_Raspberry_Pi:8081</code> en druk op de Enter-toets.</p><p>Je krijgt je Domoticz openingspagina te zien, maar nog niet het verbruik van het gas en de electriciteit. Daarvoor moet je de Raspberry Pi aansluiten op je slimme meter.</p><h2 id="Samenvatting"><a class="docs-heading-anchor" href="#Samenvatting">Samenvatting</a><a id="Samenvatting-1"></a><a class="docs-heading-anchor-permalink" href="#Samenvatting" title="Permalink"></a></h2><p>Domoticz is een programma dat je helpt om je &quot;slimme&quot; huis te beheren en bijvoorbeeld het energieverbruik te monitoren en controleren. Om Domoticz te gebruiken, heb je een Raspberry Pi 3B+ nodig met het besturingssysteem Ubuntu Server 22.04, Docker en Portainer geïnstalleerd en een computer die verbinding heeft met de Raspberry Pi via SSH.</p><p>Om Domoticz te installeren, maak je gebruik van een bestand genaamd docker-compose.yml. Dit bestand vertelt Docker welke software er geïnstalleerd moet worden en hoe het gebruikt moet worden. In dit geval willen we Domoticz installeren en ervoor zorgen dat het altijd blijft draaien, tenzij we het expliciet stoppen.</p><p>We willen dat Domoticz toegang heeft tot een specifiek apparaat, bijvoorbeeld een slimme meter dat is aangesloten op de USB-poort van onze computer. Dit kan via de &quot;devices&quot; regel in het docker-compose.yml-bestand. Zo wordt het apparaat doorgegeven aan de container waarin Domoticz draait.</p><p>Verder willen we dat Domoticz toegankelijk is via onze webbrowser, zodat we het energieverbruik kunnen monitoren en controleren. Dit kan via de poorten die worden doorgestuurd van de Raspberry Pi naar de computer. We slaan ook belangrijke instellingen op, zoals onze tijdzone en de locatie waar we gegevens willen opslaan.</p><p>Nadat we alles hebben ingesteld in het docker-compose.yml-bestand, geven we de opdracht om het programma te starten en Domoticz zal worden geïnstalleerd en geconfigureerd zoals we hebben aangegeven in het bestand.</p><p>Om Domoticz te starten, maak je een folder aan onder de folder &quot;projects&quot; met de naam &quot;domoticz&quot; en maak je een leeg bestand aan met de naam &quot;docker-compose.yml&quot;. Hierin kopieer je de code die eerder in het artikel is gegeven en sla je het bestand op.</p><p>Vervolgens start je de Domoticz container door de opdracht &quot;docker compose up&quot; uit te voeren. Je kunt vervolgens Domoticz openen in je webbrowser door het IP-adres van de Raspberry Pi te gebruiken, gevolgd door de poort 8081.</p><p>Met deze stappen kun je Domoticz gebruiken om het energieverbruik in je slimme huis te monitoren en te controleren.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../chapter9/">« 9 Node-RED dashboard programma maken</a><a class="docs-footer-nextpage" href="../chapter11/">11 Slimme meter aansluiten »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Thursday 6 July 2023 16:09">Thursday 6 July 2023</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
